# FROM is the taker
# ROOT is the target
targetted_decisions = {
	play_dice_poker = {
		filter = all
		ai_target_filter = court
		from_potential = {
			OR = {
				ai = no
				trait = gambler
			}
			#wealth = 0.5
		}
		potential = {
		}
		allow = {
			# Same location - might be too restrictive ?
			at_location = FROM
			NOT = { war_with = FROM }
			
			# Bet+raise money
			wealth = 0.5
			
			# TODO check opponent is a dice poker player, and AI would agree to play (opinion, etc.)
		}
		effect = {
			# Propose a game to opponent
			character_event = { id = dice_poker.0 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0.001
			}
			
			modifier = { # AI only targets human players
				factor = 0
				ROOT = {
					ai = yes
				}
			}
			
			modifier = { # AI only targets human players
				factor = 0
				ROOT = {
					has_character_modifier = no_mood_for_game
				}
			}
			
			modifier = { # AI only targets gamblers
				factor = 0
				FROM = {
					NOT = { trait = gambler } 
				}
			}
			
			# Timer
			modifier = {
				factor = 0				
				OR = {
					has_opinion_modifier = { who = ROOT modifier = won_last_game }
					has_opinion_modifier = { who = ROOT modifier = lost_last_game }
				}
			}
			
			modifier = { # AI will only target gamblers they like
				factor = 0
				NOT = {
					opinion = { who = ROOT value = 50 } 
				}
			}
			
			modifier = {
				factor = 5
				FROM = {
					wealth = 25
				}
			}
			
			modifier = {
				factor = 10
				FROM = {
					wealth = 50
				}
			}
		}
	}
}
