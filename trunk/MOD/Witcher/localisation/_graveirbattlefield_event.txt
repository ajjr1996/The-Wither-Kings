namespace = graveirbattlefield
#Graveir Catches Someone While Foraging Battlefield 
character_event = {
	id = graveirbattlefield.0
	desc = graveirbattlefield.0.desc
	picture = "GFX_evt_pale_rider"
	
	is_triggered_only = yes	

	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		death = {
			death_reason = death_murder_unknown
		}
	}
	
	option = {
		name = ALAS
		liege = {
			character_event = { id = graveirbattlefield.100 } }
	}
}

#Liege Informed
character_event = {
	id = graveirbattlefield.100
	desc = "graveirbattlefield.100.desc"
	picture = "GFX_evt_emissary"
	
	is_triggered_only = yes

	mean_time_to_happen = {
		days = 1
	}
	
	
	
	option = {
		name = graveirbattlefield.101 #Send Your Marshal To Hunt It
		trigger = {
			any_courtier = {
				has_job_title = job_marshal
			}
		}
		job_marshal = {
			letter_event = { id = graveirbattlefield.200 days = 1 }
		}
		set_character_flag = sent_marshal_to_hunt_graveir
	}
	
	
	option = {
		name = graveirbattlefield.102 #I Will Avenge Him Myself
		random = {
			chance = 20
			add_trait = brave
		}
		prestige = 75
		FROM = {
			any_dynasty_member = {
				opinion = {
					modifier = opinion_grateful
					who = ROOT
					years = 2
				}
			}
			any_friend = {
				opinion = {
					modifier = opinion_grateful
					who = ROOT
					years = 2
				}
			}
		}
		trigger = {
				trait = brave
				NOT = { trait = craven }
		}
		hidden_tooltip = {
			character_event = { id = graveirbattlefield.250 days = 1 }
		}
	}
	
	
	option = {
		name = graveirbattlefield.103	#Take A Group To Hunt It
		random = {
			chance = 10
			add_trait = brave
		}
		prestige = 30
		FROM = {
			any_dynasty_member = {
				opinion = {
					modifier = opinion_grateful
					who = ROOT
					years = 2
				}
			}
			any_friend = {
				opinion = {
					modifier = opinion_grateful
					who = ROOT
					years = 2
				}
			}
		}
		hidden_tooltip = {
			character_event = { id = graveirbattlefield.300 days = 1 }
		}
	}
	
	
	option = {
		name = graveirbattlefield.104 #It's Too Dangerous
		random = {
			chance = 20
			add_trait = craven
		}
		prestige = -25
		FROM = {
			any_dynasty_member = {
				opinion = {
					modifier = opinion_hatred
					who = ROOT
					years = 3
				}
			}
			any_friend = {
				opinion = {
					modifier = opinion_hatred
					who = ROOT
					years = 3
				}
			}
		}
	}
}

#Marshal Asked To Hunt Graveir
letter_event = {
	id = graveirbattlefield.200
	desc = graveirbattlefield.200.desc
	picture = "GFX_evt_throne_room"
	
	is_triggered_only = yes
	
	option = {
		name = graveirbattlefield.201 #Accept
		random = {
			chance = 20
			add_trait = brave
		}
		prestige = 50
		FROM = {
			letter_event = { id = graveirbattlfield.marshalaccept days = 1 }
			character_event = { id = graveirbattlefield.250 days = 1 }
		}
	}
	
	
	option = {
		name = graveirbattlefield.202 #Refuse
		random = {
			chance = 20
			add_trait = craven 
		}
		prestige = -35
		FROM = {
			letter_event = { id = graveirbattlefield.marshalrefuse days = 1 }
		}
	}
}

#Marshal Accepted
letter_event = {
	id = graveirbattlefield.marshalaccept
	desc = graveirbattlefield.marshalaccept.desc
	picture = "GFX_evt_large_army"
	
	is_triggered_only = yes
	
	option = {
		name = GOODMAN
		opinion = {
			modifier = opinion_grateful
			who = FROM
			years = 1
		}
	}
}

#Marshal Refused
letter_event = {
	id = graveirbattlefield.marshalrefuse
	desc = graveirbattlefield.marshalrefuse.desc
	picture = "GFX_evt_scandal"
	
	is_triggered_only = yes
	
	option = {
		name = HOWDAREHE
		opinion = {
			modifier = opinion_angry
			who = FROM
			years = 1
		}
	}
}

#Hunting Graveir
character_event = {
	id = graveirbattlefield.250
	desc = graveirbattlefield.250.desc
	picture = "GFX_evt_pale_rider"
	
	is_triggered_only = yes
	
	option = {
		name = graveirbattlefield.251 #Charge!
		random = {
			chance = 70
			add_trait = brave
		}
		hidden_tooltip = {
			random_list = {
				55 = { character_event = { id = graveirbattlefield.victory days = 1 } }
				30 = { character_event = { id = graveirbattlefield.wounded days = 1 } }
				10 = { character_event = { id = graveirbattlefield.maimed days = 1 } }
				5 = { character_event = { id = graveirbattlefield.death } }
			}
		}
	}
	
	option = {
		name = graveirbattlefield.252 #RunAway
		random = {
			chance = 80
			add_trait = craven
		}
		hidden_tooltip = {
			random_list = {
				90 = { character_event = { id = graveirbattlefield.fled days = 1 } }
				10 = { character_event = { id = graveirbattlefield.death } }
			}
		}				
	}
}

#Victory!
character_event = {
	id = graveirbattlefield.victory
	desc = graveirbattlefield.victory.desc
	picture = "GFX_evt_pale_rider"
	
	is_triggered_only = yes
	
	option = {
		name = GLORIOUS
		random = {
			chance = 50
			change_martial = 1
		}
		prestige = 50
	}
	IF = {
		LIEGE = { has_character_flag = sent_marshal_to_hunt_graveir
			LIEGE = { letter_event = { id = graveirbattlefield.informedvictory } }
		}
	}
}

#Wounded
character_event = {
	id = graveirbattlefield.wounded
	desc = graveirbattlefield.wounded.desc
	picture = "GFX_evt_large_army"
	
	is_triggered_only = yes
	
	option = {
		name = DAMN
		add_trait = wounded
		random = {
			chance = 40
			change_martial = 1
		}
		prestige = 50
	}
	IF = {
		LIEGE = { has_character_flag = sent_marshal_to_hunt_graveir
			LIEGE = { letter_event = { id = graveirbattlefield.informedwounded } }
		}
	}
}

#Maimed
character_event = {
	id = graveirbattlefield.maimed
	desc = graveirbattlefield.maimed.desc
	picture = "GFX_evt_death"
	
	is_triggered_only = yes
	
	option = {
		name = UGH
		add_trait = maimed
		random = { 
			chance = 30
			change_martial = 1
		}
		prestige = 50
	}
	IF = {
		LIEGE = { has_character_flag = sent_marshal_to_hunt_graveir
			LIEGE = { letter_event = { id = graveirbattlefield.informedmaimed } }
		}
	}
}

#Death
character_event = {
	id = graveirbattlefield.death
	desc = graveirbattlefield.death.desc
	picture = "GFX_evt_bloody_man"
	
	is_triggered_only = yes
	
	option = {
		name = ALAS
		death = {
			death_reason = death_battle
		}
	}
	IF = {
		LIEGE = { has_character_flag = sent_marshal_to_hunt_graveir
			LIEGE = { letter_event = { id = graveirbattlefield.informeddeath } }
		}
	}
}

#Fled
character_event = {
	id = graveirbattlefield.fled
	desc = graveirbattlefield.fled.desc
	picture = "GFX_evt_lunatic"
	
	is_triggered_only = yes
	
	option = {
		name = WHEW
	}
	IF = {
		LIEGE = { has_character_flag = sent_marshal_to_hunt_graveir
			LIEGE = { letter_event = { id = graveirbattlefield.informedfled } }
		}
	}
}

#Take A Group To Hunt It
character_event = {
	id = graveirbattlefield.300
	desc = graveirbattlefield.300.desc
	picture = "GFX_evt_large_army"
	
	is_triggered_only = yes
	
	option = {
		name = graveirbattlefield.301 #Attack!
		random = {
			chance = 20
			add_trait = brave
		}
		hidden_tooltip = {
			random_list = {
				75 = { character_event = { id = graveirbattlefield.victory days = 1 } }
				15 = { character_event = { id = graveirbattlefield.wounded days = 1 } }
				7 = { character_event = { id = graveirbattlefield.maimed days = 1 } }
				3 = { character_event = { id = graveirbattlefield.death } }
			}
		}
	}
	
	option = {
		name = graveirbattlefield.302 #RunAway!
		add_trait = craven
		hidden_tooltip = {
			random_list = {
				98 = { character_event = { id = graveirbattlefield.fled days = 1 } }
				2 = { character_event = { id = graveirbattlefield.death } }
			}
		}
	}
}

#Liege Informed Events
#Victory
letter_event = {
	id = graveirbattlefield.informedvictory
	desc = graveirbattlefield.informedvictory.desc
	picture = "GFX_evt_emissary"
	
	is_triggered_only = yes
	
	option = {
		name = HURRAH
	}
}
#Wounded
letter_event = {
	id = graveirbattlefield.informedwounded
	desc = graveirbattlefield.informedwounded.desc
	picture = "GFX_evt_emissary"
	
	is_triggered_only = yes
	
	option = {
		name = WELLDONE
	}
}
#Maimed
letter_event = {
	id = graveirbattlefield.informedmaimed
	desc = graveirbattlefield.informedmaimed.desc
	picture = "GFX_evt_death"
	
	is_triggered_only = yes
	
	option = {
		name = DAMN
	}
}
#Death
letter_event = {
	id = graveirbattlefield.informeddeath
	desc = graveirbattlefield.informeddeath.desc
	picture = "GFX_evt_death"
	
	is_triggered_only = yes
	
	option = {
		name = ASHAME
		random_list = {
			10 = { add_trait = stressed }
			5 = { add_trait = depressed }
		}
	}
}
#Fled
letter_event = {
	id = graveirbattlefield.informedfled
	desc = graveirbattlefield.informedfled.desc
	picture = "GFX_evt_emissary"
	
	is_triggered_only = yes
	
	option = {
		name = COWARD
	}
}