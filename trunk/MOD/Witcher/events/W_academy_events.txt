namespace = academy

################################################
# University of Oxenfurt and Nilfgaard Academy
################################################
# Child - Wants to study in academy
character_event = {
	id = academy.1
	desc = "Son wants to go to academy"
	picture = GFX_evt_son_asking_father
	
	hide_window = yes
	
	ai = yes
	min_age = 15
	max_age = 25
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_landed = no
		in_command = no
		NOT = { 
			trait = academic 
			has_character_flag = wants_academy
			has_character_flag = denied_academy
		}
		father = {
			is_alive = yes
			is_ruler = yes
			is_liege_of = ROOT
			prisoner = no
			NOT = { trait = incapable }
			ROOT = {
				host = { character = PREVPREV }
			}
		}
	}
	
	mean_time_to_happen = {
		months = 240
		modifier = { factor = 0.5 trait = ambitious }
		modifier = { factor = 2 trait = content }
		modifier = { factor = 0.75 trait = quick }
		modifier = { factor = 1.5 trait = slow }
		modifier = { factor = 0.5 trait = genius }
		modifier = { factor = 2 trait = imbecile }
		modifier = { factor = 0.75 trait = gregarious }
		modifier = { factor = 1.5 trait = shy }
		modifier = { factor = 0.75 trait = diligent }
		modifier = { factor = 1.5 trait = slothful }
		modifier = { factor = 0.75 trait = scholar }
		modifier = { factor = 1.5 is_primary_heir = yes }
		modifier = { factor = 1.5 female = yes }
	}
	
	option = {
		name = "Nilfgaard academy"
		trigger =	{
			location = { county = { de_jure_liege_or_above = e_nilfgaard } }
		}
		father = { character_event = { id = academy.2 } }
		set_character_flag = wants_academy
	}
	option = {
		name = "Oxenfurt univesity"
		trigger =	{
			location = { county = { de_jure_liege_or_above = e_the_north } }
		}
		father = { character_event = { id = academy.3 } }
		set_character_flag = wants_academy
	}
}
# Father - Child wants to study in Nilfgaard academy
character_event = {
	id = academy.2
	desc =  EVTDESCacademy.2
	picture = GFX_evt_son_asking_father
	
	is_triggered_only = yes
	
	option = { # Allow
		name = EVTOPTAacademy.2
		d_varangian_guard = {
			holder_scope = {
				FROM = {
					move_character = PREV
				}
			}
		}
		hidden_tooltip = {
			FROM = { 
				character_event = { id = academy.4 days = 1460 }
			}
		}
		prestige = 50
		scaled_wealth = -0.10
	}
	option = { # Deny
		name = EVTOPTBacademy.2
		FROM = {
			opinion = { modifier = opinion_very_disappointed years = 1 who = ROOT }
			clr_character_flag = wants_academy
			set_character_flag = denied_academy
		}
		prestige = -50
	}
}
# Father - Child wants to study in Oxenfurt academy
character_event = {
	id = academy.3
	desc =  EVTDESCacademy.3
	picture = GFX_evt_son_asking_father
	
	is_triggered_only = yes
	
	option = { # Allow
		name = EVTOPTAacademy.3
		c_oxenfurt = {
			holder_scope = {
				FROM = {
					move_character = PREV
				}
			}
		}
		hidden_tooltip = {
			FROM = { 
				character_event = { id =academy.4 days = 1460 }
			}
		}
		prestige = 50
		scaled_wealth = -0.10
	}
	option = { # Deny
		name = EVTOPTBacademy.3
		FROM = {
			opinion = { modifier = opinion_very_disappointed years = 1 who = ROOT }
			clr_character_flag = wants_academy
			set_character_flag = denied_academy
		}
		prestige = -50
	}
}
# Child - Studied a few years
character_event = {
	id = academy.4
	desc =  "Son is studying"
	picture = GFX_evt_son_asking_father
	
	is_triggered_only = yes
	hide_window = yes
	
	trigger = {
		has_character_flag = wants_academy
	}
	
	immediate = {
		set_character_flag = studying_academy
		clr_character_flag = wants_academy
	}
	
	option = {
		name = "OK"
	}
}
# Child - Child returns a drunkard
character_event = {
	id = academy.10
	desc =  "Drunkard"
	picture = GFX_evt_feast
	
	is_triggered_only = yes
	hide_window = yes
	
	trigger = {
		has_character_flag = studying_academy
		NOT = { trait = drunkard }
	}
	
	mean_time_to_happen = {
		months = 160
		modifier = { factor = 0.75 trait = gluttonous }
		modifier = { factor = 1.25 trait = temperate }
	}
	
	immediate = {
		father = { character_event = { id = academy.11 } }
		clr_character_flag = studying_academy
	}
	
	option = {
		name = "OK"
	}
}
# Father - Child returns a drunkard
character_event = {
	id = academy.11
	desc = EVTDESCacademy.11
	picture = GFX_evt_feast
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTAacademy.11
		FROM = {
			move_character = ROOT
			add_trait = drunkard
			add_trait = academic
		}
	}
}
# Child - Child returns better educated
character_event = {
	id = academy.12
	desc =  "Improve education"
	picture = GFX_evt_council
	
	is_triggered_only = yes
	hide_window = yes
	
	trigger = {
		has_character_flag = studying_academy
		NOT = { trait = elusive_shadow }
		NOT = { trait = grey_eminence }
		NOT = { trait = midas_touched }
		NOT = { trait = mastermind_theologian }
		NOT = { trait = the_sage }
		OR = {
			trait = amateurish_plotter
			trait = flamboyant_schemer
			trait = intricate_webweaver
			trait = naive_appeaser
			trait = underhanded_rogue
			trait = charismatic_negotiator
			trait = indulgent_wastrel
			trait = thrifty_clerk
			trait = fortune_builder
			trait = detached_priest
			trait = martial_cleric
			trait = scholarly_theologian
			trait = scatterbrain
			trait = jack_of_all_trades
			trait = polymath
		}
	}
	
	mean_time_to_happen = {
		months = 160
		modifier = { factor = 0.75 trait = diligent }
		modifier = { factor = 1.25 trait = slothful }
	}
	
	immediate = {
		father = { character_event = { id = academy.13 } }
		clr_character_flag = studying_academy
	}
	
	option = {
		name = "OK"
	}
}
# Father - Child returns better educated
character_event = {
	id = academy.13
	desc = EVTDESCacademy.13
	picture = GFX_evt_council
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTAacademy.13
		FROM = {
			move_character = ROOT
			if = {
				limit = { trait = amateurish_plotter }
				remove_trait = amateurish_plotter
				add_trait = flamboyant_schemer
			}
			if = {
				limit = { trait = flamboyant_schemer }
				remove_trait = flamboyant_schemer
				add_trait = intricate_webweaver
			}
			if = {
				limit = { trait = intricate_webweaver }
				remove_trait = intricate_webweaver
				add_trait = elusive_shadow
			}
			if = {
				limit = { trait = naive_appeaser }
				remove_trait = naive_appeaser
				add_trait = underhanded_rogue
			}
			if = {
				limit = { trait = underhanded_rogue }
				remove_trait = underhanded_rogue
				add_trait = charismatic_negotiator
			}
			if = {
				limit = { trait = charismatic_negotiator }
				remove_trait = charismatic_negotiator
				add_trait = grey_eminence
			}
			if = {
				limit = { trait = indulgent_wastrel }
				remove_trait = indulgent_wastrel
				add_trait = thrifty_clerk
			}
			if = {
				limit = { trait = thrifty_clerk }
				remove_trait = thrifty_clerk
				add_trait = fortune_builder
			}
			if = {
				limit = { trait = fortune_builder }
				remove_trait = fortune_builder
				add_trait = midas_touched
			}
			if = {
				limit = { trait = detached_priest }
				remove_trait = detached_priest
				add_trait = martial_cleric
			}
			if = {
				limit = { trait = martial_cleric }
				remove_trait = martial_cleric
				add_trait = scholarly_theologian
			}
			if = {
				limit = { trait = scholarly_theologian }
				remove_trait = scholarly_theologian
				add_trait = mastermind_theologian
			}
			if = {
				limit = { trait = scatterbrain }
				remove_trait = scatterbrain
				add_trait = jack_of_all_trades
			}
			if = {
				limit = { trait = jack_of_all_trades }
				remove_trait = jack_of_all_trades
				add_trait = polymath
			}
			if = {
				limit = { trait = polymath }
				remove_trait = polymath
				add_trait = the_sage
			}
			add_trait = academic
		}
	}
}
# Child - Child returns depressed
character_event = {
	id = academy.14
	desc =  "Depressed"
	picture = GFX_evt_shadow
	
	is_triggered_only = yes
	hide_window = yes
	
	trigger = {
		has_character_flag = studying_academy
		NOT = { trait = depressed }
	}
	
	mean_time_to_happen = {
		months = 160
		modifier = { factor = 0.75 trait = kind }
		modifier = { factor = 1.25 trait = envious }
	}
	
	immediate = {
		father = { character_event = { id = academy.15 } }
		clr_character_flag = studying_academy
	}
	
	option = {
		name = "OK"
	}
}
# Father - Child returns depressed
character_event = {
	id = academy.15
	desc = EVTDESCacademy.15
	picture = GFX_evt_shadow
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTAacademy.15
		FROM = {
			move_character = ROOT
			add_trait = depressed
			add_trait = academic
		}
	}
}
# Child - Child returns married
character_event = {
	id = academy.16
	desc =  "Married"
	picture = GFX_evt_marriage
	
	is_triggered_only = yes
	hide_window = yes
	
	trigger = {
		has_character_flag = studying_academy
		is_married = no
	}
	
	mean_time_to_happen = {
		months = 160
		modifier = { factor = 0.75 trait = lustful }
		modifier = { factor = 1.25 trait = chaste }
	}
	
	immediate = {
		father = { character_event = { id = academy.17 } }
		clr_character_flag = studying_academy
	}
	
	option = {
		name = "OK"
	}
}
# Father - Child returns married
character_event = {
	id = academy.17
	desc = EVTDESCacademy.17
	picture = GFX_evt_marriage
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTAacademy.17
		trigger = { FROM = { female = no } }
		create_character = {
			random_traits = yes
			dynasty = NONE
			female = yes
			age = 18
		}
		new_character = {
			add_spouse = FROM
			if = {
				limit = { location = { county = { de_jure_liege_or_above = e_nilfgaard } } }
				random_list = {
					80 = { religion = solar }
					20 = { religion = melitele }
				}
				random_list = {
					60 = { culture = nilfgaardian }
					10 = { religion = vicovarian }
					10 = { religion = gemmeran }
					10 = { religion = etolian }
					10 = { religion = maechts }
				}
			}
			if = {
				limit = { location = { county = { de_jure_liege_or_above = e_the_north } } }
				random_list = {
					25 = { religion = kreve }
					25 = { religion = lebioda }
					25 = { religion = eternal_fire }
					25 = { religion = melitele }
				}
				random_list = {
					20 = { culture = temerian }
					20 = { religion = redanian }
					20 = { religion = kaedweni }
					20 = { religion = koviri }
					10 = { religion = aedirnian }
					10 = { religion = lyrian }
				}
			}
		}
		FROM = {
			move_character = ROOT
			add_trait = academic
		}
	}
	option = {
		name = EVTOPTBacademy.17
		trigger = { FROM = { female = yes } }
		create_character = {
			random_traits = yes
			dynasty = NONE
			female = no
			age = 18
		}
		new_character = {
			add_spouse_matrilineal = FROM
			if = {
				limit = { location = { county = { de_jure_liege_or_above = e_nilfgaard } } }
				random_list = {
					80 = { religion = solar }
					20 = { religion = melitele }
				}
				random_list = {
					60 = { culture = nilfgaardian }
					10 = { religion = vicovarian }
					10 = { religion = gemmeran }
					10 = { religion = etolian }
					10 = { religion = maechts }
				}
			}
			if = {
				limit = { location = { county = { de_jure_liege_or_above = e_the_north } } }
				random_list = {
					25 = { religion = kreve }
					25 = { religion = lebioda }
					25 = { religion = eternal_fire }
					25 = { religion = melitele }
				}
				random_list = {
					20 = { culture = temerian }
					20 = { religion = redanian }
					20 = { religion = kaedweni }
					20 = { religion = koviri }
					10 = { religion = aedirnian }
					10 = { religion = lyrian }
				}
			}
		}
		FROM = {
			move_character = ROOT
			add_trait = academic
		}
	}
}
# Child - Child returns ill
character_event = {
	id = academy.18
	desc =  "Ill"
	picture = GFX_evt_illness
	
	is_triggered_only = yes
	hide_window = yes
	
	trigger = {
		has_character_flag = studying_academy
		NOT = { trait = ill }
	}
	
	mean_time_to_happen = {
		months = 160
		modifier = { factor = 0.75 trait = weak }
		modifier = { factor = 1.25 trait = stong }
	}
	
	immediate = {
		father = { character_event = { id = academy.19 } }
		clr_character_flag = studying_academy
	}
	
	option = {
		name = "OK"
	}
}
# Father - Child returns ill
character_event = {
	id = academy.19
	desc = EVTDESCacademy.19
	picture = GFX_evt_illness
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTAacademy.19
		FROM = {
			move_character = ROOT
			add_trait = ill
		}
	}
}
# Child - Son returns scholar
character_event = {
	id = academy.20
	desc =  "Scholar"
	picture = GFX_evt_library
	
	is_triggered_only = yes
	hide_window = yes
	
	trigger = {
		has_character_flag = studying_academy
		NOT = { trait = scholar }
	}
	
	mean_time_to_happen = {
		months = 160
		modifier = { factor = 0.75 trait = shy }
		modifier = { factor = 1.25 trait = gregariuos }
	}
	
	immediate = {
		father = { character_event = { id = academy.21 } }
		clr_character_flag = studying_academy
	}
	
	option = {
		name = "OK"
	}
}
# Father - Child returns scholar
character_event = {
	id = academy.21
	desc = EVTDESCacademy.21
	picture = GFX_evt_library
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTAacademy.21
		FROM = {
			move_character = ROOT
			add_trait = scholar
		}
	}
}
# Child - Child returns hedonist
character_event = {
	id = academy.22
	desc =  "Hedonist"
	picture = GFX_evt_brothel
	
	is_triggered_only = yes
	hide_window = yes
	
	trigger = {
		has_character_flag = studying_academy
		NOT = { trait = hedonist }
	}
	
	mean_time_to_happen = {
		months = 160
		modifier = { factor = 0.75 trait = lustful }
		modifier = { factor = 1.25 trait = chaste }
	}
	
	immediate = {
		father = { character_event = { id = academy.23 } }
		clr_character_flag = studying_academy
	}
	
	option = {
		name = "OK"
	}
}
# Father - Child returns hedonist
character_event = {
	id = academy.23
	desc = EVTDESCacademy.23
	picture = GFX_evt_brothel
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTAacademy.23
		FROM = {
			move_character = ROOT
			add_trait = hedonist
		}
	}
}
# Child - Father dies and you are heir
character_event = {
	id = academy.30
	desc = EVTDESCacademy.30
	picture = GFX_evt_death
	
	min_age = 15
	capable_only = yes
	prisoner = no
	
	trigger = {
		OR = {
			has_character_flag = wants_academy
			has_character_flag = studying_academy
		}
		father = { is_alive = no }
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		clr_character_flag = wants_academy
		clr_character_flag = studying_academy
	}
	
	option = {
		name = EVTOPTAacademy.30
		add_trait = academic
	}
}
