# Written by Joel Hansson

#############################################
#                                         	#
# ZE Childhood Events					  	#
# ID ZE.2100-ZE.2199                    	#
#                                         	#
#############################################

namespace = ZE

# Faith focus - Child adopts Educators religion
character_event = {
	id = ZE.2100
	desc = EVTDESC_ZE_2100
	picture = GFX_evt_guardian
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { religion = FROM }
	}
	
	immediate = {
		save_event_target_as = target_educator
		FROM = { save_event_target_as = target_child }
	}
	
	option = {
		name = EVTOPTA_ZE_2100
		ai_chance = { factor = 100 }
		tooltip = {
			reverse_religion = event_target:target_child
		}
		event_target:target_child = { character_event = { id = ZE.2101} }
	}
	
	option = {
		name = EVTOPTB_ZE_2100
		ai_chance = { factor = 0 }
	}
}

character_event = {
	id = ZE.2101
	desc = EVTDESC_ZE_2101
	picture = GFX_evt_guardian
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	trigger = { 
		NOT = { religion = event_target:target_educator }
	}
	
	option = {
		name = EVTOPTA_ZE_2101
		ai_chance = { factor = 100 }
		religion = event_target:target_educator
		hidden_tooltip = {
			if = {
				limit = {
					NOT = { liege = { character = event_target:target_educator } }
				}
				liege = { character_event = { id = ZE.2102 } }
			}
		}
	}
	
	option = {
		name = EVTOPTB_ZE_2101
		ai_chance = { factor = 0 }
		prestige = -5
	}
}

character_event = {
	id = ZE.2102
	desc = EVTDESC_ZE_2102
	picture = GFX_evt_library
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ZE_2102
		tooltip = {
			FROM = {
				religion = FROMFROM
			}
		}
	}
}

# Heritage focus - Child adopts Educators religion
character_event = {
	id = ZE.2110
	desc = EVTDESC_ZE_2100
	picture = GFX_evt_guardian
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { religion = FROM }
	}
	
	immediate = {
		save_event_target_as = target_educator
		FROM = { save_event_target_as = target_child }
	}
	
		option = {
		name = EVTOPTA_ZE_2100
		ai_chance = { factor = 100 }
		tooltip = {
			reverse_religion = event_target:target_child
		}
		event_target:target_child = { character_event = { id = ZE.2111 } } 
	}
	
	option = {
		name = EVTOPTB_ZE_2100
		ai_chance = { factor = 0 }
	}
}

character_event = {
	id = ZE.2111
	desc = EVTDESC_ZE_2101
	picture = GFX_evt_guardian
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	trigger = { 
		NOT = { religion = event_target:target_educator }
	}
	
	option = {
		name = EVTOPTA_ZE_2101
		ai_chance = { factor = 100 }
		religion = event_target:target_educator
		hidden_tooltip = {
			if = {
				limit = {
					NOT = { liege = { character = event_target:target_educator } }
				}
				liege = { character_event = { id = ZE.2112 } }
			}
		}
	}
	
	option = {
		name = EVTOPTB_ZE_2101
		ai_chance = { factor = 0 }
		prestige = -5
	}
}

character_event = {
	id = ZE.2112
	desc = EVTDESC_ZE_2102
	picture = GFX_evt_library
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ZE_2102
		tooltip = {
			FROM = {
				religion = FROMFROM
			}
		}
	}
}

# Heritage focus - Child adopts Educators Culture
character_event = {
	id = ZE.2120
	desc = EVTDESC_ZE_2120
	picture = GFX_evt_guardian
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { culture = FROM }
	}
	
	immediate = {
		save_event_target_as = target_educator
		FROM = { save_event_target_as = target_child }
	}
	
	option = {
		name = EVTOPTA_ZE_2120
		ai_chance = { factor = 100 }
		tooltip = {
			reverse_culture = event_target:target_child
		}
		event_target:target_child = { character_event = { id = ZE.2121 } }
	}
	
	option = {
		name = EVTOPTB_ZE_2120
		ai_chance = { factor = 0 }
	}
}

character_event = {
	id = ZE.2121
	desc = EVTDESC_ZE_2121
	picture = GFX_evt_guardian
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	trigger = { 
		NOT = { culture = event_target:target_educator }
	}
	
	option = {
		name = EVTOPTA_ZE_2121
		ai_chance = { factor = 100 }
		culture = event_target:target_educator
		hidden_tooltip = {
			if = {
				limit = {
					NOT = { liege = { character = event_target:educator } }
				}
				liege = { character_event = { id = ZE.2122 } }
			}
		}
	}
	
	option = {
		name = EVTOPTB_ZE_2121
		ai_chance = { factor = 0 }
		prestige = -5
	}
}

character_event = {
	id = ZE.2122
	desc = EVTDESC_ZE_2122
	picture = GFX_evt_noble_in_castle
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes

	option = {
		name = EVTOPTA_ZE_2122
		tooltip = {
			FROM = {
				culture = FROMFROM
			}
		}
	}
}

# Fired from targeted decision to ask allowance to swap wards culture/religion
letter_event = {
	id = ZE.2130
	desc = EVTDESC_ZE_2130
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	trigger = {
		FROM = {
			host = {
				character = FROMFROM
			}
		}
	}
	
	immediate = {
		save_event_target_as = target_liege
		FROM = { save_event_target_as = target_ward }
		FROMFROM = { save_event_target_as = target_guardian }
	}
	
	option = {
		name = EVTOPTA_ZE_2130
		ai_chance = {
			factor = 100	# AI always accepts
		}
		
		tooltip = {
			event_target:target_ward = {
				set_focus = focus_ch_heritage
			}
		}
		hidden_tooltip = {
			event_target:target_guardian = {
				letter_event = { id = ZE.2131 }
			}
		}
	}
	
	option = {
		name = EVTOPTB_ZE_2130
		ai_chance = {
			factor = 0
		}
		if = {
			limit = {
				opinion = {
					who = event_target:target_guardian
					value = 25
				}
			}
			tooltip = {
				reverse_opinion = {
					who = event_target:target_guardian
					modifier = opinion_insulted
					years = 2
				}
			}
		}
		hidden_tooltip = {
			event_target:target_guardian = {
				letter_event = { id = ZE.2132 }
			}
		}
	}
}

letter_event = {
	id = ZE.2131
	desc = EVTDESC_ZE_2131
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_ZE_2131
		event_target:target_ward = {
			set_focus = focus_ch_heritage
		}
	}
}

letter_event = {
	id = ZE.2132
	desc = {
		text = EVTDESCA_ZE_2132
		trigger = {
			has_character_flag = ZE_2132_DIPLOMATIC_RESPONSE
		}
	}
	desc = {
		text = EVTDESCB_ZE_2132
		trigger = {
			has_character_flag = ZE_2132_OFFENDED_RESPONSE
		}
	}
	border = GFX_event_letter_frame_diplomacy
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				reverse_opinion = {
					who = event_target:target_liege
					value = 25
				}
			}
			set_character_flag = ZE_2132_DIPLOMATIC_RESPONSE
			break = yes
		}
		set_character_flag = ZE_2132_OFFENDED_RESPONSE
	}
	
	option = {
		name = EVTOPTA_ZE_2132
		trigger = {
			has_character_flag = ZE_2132_DIPLOMATIC_RESPONSE
		}
		clr_character_flag = ZE_2132_DIPLOMATIC_RESPONSE
		clr_character_flag = ZE_2132_OFFENDED_RESPONSE
	}
	
	option = {
		name = EVTOPTB_ZE_2132
		trigger = {
			has_character_flag = ZE_2132_OFFENDED_RESPONSE
		}
		opinion = {
			who = event_target:target_liege
			modifier = opinion_insulted
			years = 2
		}
		clr_character_flag = ZE_2132_DIPLOMATIC_RESPONSE
		clr_character_flag = ZE_2132_OFFENDED_RESPONSE
	}
}