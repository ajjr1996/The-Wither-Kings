namespace = witcher
################################################
# Witcher moving around
################################################
# Witcher  - Ask ask the liege permision to leave his court
character_event = {
	id = witcher.1
	desc = EVTDESCwitcher.1
	picture = GFX_evt_lunatic
	
	ai = yes
	min_age = 15
	capable_only = yes
	
	trigger = {
		trait = witcher
		in_command = no
		prisoner = no
		NOT = { has_character_flag = recent_witcher_work }
	}
	
	mean_time_to_happen = { 
		months = 12
		modifier = { factor = 2 has_minor_title = title_court_witcher }
		modifier = { factor = 2 war = yes }
		modifier = {
			factor = 1.5
			liege = { reverse_opinion = { who = ROOT value = 25 } }
		}
		modifier = {
			factor = 1.5
			liege = { reverse_opinion = { who = ROOT value = 50 } }
		}
		modifier = {
			factor = 1.5
			liege = { reverse_opinion = { who = ROOT value = 75 } }
		}
		modifier = {
			factor = 3
			liege = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_asked_to_stay } }
		}
		modifier = {
			factor = 0.5
			liege = { any_demesne_province = { NOT= { has_province_modifier = monster_infestation } } }
		}
		modifier = {
			factor = 0.5
			any_playable_ruler = { has_character_flag = invited_witcher }
		}
		# other honorary titles
		# any council position
	}
	
	option = {
		name = EVTOPTAwitcher.1
		liege = { character_event = { id = witcher.2 } }
	}
}
# Liege - The witcher has informed you of his desire to leave your court
character_event = {
	id = witcher.2
	desc = EVTDESCwitcher.2 
	picture = GFX_evt_lunatic
	
	is_triggered_only = yes
	
	option = { # Convince the witcher to stay
		name = EVTOPTAwitcher.2
		FROM = { character_event = { id = witcher.3 } }
	}
	option = { # Bribe the witcher to stay
		name = EVTOPTBwitcher.2
		FROM = { character_event = { id = witcher.4 } }
		transfer_scaled_wealth = {
			to = FROM
			value = 0.20
		}
	}
	option = { # Let him leave
		name = EVTOPTCwitcher.2
		FROM = { character_event = { id = witcher.5 } }
		
	}
}
# Witcher - Your liege wishes you to stay
character_event = {
	id = witcher.3
	desc = EVTDESCwitcher.3
	picture = GFX_evt_lunatic
	
	ai = yes
	is_triggered_only = yes
	
	option = { # Stay
		name = EVTOPTAwitcher.3
		ai_chance = {
			factor = 1
			modifier = { factor = 2 trait = content }
			modifier = { factor = 2 trait = slothful }
			modifier = { factor = 2 trait = patient }
			modifier = { factor = 2 has_opinion_modifier = { who = FROM modifier = opinion_friend } }
		}
		opinion = {
			who = FROM
			modifier = opinion_asked_to_stay
			months = 12
			hidden = yes
		}
		FROM = { character_event = { id = witcher.6 days = 3 } }
	}
	option = { # Leave
		name = EVTOPTBwitcher.3
		ai_chance = {
			factor = 2
		}
		character_event = { id = witcher.5 days = 3 }
	}
}
# Witcher - Your liege offers a bribe if you stay
character_event = {
	id = witcher.4
	desc = EVTDESCwitcher.4
	picture = GFX_evt_lunatic
	
	ai = yes
	is_triggered_only = yes
	
	option = { # Stay
		name = EVTOPTAwitcher.4
		ai_chance = {
			factor = 1
			modifier = { factor = 2 trait = greedy }
			modifier = { factor = 2 trait = content }
			modifier = { factor = 2 trait = slothful }
			modifier = { factor = 2 trait = patient }
			modifier = { factor = 2 has_opinion_modifier = { who = FROM modifier = opinion_friend } }
		}
		opinion = {
			who = FROM
			modifier = opinion_asked_to_stay
			months = 12
			hidden = yes
		}
		FROM = { character_event = { id = witcher.7 days = 3 } }
	}
	option = { # Leave
		ai_chance = {
			factor = 2
		}
		name = EVTOPTBwitcher.5
		character_event = { id = witcher.5 days = 3 }
	}
}
# Witcher - Leave to ...
character_event = {
	id = witcher.5
	desc = EVTDESCwitcher.5
	picture = GFX_evt_lunatic
	
	ai = yes
	is_triggered_only = yes
	
	immediate = {
		liege = { character_event = { id = witcher.8 } }
	}
	
	option = { # ... different court in same realm
		name = EVTOPTAwitcher.5
		trigger = {
			any_realm_lord = {
				is_landed = yes
				any_demesne_province = { has_province_modifier = monster_infestation }
				any_courtier = { NOT = { character = FROM trait = witcher } }
			}
		}
		random_realm_lord = {
			limit = {
				is_landed = yes
				any_demesne_province = { has_province_modifier = monster_infestation }
				any_courtier = { NOT = { character = FROM trait = witcher } }
			}
			reverse_banish = ROOT
			character_event = { id = witcher.9 }
		}
		ai_chance = { factor = 10 }
	}
	option = { # ... different realm
		name = EVTOPTBwitcher.5
		top_liege = {
			random_realm_province = {
				limit = { 
					any_neighbor_province = { 
						owner = { 
							NOT = { same_realm = ROOT }
							any_courtier = { NOT = { character = FROM trait = witcher } }
						}
					}
				}
				random_neighbor_province = {
					limit = { 
						owner = { 
							NOT = { same_realm = ROOT }
							any_courtier = { NOT = { character = FROM trait = witcher } }
						}
					}
					owner = {
						reverse_banish = ROOT
						character_event = { id = witcher.9 }
					}
				}
			}
		}
		ai_chance = { factor = 1 }
	}
	option = { # ... the court of a ruler who invited witcher
		name = EVTOPTCwitcher.5
		trigger = {
			any_playable_ruler = { has_character_flag = invited_witcher }
		}
		random_playable_ruler = {
			limit = {
				has_character_flag = invited_witcher
				any_courtier = { NOT = { character = FROM trait = witcher } }
			}
			reverse_banish = ROOT
			character_event = { id = witcher.9 }
		}
		ai_chance = { factor = 100 }
	}
}
# Liege informed - The witcher stayed
character_event = { 
	id = witcher.6
	desc = EVTDESCwitcher.6
	picture = GFX_evt_lunatic
	
	is_triggered_only = yes
	
	option = {
		name = OK
	}
}
# Liege informed - The witcher took the money and stayed
character_event = {
	id = witcher.7
	desc = EVTDESCwitcher.7
	picture = GFX_evt_lunatic
	
	is_triggered_only = yes
	
	option = {
		name = OK
	}
}
# Liege informed - The witcher left your court to seek employment elsewhere
character_event = {
	id = witcher.8
	desc = EVTDESCwitcher.8
	picture = GFX_evt_lunatic
	
	is_triggered_only = yes
	
	option = {
		name = OK
	}
}
# Liege - A witcher has arrived in your court
character_event = {
	id = witcher.9
	desc = EVTDESCwitcher.9
	picture = GFX_evt_lunatic
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTAwitcher.9 # OK
		clr_character_flag = invited_witcher
	}
	option = {
		name = EVTOPTBwitcher.9 # I have no need for the witcher
		trigger = { NOT = { has_character_flag = invited_witcher } }
		FROM = { character_event = { id = witcher.5 } }
	}
}