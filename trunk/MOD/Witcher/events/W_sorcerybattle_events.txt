#############################################
#
# Battle Events
#
# Event list:
# 1. battle.1 - Battle Nilfgaard University
# 
#
#############################################

namespace = sorcbattle

#Acknowledge battle and ping back to player
character_event = {
	id = sorcbattle.1
	desc = EVTDESCsorcbattle.1 
	picture = GFX_evt_melee

	is_triggered_only = yes

	option = {
		name = EVTOPTAsorcbattle.1 
		FROM = {
			character_event = { id = sorcbattle.2 } #Start Battle
		}
	}
}
character_event = {
	id = sorcbattle.100
	desc = EVTDESCsorcbattle.100 
	picture = GFX_evt_melee

	is_triggered_only = yes

	option = {
		name = EVTOPTAsorcbattle.100
		FROM = {
			character_event = { id = sorcbattle.7 } #Start Battle2
		}
	}
}
#Battle Main Menu 1
character_event = {
	id = sorcbattle.2
	desc = EVTDESCsorcbattle.2
	picture = GFX_evt_melee
	
	is_triggered_only = yes
	
	only_playable = yes

	option = {
		name = EVTOPTAsorcbattle.2 #Pay lots of money
		scaled_wealth = -2.0
		character_event = { id = sorcery.23 }
	}	
	option = {
		name = EVTOPTBsorcbattle.2 #Fight
		tooltip_info = martial
		hidden_tooltip = {
			random_list = {
				50 = {
					modifier = {
						factor = 3
						trait = dueler
					}
					modifier = {
						factor = 1.5
						attribute_diff = {
							character = FROM
							attribute = martial
							value = 3
						}
					}
					modifier = {
						factor = 1.5
						attribute_diff = {
							character = FROM
							attribute = martial
							value = 5
						}
					}
					modifier = {
						factor = 1.5
						attribute_diff = {
							character = FROM
							attribute = martial
							value = 7
						}
					}
					modifier = {
						factor = 1.5
						attribute_diff = {
							character = FROM
							attribute = martial
							value = 9
						}
					}
					character_event = { id = sorcbattle.3 } #Battle Won
				}
				50 = {
					modifier = {
						factor = 3
						FROM = { trait = dueler }
					}
					modifier = {
						factor = 1.5
						FROM = {
							attribute_diff = {
								character = ROOT
								attribute = martial
								value = 3
							}
						}	
					}
					modifier = {
						factor = 1.5
						FROM = {
							attribute_diff = {
								character = ROOT
								attribute = martial
								value = 5
							}
						}
					}
					modifier = {
						factor = 1.5
						FROM = {
							attribute_diff = {
								character = ROOT
								attribute = martial
								value = 7
							}
						}
					}
					modifier = {
						factor = 1.5
						FROM = {
							attribute_diff = {
								character = ROOT
								attribute = martial
								value = 9
							}
						}
					}
					character_event = { id = sorcbattle.4 } #Wounded
				}
			}
		}
	}
	option = {
		name = EVTOPTCsorcbattle.2
		tooltip_info = intrigue
		hidden_tooltip = {
			random_list = {
				50 = {
					modifier = {
						factor = 3
						trait = schemer
					}
					modifier = {
						factor = 1.5
						attribute_diff = {
							character = FROM
							attribute = intrigue
							value = 3
						}
					}
					modifier = {
						factor = 1.5
						attribute_diff = {
							character = FROM
							attribute = intrigue
							value = 5
						}
					}
					modifier = {
						factor = 1.5
						attribute_diff = {
							character = FROM
							attribute = intrigue
							value = 7
						}
					}
					modifier = {
						factor = 1.5
						attribute_diff = {
							character = FROM
							attribute = intrigue
							value = 9
						}
					}
					character_event = { id = sorcery.221 } #Runs away
				}
				50 = {
					modifier = {
						factor = 3
						FROM = { trait = schemer }
					}
					modifier = {
						factor = 1.5
						FROM = {
							attribute_diff = {
								character = ROOT
								attribute = intrigue
								value = 3
							}
						}	
					}
					modifier = {
						factor = 1.5
						FROM = {
							attribute_diff = {
								character = ROOT
								attribute = intrigue
								value = 5
							}
						}
					}
					modifier = {
						factor = 1.5
						FROM = {
							attribute_diff = {
								character = ROOT
								attribute = intrigue
								value = 7
							}
						}
					}
					modifier = {
						factor = 1.5
						FROM = {
							attribute_diff = {
								character = ROOT
								attribute = intrigue
								value = 9
							}
						}
					}
					character_event = { id = sorcbattle.6 } #fails to run
				}
			}
		}
	}
	option = {
		name = EVTOPTDsorcbattle.2
		tooltip_info = diplomacy
		hidden_tooltip = {
			random_list = {
				50 = {
					modifier = {
						factor = 3
						trait = socializer
					}
					modifier = {
						factor = 1.5
						attribute_diff = {
							character = FROM
							attribute = diplomacy
							value = 3
						}
					}
					modifier = {
						factor = 1.5
						attribute_diff = {
							character = FROM
							attribute = diplomacy
							value = 5
						}
					}
					modifier = {
						factor = 1.5
						attribute_diff = {
							character = FROM
							attribute = diplomacy
							value = 7
						}
					}
					modifier = {
						factor = 1.5
						attribute_diff = {
							character = FROM
							attribute = diplomacy
							value = 9
						}
					}
					character_event = { id = sorcbattle.700 } #Gets better terms of surrender
				}
				50 = {
					modifier = {
						factor = 3
						FROM = { trait = socializer }
					}
					modifier = {
						factor = 1.5
						FROM = {
							attribute_diff = {
								character = ROOT
								attribute = diplomacy
								value = 3
							}
						}	
					}
					modifier = {
						factor = 1.5
						FROM = {
							attribute_diff = {
								character = ROOT
								attribute = diplomacy
								value = 5
							}
						}
					}
					modifier = {
						factor = 1.5
						FROM = {
							attribute_diff = {
								character = ROOT
								attribute = diplomacy
								value = 7
							}
						}
					}
					modifier = {
						factor = 1.5
						FROM = {
							attribute_diff = {
								character = ROOT
								attribute = diplomacy
								value = 9
							}
						}
					}
					character_event = { id = sorcbattle.800 } #Fails to get better terms of surrender
				}
			}
		}
	}
}
#Fight won
character_event = {
	id = sorcbattle.3
	desc = EVTDESCsorcbattle.3
	picture = GFX_evt_melee

	is_triggered_only = yes

	option = {
		name = EVTOPTAsorcbattle.3
		FROMFROM = {
			death = {
				death_reason = death_duel
				killer = ROOT
			}
		}
		character_event = { id = sorcery.23 days = 1 }
	}
}
#Fight Round Lost
character_event = {
	id = sorcbattle.4
	desc = EVTDESCsorcbattle.4
	picture = GFX_evt_melee

	is_triggered_Only = yes

	option = {
		name = EVTOPTAsorcbattle.4
		trigger = { trait = maimed }
		character_event = { id = sorcbattle.8 }
	}
	option = {
		name = EVTOPTBsorcbattle.4
		trigger = { trait = wounded }
		add_trait = maimed
		FROMFROM = { character_event = { id = sorcbattle.100 } }
	}
	option = {
		name = EVTOPTCsorcbattle.4
		trigger = {
			AND = { 
				NOT = { trait = wounded }
				NOT = { trait = maimed }
			}
		}
		add_trait = wounded
		FROMFROM = { character_event = { id = sorcbattle.100 } }
	}
}
#Battle Main Menu 2
character_event = {
	id = sorcbattle.7
	desc = EVTDESCsorcbattle.7
	picture = GFX_evt_melee
	
	is_triggered_only = yes
	
	only_playable = yes

	option = {
		name = EVTOPTAsorcbattle.7 #Pay lots of money
		scaled_wealth = -1.5
		character_event = { id = sorcery.23 days = 1 }
	}	
	option = {
		name = EVTOPTBsorcbattle.7 #Fight
		tooltip_info = martial
		hidden_tooltip = {
			random_list = {
				50 = {
					modifier = {
						factor = 3
						trait = dueler
					}
					modifier = {
						factor = 1.5
						attribute_diff = {
							character = FROM
							attribute = martial
							value = 3
						}
					}
					modifier = {
						factor = 1.5
						attribute_diff = {
							character = FROM
							attribute = martial
							value = 5
						}
					}
					modifier = {
						factor = 1.5
						attribute_diff = {
							character = FROM
							attribute = martial
							value = 7
						}
					}
					modifier = {
						factor = 1.5
						attribute_diff = {
							character = FROM
							attribute = martial
							value = 9
						}
					}
					character_event = { id = sorcbattle.3 } #Battle Won
				}
				50 = {
					modifier = {
						factor = 3
						FROM = { trait = dueler }
					}
					modifier = {
						factor = 1.5
						FROM = {
							attribute_diff = {
								character = ROOT
								attribute = martial
								value = 3
							}
						}	
					}
					modifier = {
						factor = 1.5
						FROM = {
							attribute_diff = {
								character = ROOT
								attribute = martial
								value = 5
							}
						}
					}
					modifier = {
						factor = 1.5
						FROM = {
							attribute_diff = {
								character = ROOT
								attribute = martial
								value = 7
							}
						}
					}
					modifier = {
						factor = 1.5
						FROM = {
							attribute_diff = {
								character = ROOT
								attribute = martial
								value = 9
							}
						}
					}
					character_event = { id = sorcbattle.4 } #Wounded
				}
			}
		}
	}
	option = {
		name = EVTOPTCsorcbattle.7
		tooltip_info = intrigue
		hidden_tooltip = {
			random_list = {
				50 = {
					modifier = {
						factor = 3
						trait = schemer
					}
					modifier = {
						factor = 1.5
						attribute_diff = {
							character = FROM
							attribute = intrigue
							value = 3
						}
					}
					modifier = {
						factor = 1.5
						attribute_diff = {
							character = FROM
							attribute = intrigue
							value = 5
						}
					}
					modifier = {
						factor = 1.5
						attribute_diff = {
							character = FROM
							attribute = intrigue
							value = 7
						}
					}
					modifier = {
						factor = 1.5
						attribute_diff = {
							character = FROM
							attribute = intrigue
							value = 9
						}
					}
					character_event = { id = sorcery.221 } #Runs away
				}
				50 = {
					modifier = {
						factor = 3
						FROM = { trait = schemer }
					}
					modifier = {
						factor = 1.5
						FROM = {
							attribute_diff = {
								character = ROOT
								attribute = intrigue
								value = 3
							}
						}	
					}
					modifier = {
						factor = 1.5
						FROM = {
							attribute_diff = {
								character = ROOT
								attribute = intrigue
								value = 5
							}
						}
					}
					modifier = {
						factor = 1.5
						FROM = {
							attribute_diff = {
								character = ROOT
								attribute = intrigue
								value = 7
							}
						}
					}
					modifier = {
						factor = 1.5
						FROM = {
							attribute_diff = {
								character = ROOT
								attribute = intrigue
								value = 9
							}
						}
					}
					character_event = { id = sorcbattle.6 } #fails to run
				}
			}
		}
	}
	option = {
		name = EVTOPTDsorcbattle.7
		tooltip_info = diplomacy
		hidden_tooltip = {
			random_list = {
				50 = {
					modifier = {
						factor = 3
						trait = socializer
					}
					modifier = {
						factor = 1.5
						attribute_diff = {
							character = FROM
							attribute = diplomacy
							value = 3
						}
					}
					modifier = {
						factor = 1.5
						attribute_diff = {
							character = FROM
							attribute = diplomacy
							value = 5
						}
					}
					modifier = {
						factor = 1.5
						attribute_diff = {
							character = FROM
							attribute = diplomacy
							value = 7
						}
					}
					modifier = {
						factor = 1.5
						attribute_diff = {
							character = FROM
							attribute = diplomacy
							value = 9
						}
					}
					character_event = { id = sorcbattle.700 } #Gets better terms of surrender
				}
				50 = {
					modifier = {
						factor = 3
						FROM = { trait = socializer }
					}
					modifier = {
						factor = 1.5
						FROM = {
							attribute_diff = {
								character = ROOT
								attribute = diplomacy
								value = 3
							}
						}	
					}
					modifier = {
						factor = 1.5
						FROM = {
							attribute_diff = {
								character = ROOT
								attribute = diplomacy
								value = 5
							}
						}
					}
					modifier = {
						factor = 1.5
						FROM = {
							attribute_diff = {
								character = ROOT
								attribute = diplomacy
								value = 7
							}
						}
					}
					modifier = {
						factor = 1.5
						FROM = {
							attribute_diff = {
								character = ROOT
								attribute = diplomacy
								value = 9
							}
						}
					}
					character_event = { id = sorcbattle.800 } #Fails to get better terms of surrender
				}
			}
		}
	}
}
#Battle run away fail
character_event = {
	id = sorcbattle.6
	desc = EVTDESCsorcbattle.6
	picture = GFX_evt_melee

	is_triggered_only = yes

	option = {
		name = EVTOPTAsorcbattle.4
		trigger = { trait = maimed }
		random = {
			chance = 60
			character_event = { id = sorcbattle.8 }
		}
		FROMFROM = { character_event = { id = sorcbattle.100 } }
	}
	option = {
		name = EVTOPTBsorcbattle.4
		trigger = { trait = wounded }
		random = { 
			chance = 40
			add_trait = maimed
		}
		FROMFROM = { character_event = { id = sorcbattle.100 } }
	}
	option = {
		name = EVTOPTCsorcbattle.4
		trigger = {
			AND = { 
				NOT = { trait = wounded }
				NOT = { trait = maimed }
			}
		}
		random = {
			chance = 20
			add_trait = wounded
		}
		FROMFROM = { character_event = { id = sorcbattle.100 } }
	}
}
#Gets better terms of surrender
character_event = {
	id = sorcbattle.700
	desc = EVTDESCsorcbattle.700
	picture = GFX_evt_knight_kneeling

	is_triggered_only = yes

	option = {
		name = EVTOPTAsorcbattle.700 #Accept
		add_trait = craven
		scaled_wealth = -1.0
	}
	option = {
		name = EVTOPTBsorcbattle.700 #I will fight!
		FROMFROM = { character_event = { id = sorcbattle.100 } }
	}
}
#Fails to get better terms of surrender
character_event = {
	id = sorcbattle.800
	desc = EVTDESCsorcbattle.800
	picture = GFX_evt_knight_kneeling

	is_triggered_only = yes

	option = {
		name = EVTOPTAsorcbattle.800 
		FROMFROM = { character_event = { id = sorcbattle.100 } } #Forced to fight
	}
}
#Battle Lost
character_event = {
	id = sorcbattle.8
	desc = EVTDESCsorcbattle.8
	picture = GFX_evt_bloody_man

	is_triggered_only = yes

	option = {
		name = EVTOPTAsorcbattle.8
		scaled_wealth = -0.5
		prestige = -300
		character_event = { id = sorcery.23 days = 1 }
	}
}

			