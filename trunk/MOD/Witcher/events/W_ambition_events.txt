namespace = ambition

################################################
# Cure infertility
################################################
# Shady merchant offers a potion to cure infertility - Start
character_event = {
	id = ambition.1
	desc = EVTDESCambition.1
	picture = GFX_evt_spymaster
	
	capable_only = yes
	
	trigger = {
		has_ambition = obj_cure_infertility
		NOT = { has_character_flag = shady_cure }
		NOT = { has_character_flag = shady_cure_failed }
		NOT = { has_character_flag = dangerous_ritual }
		NOT = { has_character_flag = experimental_potion }
		NOT = { has_character_flag = expensive_procedure }
		NOT = { has_character_flag = mecopteran_hand_bone }
	}
	
	mean_time_to_happen = {
		months = 280
	}
	
	option = {
		name = EVTOPTAambition.1
		set_character_flag = shady_cure
		scaled_wealth = -1
		character_event = { id = ambition.2 days = 3 tooltip = EVTTOOLTIPambition.2 }
	}
	option = {
		name = EVTOPTBambition.1
		set_character_flag = shady_cure_failed
	}
}
# Shady merchant offers a potion to cure infertility - Potion
character_event = {
	id = ambition.2
	desc = EVTDESCambition.2
	picture = GFX_evt_spymaster
	
	is_triggered_only = yes
	hide_from = yes
	
	capable_only = yes
	
	trigger = {
		has_ambition = obj_cure_infertility
		has_character_flag = shady_cure
	}
	
	option = {
		name = EVTOPTAambition.2
		custom_tooltip = {
			text = wait_for_effects_of_potion
			hidden_tooltip = {
				random_list = {
					30 = { character_event = { id = ambition.3 days = 3 } }
					70 = { character_event = { id = ambition.4 days = 3 } }
				}
			}
		}
	}
}
# Shady merchant offers a potion to cure infertility - Cure
character_event = {
	id = ambition.3
	desc = EVTDESCambition.3
	picture = GFX_evt_recovery
	
	is_triggered_only = yes
	hide_from = yes
	
	capable_only = yes
	
	trigger = {
		has_ambition = obj_cure_infertility
		has_character_flag = shady_cure
	}
	
	option = {
		name = EVTOPTAambition.3
		add_trait = fertile_sorcerer
		hidden_tooltip = { character_event = { id = ambition.44 } } # Clear flags
	}
}
# Shady merchant offers a potion to cure infertility - Water
character_event = {
	id = ambition.4
	desc = EVTDESCambition.4
	picture = GFX_evt_throne_room
	
	is_triggered_only = yes
	hide_from = yes
	
	capable_only = yes
	
	trigger = {
		has_ambition = obj_cure_infertility
		has_character_flag = shady_cure
	}
	
	option = {
		name = EVTOPTAambition.4
		clr_character_flag = shady_cure
		set_character_flag = shady_cure_failed
	}
}
# Cast a dangerous ritual to cure infertility - Spellbook
character_event = {
	id = ambition.10
	desc = EVTDESCambition.10
	picture = GFX_evt_library
	
	capable_only = yes
	
	trigger = {
		has_ambition = obj_cure_infertility
		NOT = { has_character_flag = shady_cure }
		NOT = { has_character_flag = dangerous_ritual }
		NOT = { has_character_flag = dangerous_ritual_failed }
		NOT = { has_character_flag = experimental_potion }
		NOT = { has_character_flag = expensive_procedure }
		NOT = { has_character_flag = mecopteran_hand_bone }
	}
	
	mean_time_to_happen = {
		months = 280
	}
	
	option = {
		name = EVTOPTAambition.10
		set_character_flag = dangerous_ritual
		custom_tooltip = {
			text = prepare_ritual
			hidden_tooltip = {
				random_list = {
					60 = { character_event = { id = ambition.11 days = 3 } }
					30 = { character_event = { id = ambition.12 days = 3 } }
					10 = { character_event = { id = ambition.13 days = 3 } }
				}
			}
		}
	}
	option = {
		name = EVTOPTBambition.10
		set_character_flag = dangerous_ritual_failed
	}
}
# Cast a dangerous ritual to cure infertility - Cure
character_event = {
	id = ambition.11
	desc = EVTDESCambition.11
	picture = GFX_evt_recovery
	
	is_triggered_only = yes
	
	trigger = {
		has_ambition = obj_cure_infertility
		has_character_flag = dangerous_ritual
	}
	
	option = {
		name = EVTOPTAambition.11
		add_trait = fertile_sorcerer
		hidden_tooltip = { character_event = { id = ambition.44 } } # Clear flags
	}
}
# Cast a dangerous ritual to cure infertility - Madness
character_event = {
	id = ambition.12
	desc = EVTDESCambition.12
	picture = GFX_evt_lunatic
	
	is_triggered_only = yes
	
	trigger = {
		has_ambition = obj_cure_infertility
		has_character_flag = dangerous_ritual
	}
	
	option = {
		name = EVTOPTAambition.12
		clr_character_flag = dangerous_ritual
		set_character_flag = dangerous_ritual_failed
		add_trait = lunatic
	}
}
# Cast a dangerous ritual to cure infertility - Possesed
character_event = {
	id = ambition.13
	desc = EVTDESCambition.13
	picture = GFX_evt_lunatic
	
	is_triggered_only = yes
	
	trigger = {
		has_ambition = obj_cure_infertility
		has_character_flag = dangerous_ritual
	}
	
	option = {
		name = EVTOPTAambition.13
		clr_character_flag = dangerous_ritual
		set_character_flag = dangerous_ritual_failed
		add_trait = possessed
	}
}
# Alchemist have concocted an experimental potion that could cure infertility - Rumor
character_event = {
	id = ambition.20
	desc = EVTDESCambition.20
	picture = GFX_evt_throne_room
	
	capable_only = yes
	
	trigger = {
		has_ambition = obj_cure_infertility
		NOT = { has_character_flag = shady_cure }
		NOT = { has_character_flag = dangerous_ritual }
		NOT = { has_character_flag = experimental_potion }
		NOT = { has_character_flag = experimental_potion_failed }
		NOT = { has_character_flag = expensive_procedure }
		NOT = { has_character_flag = mecopteran_hand_bone }
	}
	
	mean_time_to_happen = {
		months = 280
	}
	
	option = {
		name = EVTOPTAambition.20
		set_character_flag = experimental_potion
		character_event = { id = ambition.21 tooltip = EVTTOOLTIPambition.21 days = 60 random = 10 }
	}
	option = {
		name = EVTOPTBambition.20
		set_character_flag = experimental_potion_failed
	}
}
# Alchemist have concocted an experimental potion that could cure infertility - Alchemist Found
character_event = {
	id = ambition.21
	desc = EVTDESCambition.21
	picture = GFX_evt_throne_room
	
	is_triggered_only = yes
	hide_from = yes
	
	trigger = {
		has_ambition = obj_cure_infertility
		has_character_flag = experimental_potion 
	}
	
	option = {
		name = EVTOPTAambition.21
		custom_tooltip = {
			text = drink_potion
			hidden_tooltip = {
				random_list = {
					50 = { character_event = { id = ambition.22 days = 30 random = 5 } }
					50 = { character_event = { id = ambition.23 days = 3 } }
				}
			}
		}
	}
	option = {
		name = EVTOPTBambition.21
		custom_tooltip = { text =  dont_drink_potion }
		set_character_flag = experimental_potion_failed
		clr_character_flag = experimental_potion
	}
}
# Alchemist have concocted an experimental potion that could cure infertility - Potion worked
character_event = {
	id = ambition.22
	desc = EVTDESCambition.22
	picture = GFX_evt_recovery
	
	is_triggered_only = yes
	hide_from = yes
	
	trigger = {
		has_ambition = obj_cure_infertility
		has_character_flag = experimental_potion 
	}
	
	option = {
		name = EVTOPTAambition.22
		add_trait = fertile_sorcerer
		hidden_tooltip = { character_event = { id = ambition.44 } } # Clear flags
	}
}
# Alchemist have concocted an experimental potion that could cure infertility - Potion didn't work
character_event = {
	id = ambition.23
	desc = EVTDESCambition.23
	picture = GFX_evt_illness
	
	is_triggered_only = yes
	hide_from = yes
	
	trigger = {
		has_ambition = obj_cure_infertility
		has_character_flag = experimental_potion 
	}
	
	option = {
		name = EVTOPTAambition.23
		add_trait = ill
		clr_character_flag = experimental_potion
		set_character_flag = experimental_potion_failed
	}
}
# An expensive but credible procedure - Start
character_event = {
	id = ambition.30
	desc = EVTDESCambition.30
	picture = GFX_evt_throne_room
	
	capable_only = yes
	
	trigger = {
		has_ambition = obj_cure_infertility
		NOT = { has_character_flag = shady_cure }
		NOT = { has_character_flag = dangerous_ritual }
		NOT = { has_character_flag = experimental_potion }
		NOT = { has_character_flag = expensive_procedure }
		NOT = { has_character_flag = expensive_procedure_failed }
		NOT = { has_character_flag = mecopteran_hand_bone }
	}
	
	mean_time_to_happen = {
		months = 280
	}
	
	option = {
		name = EVTOPTAambition.30
		set_character_flag = expensive_procedure
		scaled_wealth = -5.0
		character_event = { id = ambition.31 days = 60 random = 10 tooltip = EVTTOOLTIPambition.31 }
	}
	option = {
		name = EVTOPTBambition.30
		set_character_flag = expensive_procedure_failed
	}
}
# An expensive but credible procedure - Cure
character_event = {
	id = ambition.31
	desc = EVTDESCambition.31
	picture = GFX_evt_recovery
	
	is_triggered_only = yes
	hide_from = yes
	
	capable_only = yes
	
	trigger = {
		has_ambition = obj_cure_infertility
		has_character_flag = expensive_procedure
	}
	
	option = {
		name = EVTOPTAambition.31
		add_trait = fertile_sorcerer
		hidden_tooltip = { character_event = { id = ambition.44 } } # Clear flags
	}
}
# Mecopteran hand bone - Start
character_event = {
	id = ambition.40
	desc = EVTDESCambition.40
	picture = GFX_evt_throne_room
	
	capable_only = yes
	
	trigger = {
		has_ambition = obj_cure_infertility
		NOT = { has_character_flag = shady_cure }
		NOT = { has_character_flag = dangerous_ritual }
		NOT = { has_character_flag = experimental_potion }
		NOT = { has_character_flag = expensive_procedure }
		NOT = { has_character_flag = mecopteran_hand_bone }
		NOT = { has_character_flag = mecopteran_hand_bone_failed }
	}
	
	mean_time_to_happen = {
		months = 280
	}
	
	option = { # Buy
		name = EVTOPTAambition.40
		set_character_flag = mecopteran_hand_bone
		scaled_wealth = -3.0
		character_event = { id = ambition.41 days = 60 random = 10 tooltip = EVTTOOLTIPambition.41 }
	}
	option = { # Gather yourself
		name = EVTOPTBambition.40
		set_character_flag = mecopteran_hand_bone
		random = { chance = 30 add_trait = wounded }
		character_event = { id = ambition.41 days = 60 random = 10 tooltip = EVTTOOLTIPambition.41 }
	}
	option = {
		name = EVTOPTCambition.40
		set_character_flag = mecopteran_hand_bone_failed
	}
}
# Mecopteran hand bone - Got bones 
character_event = {
	id = ambition.41
	desc = EVTDESCambition.41
	picture = GFX_evt_throne_room
	
	is_triggered_only = yes
	hide_from = yes
	
	trigger = {
		has_ambition = obj_cure_infertility
		has_character_flag = mecopteran_hand_bone 
	}
	
	option = {
		name = EVTOPTAambition.41
		custom_tooltip = {
			text = use_bones
			hidden_tooltip = {
				random_list = {
					30 = { character_event = { id = ambition.42 days = 3} }
					70 = { character_event = { id = ambition.43 days = 3 } }
				}
			}
		}
	}
}
# Mecopteran hand bone - Cured
character_event = {
	id = ambition.42
	desc = EVTDESCambition.42
	picture = GFX_evt_recovery
	
	is_triggered_only = yes
	hide_from = yes
	
	trigger = {
		has_ambition = obj_cure_infertility
		has_character_flag = mecopteran_hand_bone 
	}
	
	option = {
		name = EVTOPTAambition.42
		add_trait = fertile_sorcerer
		hidden_tooltip = { character_event = { id = ambition.44 } } # Clear flags
	}
}
# Mecopteran hand bone - Failed
character_event = {
	id = ambition.43
	desc = EVTDESCambition.43
	picture = GFX_evt_recovery
	
	is_triggered_only = yes
	hide_from = yes
	
	trigger = {
		has_ambition = obj_cure_infertility
		has_character_flag = mecopteran_hand_bone 
	}
	
	option = {
		name = EVTOPTAambition.43
		clr_character_flag = mecopteran_hand_bone
		set_character_flag = mecopteran_hand_bone_failed
	}
}
# Ambition succeded - Clear flags
character_event = {
	id = ambition.44
	desc = "Ccear flags"
	picture = GFX_evt_recovery
	
	is_triggered_only = yes
	hide_window = yes
	
	option = {
		name = "OK"
		clr_character_flag = shady_cure
		clr_character_flag = shady_cure_failed
		clr_character_flag = dangerous_ritual
		clr_character_flag = dangerous_ritual_failed
		clr_character_flag = experimental_potion
		clr_character_flag = experimental_potion_failed
		clr_character_flag = expensive_procedure
		clr_character_flag = expensive_procedure_failed
		clr_character_flag = mecopteran_hand_bone
		clr_character_flag = mecopteran_hand_bone_failed
	}
}

################################################
# Improve abilitites ambition for AI courtiers
################################################
# Improve martial by 1 (on_decade_pulse)
character_event = {
	id = ambition.50
	desc = "Increase martial by 1"
	picture = GFX_evt_recovery
	
	is_triggered_only = yes
	
	capable_only = yes
	
	trigger = {
		ai = yes
		is_landed = no
		has_ambition = obj_improve_martial
		prisoner = no
	}
	
	option = {
		name = "OK"
		change_martial = 1
	}
}
# Improve stewardship by 1 (on_decade_pulse)
character_event = {
	id = ambition.51
	desc = "Increase stewardship by 1"
	picture = GFX_evt_recovery
	
	is_triggered_only = yes
	
	capable_only = yes
	
	trigger = {
		ai = yes
		is_landed = no
		has_ambition = obj_improve_stewardship
		prisoner = no
	}
	
	option = {
		name = "OK"
		change_stewardship = 1
	}
}
# Improve learning by 1 (on_decade_pulse)
character_event = {
	id = ambition.52
	desc = "Increase learning by 1"
	picture = GFX_evt_recovery
	
	is_triggered_only = yes
	
	capable_only = yes
	
	trigger = {
		ai = yes
		is_landed = no
		has_ambition = obj_improve_learning
		prisoner = no
	}
	
	option = {
		name = "OK"
		change_learning = 1
	}
}
# Improve diplomacy by 1 (on_decade_pulse)
character_event = {
	id = ambition.53
	desc = "Increase diplomacy by 1"
	picture = GFX_evt_recovery
	
	is_triggered_only = yes
	
	capable_only = yes
	
	trigger = {
		ai = yes
		is_landed = no
		has_ambition = obj_improve_diplomacy
		prisoner = no
	}
	
	option = {
		name = "OK"
		change_diplomacy = 1
	}
}
# Improve intrigue by 1 (on_decade_pulse)
character_event = {
	id = ambition.54
	desc = "Increase intrigue by 1"
	picture = GFX_evt_recovery
	
	is_triggered_only = yes
	
	capable_only = yes
	
	trigger = {
		ai = yes
		is_landed = no
		has_ambition = obj_improve_intrigue
		prisoner = no
	}
	
	option = {
		name = "OK"
		change_intrigue = 1
	}
}
