namespace = plots

###########################################
# Curse a character
###########################################
# Hidden - decide which narrative event to use
character_event = {
	id = plots.1
	desc = "Decide which narrative event to use"
	picture = GFX_evt_shadowy_cabal
	
	hide_window = yes
	is_triggered_only = yes
	
	option = {
		name = "Ruler is a Spider cultist"
		trigger = {
			religion = spider
		}
		ai_chance = {
			factor = 100
			modifier = { factor = 100 has_character_flag = made_sacrifice }
		}
		character_event = { id = plots.10 }
	}
	option = {
		name = "Ruler is a witch"
		trigger = { 
			trait = witch
		}
		ai_chance = {
			factor = 500
		}
		character_event = { id = plots.20 }
	}
	option = {
		name = "Court magician is a witch"
		trigger = {
			job_mage = { trait = witch }
		}
		ai_chance = { factor = 1000 }
		character_event = { id = plots.30 }
	}
	option = {
		name = "None of the conditions is met any longer"
		ai_chance = { factor = 1 }
		character_event = { id = plots.40 }
	}
}
# Ruler is Spider cultist
character_event = {
	id = plots.10
	desc = EVTDESCplots.10
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTAplots.10
		trigger = {
			has_character_flag = made_sacrifice
		}
		clr_character_flag = made_sacrifice
		plot_target_char = { set_character_flag = cursed }
	}
	option = {
		name = EVTOPTBplots.10
		trigger = {
			NOT = { has_character_flag = made_sacrifice }
		}
		character_event = { id = plots.11 }
	}
}
# Ruler is Spider cultist - had no sacrifice
character_event = {
	id = plots.11
	desc = EVTDESCplots.11
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTAplots.11
		set_character_flag = cursed
		set_character_flag = abort_curse
	}
}
# Ruler is a witch
character_event = {
	id = plots.20
	desc = EVTDESCplots.20
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTAplots.20
		add_character_modifier = { name = drained duration = 180 }
		plot_target_char = { set_character_flag = cursed }
	}
}
# Court magician is a witch
character_event = {
	id = plots.30
	desc = EVTDESCplots.30
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTAplots.30
		job_mage = {
			add_character_modifier = { name = drained duration = 180 }
			hidden_tooltip = { character_event = { id = plots.31 } }
		}
		plot_target_char = { set_character_flag = cursed }
	}
}
# Court magician notification
character_event = {
	id = plots.31
	desc = EVTDESCmagic.31
	picture = GFX_evt_shadowy_cabal
	
	is_triggered_only = yes
	
	notification = yes
	
	trigger = {
		ai = no
	}
	
	option = {
		name = EVTOPTAplots.31
		add_character_modifier = { name = drained duration = 180 }
	}
}
# None of the conditions is met any longer
character_event = {
	id = plots.40
	desc = EVTDESCplots.40
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTAplots.40
		set_character_flag = abort_curse
	}
}

###########################################
# Charm a character
###########################################
# Hidden - decide which narrative event to use
character_event = {
	id = plots.100
	desc = "Decide which narrative event to use"
	picture = GFX_evt_holy_emperor
	
	hide_window = yes
	is_triggered_only = yes
	
	
	option = {
		name = "Court magician is a sorcerer"
		trigger = {
			job_mage = { trait = sorcerer }
		}
		ai_chance = { factor = 1000 }
		character_event = { id = plots.101 }
	}
	option = {
		name = "Ruler is a sorcerer"
		trigger = { 
			trait = sorcerer
		}
		ai_chance = {
			factor = 500
		}
		character_event = { id = plots.102 }
	}
	option = {
		name = "An always available option just in case"
		ai_chance = {
			factor = 1
		}
	}
}
# Charm spell - court magician
character_event = {
	id = plots.101
	desc = EVTDESCplots.101
	picture = GFX_evt_holy_emperor
	
	trigger = {
		has_plot = plot_charm_character
		job_mage = { trait = sorcerer }
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = EVTOPTAplots.101
		job_mage = {
			add_character_modifier = { name = drained duration = 180 }
			hidden_tooltip = { character_event = { id = plots.103 } }
		}
		plot_target_char = { opinion = { modifier = opinion_charmed who = ROOT } }
	}
}
# Charm spell - character
character_event = {
	id = plots.102
	desc = EVTDESCplots.102
	picture = GFX_evt_holy_emperor
	
	trigger = {
		has_plot = plot_charm_character
		trait = sorcerer
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = EVTOPTAplots.102
		add_character_modifier = { name = drained duration = 180 }
		plot_target_char = { opinion = { modifier = opinion_charmed who = ROOT } }
	}
}
# Charm spell - court magician notification
character_event = {
	id = plots.103
	desc = EVTDESCmagic.103
	picture = GFX_evt_holy_emperor
	
	is_triggered_only = yes
	
	notification = yes
	
	trigger = {
		ai = no
	}
	
	option = {
		name = EVTOPTAplots.103
		add_character_modifier = { name = drained duration = 180 }
	}
}

###########################################
# Heal a character
###########################################
# Hidden - decide which narrative event to use
character_event = {
	id = plots.110
	desc = "Decide which narrative event to use"
	picture = GFX_evt_recovery
	
	hide_window = yes
	is_triggered_only = yes
	
	
	option = {
		name = "Court magician is a sorcerer or witch"
		trigger = {
			job_mage = {
				OR = {
					trait = sorcerer
					trait = witch
				}
			}
		}
		ai_chance = { factor = 1000 }
		character_event = { id = plots.111 }
	}
	option = {
		name = "Ruler is a sorcerer or witch"
		trigger = { 
			OR = {
				trait = sorcerer
				trait = witch
			}
		}
		ai_chance = {
			factor = 500
		}
		character_event = { id = plots.112 }
	}
	option = {
		name = "An always available option just in case"
		ai_chance = {
			factor = 1
		}
	}
}
# Heal spell - court magician
character_event = {
	id = plots.111
	desc = EVTDESCplots.111
	picture = GFX_evt_recovery
	
	trigger = {
		has_plot = plot_heal_character
		job_mage = {
			OR = {
				trait = witch
				trait = sorcerer
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = EVTOPTAplots.111
		job_mage = {
			add_character_modifier = { name = drained duration = 180 }
			hidden_tooltip = { character_event = { id = plots.113 } }
		}
		plot_target_char = {
			if = { limit = { trait = ill } remove_trait = ill }
			if = { limit = { trait = pneumonic } remove_trait = pneumonic }
			if = { limit = { trait = syphilitic } remove_trait = syphilitic }
			if = { limit = { trait = leper } remove_trait = leper }
			if = { limit = { trait = has_tuberculosis } remove_trait = has_tuberculosis }
			if = { limit = { trait = has_typhoid_fever } remove_trait = has_typhoid_fever }
			if = { limit = { trait = has_typhus } remove_trait = has_typhus }
			if = { limit = { trait = has_bubonic_plague } remove_trait = has_bubonic_plague }
			if = { limit = { trait = has_measles } remove_trait = has_measles }
			if = { limit = { trait = has_small_pox } remove_trait = has_small_pox }
			if = { limit = { trait = has_aztec_disease } remove_trait = has_aztec_disease }
			if = { limit = { trait = wounded } remove_trait = wounded }
			if = { limit = { trait = maimed } remove_trait = maimed }
			if = { limit = { trait = infirm } remove_trait = infirm }
			if = { limit = { trait = blinded } remove_trait = blinded }
			if = { limit = { trait = eunuch } remove_trait = eunuch }
			opinion = { modifier = opinion_grateful who = ROOT }
		}
	}
}
# Heal spell - character
character_event = {
	id = plots.112
	desc = EVTDESCplots.112
	picture = GFX_evt_recovery
	
	trigger = {
		has_plot = plot_heal_character
		OR = {
			trait = witch
			trait = sorcerer
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = EVTOPTAplots.112
		add_character_modifier = { name = drained duration = 180 }
		plot_target_char = {
			if = { limit = { trait = ill } remove_trait = ill }
			if = { limit = { trait = pneumonic } remove_trait = pneumonic }
			if = { limit = { trait = syphilitic } remove_trait = syphilitic }
			if = { limit = { trait = leper } remove_trait = leper }
			if = { limit = { trait = has_tuberculosis } remove_trait = has_tuberculosis }
			if = { limit = { trait = has_typhoid_fever } remove_trait = has_typhoid_fever }
			if = { limit = { trait = has_typhus } remove_trait = has_typhus }
			if = { limit = { trait = has_bubonic_plague } remove_trait = has_bubonic_plague }
			if = { limit = { trait = has_measles } remove_trait = has_measles }
			if = { limit = { trait = has_small_pox } remove_trait = has_small_pox }
			if = { limit = { trait = has_aztec_disease } remove_trait = has_aztec_disease }
			if = { limit = { trait = wounded } remove_trait = wounded }
			if = { limit = { trait = maimed } remove_trait = maimed }
			if = { limit = { trait = infirm } remove_trait = infirm }
			if = { limit = { trait = blinded } remove_trait = blinded }
			if = { limit = { trait = eunuch } remove_trait = eunuch }
			opinion = { modifier = opinion_grateful who = ROOT }
		}
	}
}
# Heal spell - court magician notification
character_event = {
	id = plots.113
	desc = EVTDESCmagic.113
	picture = GFX_evt_recovery
	
	is_triggered_only = yes
	
	notification = yes
	
	trigger = {
		ai = no
	}
	
	option = {
		name = EVTOPTAplots.113
		add_character_modifier = { name = drained duration = 180 }
	}
}

###########################################
# Druid heal a character
###########################################
# Hidden - decide which narrative event to use
character_event = {
	id = plots.120
	desc = "Decide which narrative event to use"
	picture = GFX_evt_recovery
	
	hide_window = yes
	is_triggered_only = yes
	
	
	option = {
		name = "Court magician is a druid"
		trigger = {
			job_mage = { trait = druid }
		}
		ai_chance = { factor = 1000 }
		character_event = { id = plots.121 }
	}
	option = {
		name = "Ruler is a druid"
		trigger = { 
			trait = druid
		}
		ai_chance = {
			factor = 500
		}
		character_event = { id = plots.122 }
	}
	option = {
		name = "An always available option just in case"
		ai_chance = {
			factor = 1
		}
	}
}
# Druid heal spell - court magician
character_event = {
	id = plots.121
	desc = EVTDESCplots.121
	picture = GFX_evt_recovery
	
	trigger = {
		has_plot = plot_druid_heal_character
		job_mage = { trait = druid }
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = EVTOPTAplots.121
		job_mage = {
			add_character_modifier = { name = drained duration = 180 }
			hidden_tooltip = { character_event = { id = plots.123 } }
		}
		plot_target_char = {
			if = { limit = { trait = ill } remove_trait = ill }
			if = { limit = { trait = maimed } remove_trait = maimed }
			if = { limit = { trait = stressed } remove_trait = stressed }
			if = { limit = { trait = depressed } remove_trait = depressed }
			opinion = { modifier = opinion_grateful who = ROOT }
		}
	}
}
# Druid heal spell - character
character_event = {
	id = plots.122
	desc = EVTDESCplots.122
	picture = GFX_evt_recovery
	
	trigger = {
		has_plot = plot_druid_heal_character
		trait = druid
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = EVTOPTAplots.122
		add_character_modifier = { name = drained duration = 180 }
		plot_target_char = {
			if = { limit = { trait = ill } remove_trait = ill }
			if = { limit = { trait = maimed } remove_trait = maimed }
			if = { limit = { trait = stressed } remove_trait = stressed }
			if = { limit = { trait = depressed } remove_trait = depressed }
			opinion = { modifier =  opinion_grateful who = ROOT }
		}
	}
}
# Druid heal spell - court magician notification
character_event = {
	id = plots.123
	desc = EVTDESCmagic.123
	picture = GFX_evt_recovery
	
	is_triggered_only = yes
	
	notification = yes
	
	trigger = {
		ai = no
	}
	
	option = {
		name = EVTOPTAplots.123
		add_character_modifier = { name = drained duration = 180 }
	}
}
