namespace = plots

###########################################
# Charm a character
###########################################
# Hidden - decide who casts the spell
character_event = {
	id = plots.1
	desc = "Decide who casts the spell"
	picture = GFX_evt_holy_emperor
	
	hide_window = yes
	is_triggered_only = yes
	
	option = {
		name = "Court magician is a sorcerer"
		trigger = {
			job_mage = {
				OR = {
					trait = sorcerer
					trait = source
				}
			}
		}
		ai_chance = { factor = 1000 }
		character_event = { id = plots.2 }
	}
	option = {
		name = "Ruler is a sorcerer"
		trigger = {
			OR = {
				trait = sorcerer
				trait = source
			}
		}
		ai_chance = { factor = 1 }
		character_event = { id = plots.3 }
	}
	option = {
		name = "An always available option just in case"
		ai_chance = { factor = 0 }
	}
}
# Court mage casts charm spell
character_event = {
	id = plots.2
	desc = EVTDESCplots.2
	picture = GFX_evt_holy_emperor
	
	trigger = {
		has_plot = plot_charm_character
		job_mage = { trait = sorcerer }
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = EVTOPTAplots.2
		job_mage = {
			add_character_modifier = { name = drained duration = 180 }
			hidden_tooltip = { character_event = { id = plots.4 } }
		}
		plot_target_char = { opinion = { modifier = opinion_charmed who = ROOT } }
	}
}
# You cast charm spell
character_event = {
	id = plots.3
	desc = EVTDESCplots.3
	picture = GFX_evt_holy_emperor
	
	trigger = {
		has_plot = plot_charm_character
		trait = sorcerer
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = EVTOPTAplots.3
		add_character_modifier = { name = drained duration = 180 }
		plot_target_char = { opinion = { modifier = opinion_charmed who = ROOT } }
	}
}
# Court mage notification
character_event = {
	id = plots.4
	desc = EVTDESCplots.4
	picture = GFX_evt_holy_emperor
	
	is_triggered_only = yes
	
	notification = yes
	
	trigger = {
		ai = no
	}
	
	option = {
		name = EVTOPTAplots.4
		add_character_modifier = { name = drained duration = 180 }
	}
}

###########################################
# Heal a character
###########################################
# Hidden -  decide who casts the spell
character_event = {
	id = plots.10
	desc = "Decide who casts the spell"
	picture = GFX_evt_recovery
	
	hide_window = yes
	is_triggered_only = yes
	
	option = {
		name = "Court magician is a sorcerer"
		trigger = {
			job_mage = {
				OR = {
					trait = sorcerer
					trait = source
				}
			}
		}
		ai_chance = { factor = 1000 }
		character_event = { id = plots.11 }
	}
	option = {
		name = "Ruler is a sorcerer"
		trigger = {
			OR = {
				trait = sorcerer
				trait = source
			}
		}
		ai_chance = { factor = 1 }
		character_event = { id = plots.12 }
	}
	option = {
		name = "An always available option just in case"
		ai_chance = { factor = 0 }
	}
}
# Court mage casts heal spell
character_event = {
	id = plots.11
	desc = EVTDESCplots.11
	picture = GFX_evt_recovery
	
	trigger = {
		has_plot = plot_heal_character
		job_mage = {
			trait = sorcerer
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = EVTOPTAplots.11
		job_mage = {
			add_character_modifier = { name = drained duration = 180 }
			hidden_tooltip = { character_event = { id = plots.13 } }
		}
		plot_target_char = {
			if = { limit = { trait = ill } remove_trait = ill }
			if = { limit = { trait = pneumonic } remove_trait = pneumonic }
			if = { limit = { trait = syphilitic } remove_trait = syphilitic }
			if = { limit = { trait = leper } remove_trait = leper }
			if = { limit = { trait = has_tuberculosis } remove_trait = has_tuberculosis }
			if = { limit = { trait = has_typhoid_fever } remove_trait = has_typhoid_fever }
			if = { limit = { trait = has_typhus } remove_trait = has_typhus }
			if = { limit = { trait = has_bubonic_plague } remove_trait = has_bubonic_plague }
			if = { limit = { trait = has_measles } remove_trait = has_measles }
			if = { limit = { trait = has_small_pox } remove_trait = has_small_pox }
			if = { limit = { trait = has_aztec_disease } remove_trait = has_aztec_disease }
			if = { limit = { trait = wounded } remove_trait = wounded }
			if = { limit = { trait = maimed } remove_trait = maimed }
			if = { limit = { trait = infirm } remove_trait = infirm }
			if = { limit = { trait = blinded } remove_trait = blinded }
			if = { limit = { trait = eunuch } remove_trait = eunuch }
			opinion = { modifier = opinion_grateful who = ROOT }
		}
	}
}
# You cast heal spell
character_event = {
	id = plots.12
	desc = EVTDESCplots.12
	picture = GFX_evt_recovery
	
	trigger = {
		has_plot = plot_heal_character
		trait = sorcerer
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = EVTOPTAplots.12
		add_character_modifier = { name = drained duration = 180 }
		plot_target_char = {
			if = { limit = { trait = ill } remove_trait = ill }
			if = { limit = { trait = pneumonic } remove_trait = pneumonic }
			if = { limit = { trait = syphilitic } remove_trait = syphilitic }
			if = { limit = { trait = leper } remove_trait = leper }
			if = { limit = { trait = has_tuberculosis } remove_trait = has_tuberculosis }
			if = { limit = { trait = has_typhoid_fever } remove_trait = has_typhoid_fever }
			if = { limit = { trait = has_typhus } remove_trait = has_typhus }
			if = { limit = { trait = has_bubonic_plague } remove_trait = has_bubonic_plague }
			if = { limit = { trait = has_measles } remove_trait = has_measles }
			if = { limit = { trait = has_small_pox } remove_trait = has_small_pox }
			if = { limit = { trait = has_aztec_disease } remove_trait = has_aztec_disease }
			if = { limit = { trait = wounded } remove_trait = wounded }
			if = { limit = { trait = maimed } remove_trait = maimed }
			if = { limit = { trait = infirm } remove_trait = infirm }
			if = { limit = { trait = blinded } remove_trait = blinded }
			if = { limit = { trait = eunuch } remove_trait = eunuch }
			opinion = { modifier = opinion_grateful who = ROOT }
		}
	}
}
# Court mage notification
character_event = {
	id = plots.13
	desc = EVTDESCplots.13
	picture = GFX_evt_recovery
	
	is_triggered_only = yes
	
	notification = yes
	
	trigger = {
		ai = no
	}
	
	option = {
		name = EVTOPTAplots.13
		add_character_modifier = { name = drained duration = 180 }
	}
}

###########################################
# Protect a character
###########################################
# Hidden - decide who casts the spell
character_event = {
	id = plots.20
	desc = "Decide who casts the spell"
	picture = GFX_evt_recovery
	
	hide_window = yes
	is_triggered_only = yes
	
	option = {
		name = "Court magician is a sorcerer"
		trigger = {
				job_mage = {
				OR = {
					trait = sorcerer
					trait = source
				}
			}
		}
		ai_chance = { factor = 1000 }
		character_event = { id = plots.21 }
	}
	option = {
		name = "Ruler is a sorcerer"
		trigger = {
			OR = {
				trait = sorcerer
				trait = source
			}
		}
		ai_chance = { factor = 1 }
		character_event = { id = plots.22 }
	}
	option = {
		name = "An always available option just in case"
		ai_chance = { factor = 0 }
	}
}
# Court mage casts protect spell
character_event = {
	id = plots.21
	desc = EVTDESCplots.21
	picture = GFX_evt_recovery
	
	trigger = {
		has_plot = plot_protect_character
		job_mage = {
			OR = {
				trait = sorcerer
				trait = source
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = EVTOPTAplots.21
		job_mage = {
			add_character_modifier = { name = drained duration = 180 }
			hidden_tooltip = { character_event = { id = plots.23 } }
		}
		plot_target_char = {
			add_character_modifier = { name = protection_spell duration = -1 }
			opinion = { modifier = opinion_grateful who = ROOT }
		}
	}
}
#  You cast protect spell
character_event = {
	id = plots.22
	desc = EVTDESCplots.22
	picture = GFX_evt_recovery
	
	trigger = {
		has_plot = plot_protect_character
		OR = {
			trait = sorcerer
			trait = source
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = EVTOPTAplots.22
		add_character_modifier = { name = drained duration = 180 }
		plot_target_char = {
			add_character_modifier = { name = protection_spell duration = -1 }
			opinion = { modifier = opinion_grateful who = ROOT }
		}
	}
}
# Court mage notification
character_event = {
	id = plots.23
	desc = EVTDESCplots.23
	picture = GFX_evt_recovery
	
	is_triggered_only = yes
	
	notification = yes
	
	trigger = {
		ai = no
	}
	
	option = {
		name = EVTOPTAplots.23
		add_character_modifier = { name = drained duration = 180 }
	}
}
