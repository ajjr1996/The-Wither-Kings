# Institute Succession by Tanistry in Liege Title
faction_succ_tanistry = {
	type = liege_titles
	
	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.
	
	# Plotter scope
	potential = {
		NOT = { culture = wilderness }
		prisoner = no
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		NOT = { trait = incapable }
		liege = { 
			is_feudal = yes 
			OR = {
				primary_title = { is_tribal_type_title = no }
				NOT = { culture = ROOT }
				NOT = { religion = ROOT }
			}
			NOT = {
				any_demesne_title = {
					temporary = yes
				}
			}
		}
		primary_title = { higher_tier_than = BARON }
		
		NOT = { in_faction = faction_succ_primogeniture }
		NOT = { in_faction = faction_succ_ultimogeniture }
		NOT = { in_faction = faction_succ_seniority }
		NOT = { in_faction = faction_succ_feudal_elective }
		NOT = { in_faction = faction_succ_gavelkind }
		
		OR = {
			# Is not affected by a Crown Law title
			NOT = {
				crownlaw_title = {
					always = yes
				}
			}
			
			# The Crown Law title holder is my liege
			crownlaw_title = {
				holder_scope = {
					ROOT = {
						liege = {
							character = PREVPREV
						}
					}
				}
			}
			
			# The Crown Law title allows vassal infighting
			crownlaw_title = {
				NOT = {
					has_law = crown_obligation_3
				}
			}
		}
		
		NOT = { has_character_modifier = faction_succ_tanistry_ultimatum_timer }
		is_vice_royalty = no
	}
	
	# Target scope
	allow = {
		holder_scope = { NOT = { culture = wilderness } }
		OR = {
			is_primary_holder_title = yes
			higher_tier_than = DUKE
		}
		NOT = { has_law = succ_tanistry }
		
		holder_scope = {
			NOT = {
				any_war = {
					war_title = ROOT
					using_cb = change_tanistry_succession_law
				}
			}
			
			NOT = {
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_leaving_faction
				}
			}
		}
	}
	
	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			NOT = { trait = incapable }
			prisoner = no
			NOT = { in_faction = faction_succ_primogeniture }
			NOT = { in_faction = faction_succ_feudal_elective }
			NOT = { in_faction = faction_succ_gavelkind }
			NOT = { in_faction = faction_succ_ultimogeniture }
			NOT = { in_faction = faction_succ_seniority }
		}		
	}
	
	# AI creation weight
	chance = {
		factor = 1
		
		modifier = {
			factor = 0.2
			FROM = { pacifist = yes }
		}
		
		modifier = {
			factor = 0
			FROM = { prisoner = yes }
		}
		
		modifier = {
			factor = 0
			holder_scope = {
				any_spouse = { character = FROM }
			}
		}
		
		modifier = {
			factor = 0
			current_heir = {
				character = FROM
			}
		}
		
		modifier = {
			factor = 0
			NOT = { would_be_heir_under_law = { who = FROM law = tanistry } }
		}
		
		modifier = {
			factor = 0
			FROM = {
				OR = {
					AND = {
						NOT = { leads_faction = faction_succ_tanistry }
						opinion = { who = LIEGE value = 50 } 
					}
					AND = {
						leads_faction = faction_succ_tanistry
						opinion = { who = LIEGE value = 75 } 
					}
				}
			}
		}
		
		modifier = {
			factor = 0
			FROM = { preparing_invasion = yes }
		}
		
		modifier = {
			factor = 0
			FROM = { 
				opinion = { who = LIEGE value = 25 } 
				NOT = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}			
			}
		}		
		
		modifier = {
			factor = 0
			FROM = {
				opinion = { who = LIEGE value = 50 } 
				OR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}				
			}
		}
		
		modifier = {
			factor = 1.5
			NOT = { FROM = { opinion = { who = LIEGE value = 0 } } }
		}
		modifier = {
			factor = 2.0
			NOT = { FROM = { opinion = { who = LIEGE value = -50 } } }
		}
		modifier = {
			factor = 4.0
			NOT = { FROM = { opinion = { who = LIEGE value = -75 } } }
		}
		modifier = {
			factor = 0.01
			FROM = { trait = content }
		}
		modifier = {
			factor = 0.01
			FROM = { trait = imbecile }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = inbred }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
		}
		modifier = {
			factor = 0.2
			FROM = { trait = slow }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = kind }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = just }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = proud }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = brave }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = envious }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = impaler }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 4.0
			FROM = { trait = ambitious }
		}
	}
	
	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 1
		
		modifier = {
			factor = 0.2
			pacifist = yes
		}			
		
		modifier = {
			factor = 0
			OR = {
				prisoner = yes
				trait = incapable
				is_adult = no
				is_landed = no
			}
		}
		
		modifier = {
			factor = 0
			FROMFROM = {
				current_heir = {
					character = ROOT
				}
			}
		}
		
		modifier = {
			factor = 0
			OR = {
				in_faction = faction_succ_feudal_elective
				in_faction = faction_succ_primogeniture
				in_faction = faction_succ_gavelkind
				in_faction = faction_succ_tanistry
				in_faction = faction_succ_ultimogeniture
			}
		}
		
		modifier = {
			factor = 0
			has_character_modifier = faction_succ_tanistry_ultimatum_timer
		}
		
		modifier = {
			factor = 0
			liege = { 
				primary_title = { is_tribal_type_title = yes }
				culture = ROOT
				religion = ROOT
			}
		}
		
		modifier = {
			factor = 0
			has_opinion_modifier = {
				who = LIEGE
				modifier = opinion_coerced_into_leaving_faction
			}
		}
		
		modifier = {
			factor = 0
			OR = {
				AND = {
					NOT = { in_faction = faction_succ_tanistry }
					opinion = { who = LIEGE value = 50 } 
				}
				AND = {
					in_faction = faction_succ_tanistry
					opinion = { who = LIEGE value = 75 } 
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		# Try to exclude people who should rather support a claimant
		modifier = {
			factor = 0
			FROM = { # Remember: the faction leader is also the person who would inherit under this law
				OR = {
					NOT = { culture = ROOT }
					NOT = { religion = ROOT }
				}
				liege = {
					any_demesne_title = {
						OR = {
							is_primary_holder_title = yes
							higher_tier_than = DUKE
						}
						ROOT = {
							primary_title = {
								de_jure_liege_or_above = PREVPREV
							}
						}
						any_claimant = {
							culture = ROOT
							religion = ROOT
						}
					}
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 1000
			has_opinion_modifier = {
				who = FROM
				modifier = opinion_coerced_into_joining_faction
			}
		}
		
		modifier = {
			factor = 0
			opinion = { who = LIEGE value = 25 } 
			NOT = {
				trait = deceitful
				trait = ambitious
				trait = envious
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}			
		}		
		
		modifier = {
			factor = 0
			opinion = { who = LIEGE value = 50 } 
			OR = {
				trait = deceitful
				trait = ambitious
				trait = envious
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}			
		}
		
		modifier = {
			factor = 0.01
			trait = content
		}
		modifier = {
			factor = 0.01
			trait = imbecile
		}
		modifier = {
			factor = 0.1
			trait = inbred
		}
		modifier = {
			factor = 0.1
			trait = craven
		}
		modifier = {
			factor = 0.2
			trait = slow
		}
		modifier = {
			factor = 0.5
			trait = kind
		}
		modifier = {
			factor = 0.5
			trait = charitable
		}
		modifier = {
			factor = 0.5
			trait = honest
		}
		modifier = {
			factor = 0.75
			trait = humble
		}
		modifier = {
			factor = 0.75
			trait = just
		}
		modifier = {
			factor = 1.5
			trait = proud
		}
		modifier = {
			factor = 1.5
			trait = brave
		}
		modifier = {
			factor = 1.5
			trait = arbitrary
		}
		modifier = {
			factor = 2.0
			trait = envious
		}
		modifier = {
			factor = 2.0
			trait = greedy
		}
		modifier = {
			factor = 2.0
			trait = impaler
		}
		modifier = {
			factor = 2.0
			trait = deceitful
		}
		modifier = {
			factor = 4.0
			trait = ambitious
		}
	}
	
	success = {
		has_law = succ_tanistry
	}
	
	abort = {
		always = no		# Factions will abort if the Potential or Allow triggers are no longer valid
	}
	
	abort_effect = {
	}
	
	effect = {
		FROM = {
			any_faction_backer = {
				faction = faction_succ_tanistry
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
		}
	}
}
# Institute Succession by Ultimogeniture
faction_succ_ultimogeniture = {
	type = liege_titles
	
	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.
	
	# Plotter scope
	potential = {
		NOT = { culture = wilderness }
		prisoner = no
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		NOT = { trait = incapable }
		liege = { 
			is_feudal = yes 
			OR = {
				primary_title = { is_tribal_type_title = no }
				NOT = { culture = ROOT }
				NOT = { religion = ROOT }
			}
			NOT = {
				any_demesne_title = {
					temporary = yes
				}
			}			
		}
		primary_title = { higher_tier_than = BARON }
		
		NOT = { in_faction = faction_succ_primogeniture }
		NOT = { in_faction = faction_succ_tanistry }
		NOT = { in_faction = faction_succ_seniority }
		NOT = { in_faction = faction_succ_feudal_elective }
		NOT = { in_faction = faction_succ_gavelkind }
		
		OR = {
			# Is not affected by a Crown Law title
			NOT = {
				crownlaw_title = {
					always = yes
				}
			}
			
			# The Crown Law title holder is my liege
			crownlaw_title = {
				holder_scope = {
					ROOT = {
						liege = {
							character = PREVPREV
						}
					}
				}
			}
			
			# The Crown Law title allows vassal infighting
			crownlaw_title = {
				NOT = {
					has_law = crown_obligation_3
				}
			}
		}
		
		NOT = { has_character_modifier = faction_succ_ultimogeniture_ultimatum_timer }
		is_vice_royalty = no
	}
	
	# Target scope
	allow = {
		holder_scope = { NOT = { culture = wilderness } }
		OR = {
			is_primary_holder_title = yes
			higher_tier_than = DUKE
		}
		NOT = { has_law = succ_ultimogeniture }
		
		holder_scope = {
			NOT = {
				any_war = {
					war_title = ROOT
					using_cb = change_ultimogeniture_succession_law
				}
			}
			
			NOT = {
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_leaving_faction
				}
			}
		}
	}
	
	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			NOT = { trait = incapable }
			prisoner = no
			NOT = { in_faction = faction_succ_seniority }
			NOT = { in_faction = faction_succ_feudal_elective }
			NOT = { in_faction = faction_succ_gavelkind }	
			NOT = { in_faction = faction_succ_primogeniture }
			NOT = { in_faction = faction_succ_tanistry }	
		}
	}
	
	# AI creation weight
	chance = {
		factor = 1
		
		modifier = {
			factor = 0.2
			FROM = { pacifist = yes }
		}		
		
		modifier = {
			factor = 0.2
		}
		
		modifier = {
			factor = 0
			FROM = { prisoner = yes }
		}
		
		modifier = {
			factor = 0
			holder_scope = {
				any_spouse = { character = FROM }
			}
		}
		
		modifier = {
			factor = 0
			current_heir = {
				character = FROM
			}
		}
		
		modifier = {
			factor = 0
			NOT = { would_be_heir_under_law = { who = FROM law = ultimogeniture } }
		}
		
		modifier = {
			factor = 0
			FROM = { preparing_invasion = yes }
		}
		
		modifier = {
			factor = 0
			FROM = {
				OR = {
					AND = {
						NOT = { leads_faction = faction_succ_ultimogeniture }
						opinion = { who = LIEGE value = 50 } 
					}
					AND = {
						leads_faction = faction_succ_ultimogeniture
						opinion = { who = LIEGE value = 75 } 
					}
				}
			}
		}
		
		modifier = {
			factor = 0
			FROM = { 
				opinion = { who = LIEGE value = 25 } 
				NOT = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}			
			}
		}		
		
		modifier = {
			factor = 0
			FROM = {
				opinion = { who = LIEGE value = 50 } 
				OR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}					
			}
		}
		
		modifier = {
			factor = 1.5
			NOT = { FROM = { opinion = { who = LIEGE value = 0 } } }
		}
		modifier = {
			factor = 2.0
			NOT = { FROM = { opinion = { who = LIEGE value = -50 } } }
		}
		modifier = {
			factor = 4.0
			NOT = { FROM = { opinion = { who = LIEGE value = -75 } } }
		}
		modifier = {
			factor = 0.01
			FROM = { trait = content }
		}
		modifier = {
			factor = 0.01
			FROM = { trait = imbecile }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = inbred }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
		}
		modifier = {
			factor = 0.2
			FROM = { trait = slow }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = kind }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.75
			FROM = { trait = just }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = proud }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = brave }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = envious }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = impaler }
		}
		modifier = {
			factor = 2.0
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 4.0
			FROM = { trait = ambitious }
		}
	}
	
	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 1

		modifier = {
			factor = 0.2
		}
		
		modifier = {
			factor = 0
			OR = {
				prisoner = yes
				trait = incapable
				is_adult = no
				is_landed = no
				preparing_invasion = yes
			}
		}
		
		modifier = {
			factor = 0
			FROMFROM = {
				current_heir = {
					character = ROOT
				}
			}
		}
		
		modifier = {
			factor = 0
			OR = {
				in_faction = faction_succ_feudal_elective
				in_faction = faction_succ_seniority
				in_faction = faction_succ_gavelkind
				in_faction = faction_succ_tanistry
				in_faction = faction_succ_primogeniture
			}
		}
		
		modifier = {
			factor = 0
			has_character_modifier = faction_succ_ultimogeniture_ultimatum_timer
		}
		
		modifier = {
			factor = 0
			liege = { 
				primary_title = { is_tribal_type_title = yes }
				culture = ROOT
				religion = ROOT
			}
		}
		
		modifier = {
			factor = 0
			has_opinion_modifier = {
				who = LIEGE
				modifier = opinion_coerced_into_leaving_faction
			}
		}
		
		modifier = {
			factor = 0
			OR = {
				AND = {
					NOT = { in_faction = faction_succ_ultimogeniture }
					opinion = { who = LIEGE value = 50 } 
				}
				AND = {
					in_faction = faction_succ_ultimogeniture
					opinion = { who = LIEGE value = 75 } 
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		# Try to exclude people who should rather support a claimant
		modifier = {
			factor = 0
			FROM = { # Remember: the faction leader is also the person who would inherit under this law
				OR = {
					NOT = { culture = ROOT }
					NOT = { religion = ROOT }
				}
				liege = {
					any_demesne_title = {
						OR = {
							is_primary_holder_title = yes
							higher_tier_than = DUKE
						}
						ROOT = {
							primary_title = {
								de_jure_liege_or_above = PREVPREV
							}
						}
						any_claimant = {
							culture = ROOT
							religion = ROOT
						}
					}
				}
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}
		}
		
		modifier = {
			factor = 0
			opinion = { who = LIEGE value = 25 } 
			NOT = {
				trait = deceitful
				trait = ambitious
				trait = envious
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}			
		}		
		
		modifier = {
			factor = 0
			opinion = { who = LIEGE value = 50 } 
			OR = {
				trait = deceitful
				trait = ambitious
				trait = envious
			}
			NOT = {	
				has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_joining_faction
				}
			}			
		}
		
		modifier = {
			factor = 1000
			has_opinion_modifier = {
				who = FROM
				modifier = opinion_coerced_into_joining_faction
			}
		}
		
		modifier = {
			factor = 0.01
			trait = content
		}
		modifier = {
			factor = 0.01
			trait = imbecile
		}
		modifier = {
			factor = 0.1
			trait = inbred
		}
		modifier = {
			factor = 0.1
			trait = craven
		}
		modifier = {
			factor = 0.2
			trait = slow
		}
		modifier = {
			factor = 0.5
			trait = kind
		}
		modifier = {
			factor = 0.5
			trait = charitable
		}
		modifier = {
			factor = 0.5
			trait = honest
		}
		modifier = {
			factor = 0.75
			trait = humble
		}
		modifier = {
			factor = 0.75
			trait = just
		}
		modifier = {
			factor = 1.5
			trait = proud
		}
		modifier = {
			factor = 1.5
			trait = brave
		}
		modifier = {
			factor = 1.5
			trait = arbitrary
		}
		modifier = {
			factor = 2.0
			trait = envious
		}
		modifier = {
			factor = 2.0
			trait = greedy
		}
		modifier = {
			factor = 2.0
			trait = impaler
		}
		modifier = {
			factor = 2.0
			trait = deceitful
		}
		modifier = {
			factor = 4.0
			trait = ambitious
		}
	}
	
	success = {
		has_law = succ_ultimogeniture
	}
	
	abort = {
		always = no		# Factions will abort if the Potential or Allow triggers are no longer valid
	}
	
	abort_effect = {
	}
	
	effect = {
		FROM = {
			any_faction_backer = {
				faction = faction_succ_ultimogeniture
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
		}
	}
}
# Lower Crown Levy
faction_lower_crown_levy = {
	type = liege_titles
	
	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.
	
	# Plotter scope
	potential = {
		NOT = { culture = wilderness }
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		NOT = { trait = incapable }
		liege = { 
			is_feudal = yes 
			OR = {
				primary_title = { is_tribal_type_title = no }
				NOT = { culture = ROOT }
				NOT = { religion = ROOT }
			}
			NOT = { any_demesne_title = { temporary = yes } }
		}
		primary_title = { higher_tier_than = BARON }
		NOT = { has_character_modifier = faction_lower_crown_levy_ultimatum_timer }
		OR = {
			liege = { NOT = { has_landed_title = e_nilfgaard } }
			liege = {
				has_landed_title = e_nilfgaard
				NOT = { trait = strong_emperor }
			}
			AND = {
				liege = { has_landed_title = e_nilfgaard }
				OR = {
					trait = ambitious
					trait = envious
					trait = greedy
				}
				OR = {
					prestige = 200
					piety = 200
				}
			}
		}
	}
	
	# Target scope
	allow = {
		NOT = { culture = wilderness }
		higher_tier_than = DUKE
		OR = {
			is_primary_holder_title = yes
			is_titular = no
		}
		NOT = { has_law = crown_levy_1 }
		holder_scope = {
			independent = yes
			NOT = {
				any_war = { war_title = ROOT using_cb = lower_crown_levy_law }
				reverse_has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_leaving_faction }
			}
		}
	}
	
	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			NOT = { trait = incapable }
			prisoner = no
		}
	}
	
	# AI creation weight
	chance = {
		factor = 1
		modifier = { factor = 0.2 FROM = { pacifist = yes } }
		modifier = { factor = 0 FROM = { prisoner = yes } }
		modifier = { factor = 0 holder_scope = { any_spouse = { character = FROM } } }
		modifier = { factor = 0 current_heir = { character = FROM } }
		modifier = { factor = 0 NOT = { FROM = { crownlaw_title = { title = ROOT } } } }
		modifier = { factor = 0 holder_scope = { FROM = { has_opinion_modifier = { who = PREV modifier = opinion_lowered_crown_levy } } } }
		# Try to exclude people who should rather support a claimant
		modifier = {
			factor = 0
			holder_scope = {
				OR = {
					NOT = { culture = FROM }
					NOT = { religion = FROM }
				}
				any_demesne_title = {
					OR = {
						is_primary_holder_title = yes
						higher_tier_than = DUKE
					}
					FROM = { primary_title = { de_jure_liege_or_above = PREVPREV } }
					any_claimant = {
						culture = FROM
						religion = FROM
					}
				}
			}
		}
		modifier = { factor = 0 FROM = { preparing_invasion = yes } }
		modifier = {
			factor = 0
			FROM = { 
				opinion = { who = LIEGE value = 25 } 
				NOT = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}
			}
		}
		modifier = {
			factor = 0
			FROM = {
				opinion = { who = LIEGE value = 50 } 
				OR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}
			}
		}
		# Laws
		modifier = { factor = 1.5 has_law = crown_levy_2 }
		modifier = { factor = 2 has_law = crown_levy_3 }
		# Creator's opinion of liege
		modifier = { factor = 1.5 NOT = { FROM = { opinion = { who = LIEGE value = -10 } } } }
		modifier = { factor = 2.0 NOT = { FROM = { opinion = { who = LIEGE value = -50 } } } }
		modifier = { factor = 4.0 NOT = { FROM = { opinion = { who = LIEGE value = -75 } } } }
		# Creator's traits
		modifier = { factor = 0.01 FROM = { trait = content } }
		modifier = { factor = 0.01 FROM = { trait = imbecile } }
		modifier = { factor = 0.1 FROM = { trait = inbred } }
		modifier = { factor = 0.1 FROM = { trait = craven } }
		modifier = { factor = 0.2 FROM = { trait = slow } }
		modifier = { factor = 0.5 FROM = { trait = kind } }
		modifier = { factor = 0.5 FROM = { trait = charitable } }
		modifier = { factor = 0.5 FROM = { trait = honest } }
		modifier = { factor = 0.75 FROM = { trait = humble } }
		modifier = { factor = 0.75 FROM = { trait = just } }
		modifier = { factor = 1.5 FROM = { trait = proud } }
		modifier = { factor = 1.5 FROM = { trait = brave } }
		modifier = { factor = 1.5 FROM = { trait = arbitrary } }
		modifier = { factor = 2.0 FROM = { trait = envious } }
		modifier = { factor = 2.0 FROM = { trait = greedy } }
		modifier = { factor = 2.0 FROM = { trait = impaler } }
		modifier = { factor = 2.0 FROM = { trait = deceitful } }
		modifier = { factor = 4.0 FROM = { trait = ambitious } }
	}
	
	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 1
		modifier = { factor = 0.2 pacifist = yes }
		modifier = {
			factor = 0
			OR = {
				prisoner = yes
				trait = incapable
				is_adult = no
				is_landed = no
				preparing_invasion = yes
			}
		}
		modifier = { factor = 0 FROMFROM = { current_heir = { character = ROOT } } }
		modifier = { factor = 0 NOT = { crownlaw_title = { title = FROMFROM } } }
		modifier = { factor = 0 has_character_modifier = faction_lower_crown_levy_ultimatum_timer }
		modifier = {
			factor = 0
			NOT = { opinion = { who = FROM value = -40 } }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0
			liege = {
				primary_title = { is_tribal_type_title = yes }
				culture = ROOT
				religion = ROOT
			}
		}
		modifier = { factor = 0 has_opinion_modifier = { who = liege modifier = opinion_coerced_into_leaving_faction } }
		modifier = { factor = 1000 has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		modifier = {
			factor = 0.01 
			culture = nilfgaardian
			liege = { has_landed_title = e_nilfgaard }
		}
		# Member's opinion of liege
		modifier = { factor = 0 opinion = { who = liege value = 25 } }
		modifier = { factor = 1.5 NOT = { opinion = { who = liege value = -10 } } }
		modifier = { factor = 2.0 NOT = { opinion = { who = liege value = -50 } } }
		modifier = { factor = 4.0 NOT = { opinion = { who = liege value = -75 } } }
		# Laws
		modifier = { factor = 1.5 has_law = crown_levy_2 }
		modifier = { factor = 2 has_law = crown_levy_3 }
		# Member's traits
		modifier = { factor = 0.01 trait = content }
		modifier = { factor = 0.01 trait = imbecile }
		modifier = { factor = 0.1 trait = inbred }
		modifier = { factor = 0.1 trait = craven }
		modifier = { factor = 0.2 trait = slow }
		modifier = { factor = 0.5 trait = kind }
		modifier = { factor = 0.5 trait = charitable }
		modifier = { factor = 0.5 trait = honest }
		modifier = { factor = 0.75 trait = humble }
		modifier = { factor = 0.75 trait = just }
		modifier = { factor = 1.5 trait = proud }
		modifier = { factor = 1.5 trait = brave }
		modifier = { factor = 1.5 trait = arbitrary }
		modifier = { factor = 2.0 trait = envious }
		modifier = { factor = 2.0 trait = greedy }
		modifier = { factor = 2.0 trait = impaler }
		modifier = { factor = 2.0 trait = deceitful }
		modifier = { factor = 4.0 trait = ambitious }
	}
	
	success = {
		holder_scope = {
			FROM = { has_opinion_modifier = { who = PREV modifier = opinion_lowered_crown_levy } }
		}
	}
	
	abort = {
		always = no
	}
	
	effect = {
		FROM = {
			any_faction_backer = {
				faction = faction_lower_crown_levy
				reverse_opinion = { modifier = opinion_grateful who = FROM years = 5 }
			}
		}
	}
}
# Lower Crown Obligations
faction_lower_crown_obligation = {
	type = liege_titles
	
	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.
	
	# Plotter scope
	potential = {
		NOT = { culture = wilderness }
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		NOT = { trait = incapable }
		liege = { 
			is_feudal = yes 
			OR = {
				primary_title = { is_tribal_type_title = no }
				NOT = { culture = ROOT }
				NOT = { religion = ROOT }
			}
			NOT = { any_demesne_title = { temporary = yes } }
		}
		primary_title = { higher_tier_than = BARON }
		NOT = { has_character_modifier = faction_lower_crown_obligation_ultimatum_timer }
		OR = {
			liege = { NOT = { has_landed_title = e_nilfgaard } }
			liege = {
				has_landed_title = e_nilfgaard
				NOT = { trait = strong_emperor }
			}
			AND = {
				liege = { has_landed_title = e_nilfgaard }
				OR = {
					trait = ambitious
					trait = envious
					trait = greedy
				}
				OR = {
					prestige = 200
					piety = 200
				}
			}
		}
	}
	
	# Target scope
	allow = {
		NOT = { culture = wilderness }
		higher_tier_than = DUKE
		OR = {
			is_primary_holder_title = yes
			is_titular = no
		}
		NOT = { has_law = crown_obligation_0 }
		holder_scope = {
			independent = yes
			NOT = {
				any_war = { war_title = ROOT using_cb = lower_crown_obligation_law }
				reverse_has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_leaving_faction }
			}
		}
	}
	
	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			NOT = { trait = incapable }
			prisoner = no
		}
	}
	
	# AI creation weight
	chance = {
		factor = 1
		modifier = { factor = 0.2 FROM = { pacifist = yes } }
		modifier = { factor = 0 FROM = { prisoner = yes } }
		modifier = { factor = 0 holder_scope = { any_spouse = { character = FROM } } }
		modifier = { factor = 0 current_heir = { character = FROM } }
		modifier = { factor = 0 NOT = { FROM = { crownlaw_title = { title = ROOT } } } }
		modifier = { factor = 0 holder_scope = { FROM = { has_opinion_modifier = { who = PREV modifier = opinion_lowered_crown_obligation } } } }
		# Try to exclude people who should rather support a claimant
		modifier = {
			factor = 0
			holder_scope = {
				OR = {
					NOT = { culture = FROM }
					NOT = { religion = FROM }
				}
				any_demesne_title = {
					OR = {
						is_primary_holder_title = yes
						higher_tier_than = DUKE
					}
					FROM = { primary_title = { de_jure_liege_or_above = PREVPREV } }
					any_claimant = {
						culture = FROM
						religion = FROM
					}
				}
			}
		}
		modifier = { factor = 0 FROM = { preparing_invasion = yes } }
		modifier = {
			factor = 0
			FROM = { 
				opinion = { who = LIEGE value = 25 } 
				NOT = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}
			}
		}
		modifier = {
			factor = 0
			FROM = {
				opinion = { who = LIEGE value = 50 } 
				OR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}
			}
		}
		# Laws
		modifier = { factor = 1.2 has_law = crown_obligation_1 }
		modifier = { factor = 1.5 has_law = crown_obligation_2 }
		modifier = { factor = 2 has_law = crown_obligation_3 }
		# Creator's opinion of liege
		modifier = { factor = 1.5 NOT = { FROM = { opinion = { who = LIEGE value = -10 } } } }
		modifier = { factor = 2.0 NOT = { FROM = { opinion = { who = LIEGE value = -50 } } } }
		modifier = { factor = 4.0 NOT = { FROM = { opinion = { who = LIEGE value = -75 } } } }
		# Creator's traits
		modifier = { factor = 0.01 FROM = { trait = content } }
		modifier = { factor = 0.01 FROM = { trait = imbecile } }
		modifier = { factor = 0.1 FROM = { trait = inbred } }
		modifier = { factor = 0.1 FROM = { trait = craven } }
		modifier = { factor = 0.2 FROM = { trait = slow } }
		modifier = { factor = 0.5 FROM = { trait = kind } }
		modifier = { factor = 0.5 FROM = { trait = charitable } }
		modifier = { factor = 0.5 FROM = { trait = honest } }
		modifier = { factor = 0.75 FROM = { trait = humble } }
		modifier = { factor = 0.75 FROM = { trait = just } }
		modifier = { factor = 1.5 FROM = { trait = proud } }
		modifier = { factor = 1.5 FROM = { trait = brave } }
		modifier = { factor = 1.5 FROM = { trait = arbitrary } }
		modifier = { factor = 2.0 FROM = { trait = envious } }
		modifier = { factor = 2.0 FROM = { trait = greedy } }
		modifier = { factor = 2.0 FROM = { trait = impaler } }
		modifier = { factor = 2.0 FROM = { trait = deceitful } }
		modifier = { factor = 4.0 FROM = { trait = ambitious } }
	}
	
	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 1
		modifier = { factor = 0.2 pacifist = yes }
		modifier = {
			factor = 0
			OR = {
				prisoner = yes
				trait = incapable
				is_adult = no
				is_landed = no
				preparing_invasion = yes
			}
		}
		modifier = { factor = 0 FROMFROM = { current_heir = { character = ROOT } } }
		modifier = { factor = 0 NOT = { crownlaw_title = { title = FROMFROM } } }
		modifier = { factor = 0 has_character_modifier = faction_lower_crown_obligation_ultimatum_timer }
		modifier = {
			factor = 0
			NOT = { opinion = { who = FROM value = -40 } }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0
			liege = {
				primary_title = { is_tribal_type_title = yes }
				culture = ROOT
				religion = ROOT
			}
		}
		modifier = { factor = 0 has_opinion_modifier = { who = liege modifier = opinion_coerced_into_leaving_faction } }
		modifier = { factor = 1000 has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		modifier = {
			factor = 0.01 
			culture = nilfgaardian
			liege = { has_landed_title = e_nilfgaard }
		}
		# Member's opinion of liege
		modifier = { factor = 0 opinion = { who = liege value = 25 } }
		modifier = { factor = 1.5 NOT = { opinion = { who = liege value = -10 } } }
		modifier = { factor = 2.0 NOT = { opinion = { who = liege value = -50 } } }
		modifier = { factor = 4.0 NOT = { opinion = { who = liege value = -75 } } }
		# Laws
		modifier = { factor = 1.2 has_law = crown_obligation_1 }
		modifier = { factor = 1.5 has_law = crown_obligation_2 }
		modifier = { factor = 2 has_law = crown_obligation_3 }
		# Member's traits
		modifier = { factor = 0.01 trait = content }
		modifier = { factor = 0.01 trait = imbecile }
		modifier = { factor = 0.1 trait = inbred }
		modifier = { factor = 0.1 trait = craven }
		modifier = { factor = 0.2 trait = slow }
		modifier = { factor = 0.5 trait = kind }
		modifier = { factor = 0.5 trait = charitable }
		modifier = { factor = 0.5 trait = honest }
		modifier = { factor = 0.75 trait = humble }
		modifier = { factor = 0.75 trait = just }
		modifier = { factor = 1.5 trait = proud }
		modifier = { factor = 1.5 trait = brave }
		modifier = { factor = 1.5 trait = arbitrary }
		modifier = { factor = 2.0 trait = envious }
		modifier = { factor = 2.0 trait = greedy }
		modifier = { factor = 2.0 trait = impaler }
		modifier = { factor = 2.0 trait = deceitful }
		modifier = { factor = 4.0 trait = ambitious }
	}
	
	success = {
		holder_scope = {
			FROM = { has_opinion_modifier = { who = PREV modifier = opinion_lowered_crown_obligation } }
		}
	}
	
	abort = {
		always = no
	}
	
	effect = {
		FROM = {
			any_faction_backer = {
				faction = faction_lower_crown_obligation
				reverse_opinion = { modifier = opinion_grateful who = FROM years = 5 }
			}
		}
	}
}
# Lower Tolerance
faction_lower_tolerance = {
	type = liege_titles
	
	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.
	
	# Plotter scope
	potential = {
		NOT = { culture = wilderness }
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		NOT = { trait = incapable }
		liege = { 
			is_feudal = yes 
			OR = {
				primary_title = { is_tribal_type_title = no }
				NOT = { culture = ROOT }
				NOT = { religion = ROOT }
			}
			NOT = { any_demesne_title = { temporary = yes } }
		}
		primary_title = { higher_tier_than = BARON }
		NOT = { has_character_modifier = faction_lower_or_raise_tolerance_ultimatum_timer }
		OR = {
			liege = { NOT = { has_landed_title = e_nilfgaard } }
			liege = {
				has_landed_title = e_nilfgaard
				NOT = { trait = strong_emperor }
			}
			AND = {
				liege = { has_landed_title = e_nilfgaard }
				OR = {
					trait = ambitious
					trait = envious
					trait = greedy
				}
				OR = {
					prestige = 200
					piety = 200
				}
			}
		}
	}
	
	# Target scope
	allow = {
		NOT = { culture = wilderness }
		higher_tier_than = DUKE
		OR = {
			is_primary_holder_title = yes
			is_titular = no
		}
		NOT = { has_law = tolerance_0 }
		holder_scope = {
			independent = yes
			NOT = {
				any_war = { war_title = ROOT using_cb = lower_tolerance_law }
				reverse_has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_leaving_faction }
			}
		}
	}
	
	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			NOT = { trait = incapable }
			prisoner = no
		}
	}
	
	# AI creation weight
	chance = {
		factor = 1
		modifier = { factor = 0.2 FROM = { pacifist = yes } }
		modifier = { factor = 0 FROM = { prisoner = yes } }
		modifier = { factor = 0 holder_scope = { any_spouse = { character = FROM } } }
		modifier = { factor = 0 current_heir = { character = FROM } }
		modifier = { factor = 0 NOT = { FROM = { crownlaw_title = { title = ROOT } } } }
		modifier = { factor = 0 holder_scope = { FROM = { has_opinion_modifier = { who = PREV modifier = opinion_lowered_tolerance } } } }
		# Try to exclude people who should rather support a claimant
		modifier = {
			factor = 0
			holder_scope = {
				OR = {
					NOT = { culture = FROM }
					NOT = { religion = FROM }
				}
				any_demesne_title = {
					OR = {
						is_primary_holder_title = yes
						higher_tier_than = DUKE
					}
					FROM = { primary_title = { de_jure_liege_or_above = PREVPREV } }
					any_claimant = {
						culture = FROM
						religion = FROM
					}
				}
			}
		}
		modifier = { factor = 0 FROM = { preparing_invasion = yes } }
		modifier = {
			factor = 0
			FROM = { 
				opinion = { who = LIEGE value = 25 } 
				NOT = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}
			}
		}
		modifier = {
			factor = 0
			FROM = {
				opinion = { who = LIEGE value = 50 } 
				OR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}
			}
		}
		# Laws
		modifier = { factor = 1.2 has_law = tolerance_1 }
		modifier = { factor = 2 has_law = tolerance_2 }
		# Creator's opinion of liege
		modifier = { factor = 1.5 NOT = { FROM = { opinion = { who = LIEGE value = -10 } } } }
		modifier = { factor = 2.0 NOT = { FROM = { opinion = { who = LIEGE value = -50 } } } }
		modifier = { factor = 4.0 NOT = { FROM = { opinion = { who = LIEGE value = -75 } } } }
		# Creator's traits
		modifier = { factor = 0 FROM = { NOT = { trait = racist } } }
		modifier = { factor = 0.01 FROM = { trait = content } }
		modifier = { factor = 0.01 FROM = { trait = imbecile } }
		modifier = { factor = 0.1 FROM = { trait = inbred } }
		modifier = { factor = 0.1 FROM = { trait = craven } }
		modifier = { factor = 0.2 FROM = { trait = slow } }
		modifier = { factor = 0.5 FROM = { trait = kind } }
		modifier = { factor = 0.5 FROM = { trait = charitable } }
		modifier = { factor = 0.5 FROM = { trait = honest } }
		modifier = { factor = 0.75 FROM = { trait = humble } }
		modifier = { factor = 0.75 FROM = { trait = just } }
		modifier = { factor = 1.5 FROM = { trait = proud } }
		modifier = { factor = 1.5 FROM = { trait = brave } }
		modifier = { factor = 1.5 FROM = { trait = arbitrary } }
		modifier = { factor = 2.0 FROM = { trait = envious } }
		modifier = { factor = 2.0 FROM = { trait = greedy } }
		modifier = { factor = 2.0 FROM = { trait = impaler } }
		modifier = { factor = 2.0 FROM = { trait = deceitful } }
		modifier = { factor = 4.0 FROM = { trait = ambitious } }
	}
	
	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 1
		modifier = { factor = 0.2 pacifist = yes }
		modifier = {
			factor = 0
			OR = {
				prisoner = yes
				trait = incapable
				is_adult = no
				is_landed = no
				preparing_invasion = yes
			}
		}
		modifier = { factor = 0 FROMFROM = { current_heir = { character = ROOT } } }
		modifier = { factor = 0 NOT = { crownlaw_title = { title = FROMFROM } } }
		modifier = { factor = 0 has_character_modifier = faction_lower_or_raise_tolerance_ultimatum_timer }
		modifier = {
			factor = 0
			NOT = { opinion = { who = FROM value = -40 } }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0
			liege = {
				primary_title = { is_tribal_type_title = yes }
				culture = ROOT
				religion = ROOT
			}
		}
		modifier = { factor = 0 has_opinion_modifier = { who = liege modifier = opinion_coerced_into_leaving_faction } }
		modifier = { factor = 1000 has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		modifier = {
			factor = 0.01 
			culture = nilfgaardian
			liege = { has_landed_title = e_nilfgaard }
		}
		# Member's opinion of liege
		modifier = { factor = 0 opinion = { who = liege value = 25 } }
		modifier = { factor = 1.5 NOT = { opinion = { who = liege value = -10 } } }
		modifier = { factor = 2.0 NOT = { opinion = { who = liege value = -50 } } }
		modifier = { factor = 4.0 NOT = { opinion = { who = liege value = -75 } } }
		# Laws
		modifier = { factor = 1.2 has_law = tolerance_1 }
		modifier = { factor = 2 has_law = tolerance_2 }
		# Member's traits
		modifier = { factor = 2.0 trait = racist }
		modifier = { factor = 0.01 trait = tolerant }
		modifier = { factor = 0.01 trait = elf_race }
		modifier = { factor = 0.1 trait = halfelf_race }
		modifier = { factor = 0.01 trait = dwarf_race }
		modifier = { factor = 0.1 trait = halfdwarf_race }
		modifier = { factor = 0.01 trait = dryad_race }
		modifier = { factor = 0.01 trait = halfling_race }
		modifier = { factor = 0.01 trait = halfhalfling_race }
		modifier = { factor = 0.01 trait = content }
		modifier = { factor = 0.01 trait = imbecile }
		modifier = { factor = 0.1 trait = inbred }
		modifier = { factor = 0.1 trait = craven }
		modifier = { factor = 0.2 trait = slow }
		modifier = { factor = 0.5 trait = kind }
		modifier = { factor = 0.5 trait = charitable }
		modifier = { factor = 0.5 trait = honest }
		modifier = { factor = 0.75 trait = humble }
		modifier = { factor = 0.75 trait = just }
		modifier = { factor = 1.5 trait = proud }
		modifier = { factor = 1.5 trait = brave }
		modifier = { factor = 1.5 trait = arbitrary }
		modifier = { factor = 2.0 trait = envious }
		modifier = { factor = 2.0 trait = greedy }
		modifier = { factor = 2.0 trait = impaler }
		modifier = { factor = 2.0 trait = deceitful }
		modifier = { factor = 4.0 trait = ambitious }
	}
	
	success = {
		holder_scope = {
			FROM = { has_opinion_modifier = { who = PREV modifier = opinion_lowered_tolerance } }
		}
	}
	
	abort = {
		always = no
	}
	
	effect = {
		FROM = {
			any_faction_backer = {
				faction = faction_lower_tolerance
				reverse_opinion = { modifier = opinion_grateful who = FROM years = 5 }
			}
		}
	}
}
# Raise Tolerance
faction_raise_tolerance = {
	type = liege_titles
	
	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.
	
	# Plotter scope
	potential = {
		NOT = { culture = wilderness }
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		NOT = { trait = incapable }
		liege = { 
			is_feudal = yes 
			OR = {
				primary_title = { is_tribal_type_title = no }
				NOT = { culture = ROOT }
				NOT = { religion = ROOT }
			}
			NOT = { any_demesne_title = { temporary = yes } }
		}
		primary_title = { higher_tier_than = BARON }
		NOT = { has_character_modifier = faction_lower_or_raise_tolerance_ultimatum_timer }
		OR = {
			liege = { NOT = { has_landed_title = e_nilfgaard } }
			liege = {
				has_landed_title = e_nilfgaard
				NOT = { trait = strong_emperor }
			}
			AND = {
				liege = { has_landed_title = e_nilfgaard }
				OR = {
					trait = ambitious
					trait = envious
					trait = greedy
				}
				OR = {
					prestige = 200
					piety = 200
				}
			}
		}
	}
	
	# Target scope
	allow = {
		NOT = { culture = wilderness }
		higher_tier_than = DUKE
		OR = {
			is_primary_holder_title = yes
			is_titular = no
		}
		OR = {
			has_law = tolerance_1
			has_law = tolerance_2
		}
		holder_scope = {
			independent = yes
			NOT = {
				any_war = { war_title = ROOT using_cb = raise_tolerance_law }
				reverse_has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_leaving_faction }
			}
		}
	}
	
	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			NOT = { trait = incapable }
			prisoner = no
		}
	}
	
	# AI creation weight
	chance = {
		factor = 1
		modifier = { factor = 0.2 FROM = { pacifist = yes } }
		modifier = { factor = 0 FROM = { prisoner = yes } }
		modifier = { factor = 0 holder_scope = { any_spouse = { character = FROM } } }
		modifier = { factor = 0 current_heir = { character = FROM } }
		modifier = { factor = 0 NOT = { FROM = { crownlaw_title = { title = ROOT } } } }
		modifier = { factor = 0 holder_scope = { FROM = { has_opinion_modifier = { who = PREV modifier = opinion_raised_tolerance } } } }
		# Try to exclude people who should rather support a claimant
		modifier = {
			factor = 0
			holder_scope = {
				OR = {
					NOT = { culture = FROM }
					NOT = { religion = FROM }
				}
				any_demesne_title = {
					OR = {
						is_primary_holder_title = yes
						higher_tier_than = DUKE
					}
					FROM = { primary_title = { de_jure_liege_or_above = PREVPREV } }
					any_claimant = {
						culture = FROM
						religion = FROM
					}
				}
			}
		}
		modifier = { factor = 0 FROM = { preparing_invasion = yes } }
		modifier = {
			factor = 0
			FROM = { 
				opinion = { who = LIEGE value = 25 } 
				NOT = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}
			}
		}
		modifier = {
			factor = 0
			FROM = {
				opinion = { who = LIEGE value = 50 } 
				OR = {
					trait = deceitful
					trait = ambitious
					trait = envious
				}
			}
		}
		# Laws
		modifier = { factor = 2 has_law = tolerance_0 }
		modifier = { factor = 1.2 has_law = tolerance_1 }
		# Creator's opinion of liege
		modifier = { factor = 1.5 NOT = { FROM = { opinion = { who = LIEGE value = -10 } } } }
		modifier = { factor = 2.0 NOT = { FROM = { opinion = { who = LIEGE value = -50 } } } }
		modifier = { factor = 4.0 NOT = { FROM = { opinion = { who = LIEGE value = -75 } } } }
		# Creator's traits
		modifier = {
			factor = 0
			FROM = {
				NOT = {
					trait = tolerant
					trait = elf_race
					trait = dwarf_race
					trait = dryad_race
					trait = halfling_race
				}
			}
		}
		modifier = { factor = 0.01 FROM = { trait = content } }
		modifier = { factor = 0.01 FROM = { trait = imbecile } }
		modifier = { factor = 0.1 FROM = { trait = inbred } }
		modifier = { factor = 0.1 FROM = { trait = craven } }
		modifier = { factor = 0.2 FROM = { trait = slow } }
		modifier = { factor = 2 FROM = { trait = kind } }
		modifier = { factor = 2 FROM = { trait = charitable } }
		modifier = { factor = 2 FROM = { trait = honest } }
		modifier = { factor = 1.5 FROM = { trait = humble } }
		modifier = { factor = 1.5 FROM = { trait = just } }
		modifier = { factor = 0.75 FROM = { trait = proud } }
		modifier = { factor = 0.75 FROM = { trait = brave } }
		modifier = { factor = 1.5 FROM = { trait = arbitrary } }
		modifier = { factor = 0.5 FROM = { trait = envious } }
		modifier = { factor = 0.5 FROM = { trait = greedy } }
		modifier = { factor = 0.5 FROM = { trait = impaler } }
		modifier = { factor = 0.5 FROM = { trait = deceitful } }
		modifier = { factor = 4.0 FROM = { trait = ambitious } }
	}
	
	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 1
		modifier = { factor = 0.2 pacifist = yes }
		modifier = {
			factor = 0
			OR = {
				prisoner = yes
				trait = incapable
				is_adult = no
				is_landed = no
				preparing_invasion = yes
			}
		}
		modifier = { factor = 0 FROMFROM = { current_heir = { character = ROOT } } }
		modifier = { factor = 0 NOT = { crownlaw_title = { title = FROMFROM } } }
		modifier = { factor = 0 has_character_modifier = faction_lower_or_raise_tolerance_ultimatum_timer }
		modifier = {
			factor = 0
			NOT = { opinion = { who = FROM value = -40 } }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0
			liege = {
				primary_title = { is_tribal_type_title = yes }
				culture = ROOT
				religion = ROOT
			}
		}
		modifier = { factor = 0 has_opinion_modifier = { who = liege modifier = opinion_coerced_into_leaving_faction } }
		modifier = { factor = 1000 has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		modifier = {
			factor = 0.01 
			culture = nilfgaardian
			liege = { has_landed_title = e_nilfgaard }
		}
		# Member's opinion of liege
		modifier = { factor = 0 opinion = { who = liege value = 25 } }
		modifier = { factor = 1.5 NOT = { opinion = { who = liege value = -10 } } }
		modifier = { factor = 2.0 NOT = { opinion = { who = liege value = -50 } } }
		modifier = { factor = 4.0 NOT = { opinion = { who = liege value = -75 } } }
		# Laws
		modifier = { factor = 2 has_law = tolerance_0 }
		modifier = { factor = 1.2 has_law = tolerance_1 }
		# Member's traits
		modifier = { factor = 2.0 trait = tolerant }
		modifier = { factor = 0.01 trait = racist }
		modifier = { factor = 2 trait = elf_race }
		modifier = { factor = 1.5 trait = halfelf_race }
		modifier = { factor = 2 trait = dwarf_race }
		modifier = { factor = 1.5 trait = halfdwarf_race }
		modifier = { factor = 2 trait = dryad_race }
		modifier = { factor = 2 trait = halfling_race }
		modifier = { factor = 0.01 trait = halfhalfling_race }
		modifier = { factor = 0.01 trait = content }
		modifier = { factor = 0.01 trait = imbecile }
		modifier = { factor = 0.1 trait = inbred }
		modifier = { factor = 0.1 trait = craven }
		modifier = { factor = 0.2 trait = slow }
		modifier = { factor = 0.5 trait = kind }
		modifier = { factor = 0.5 trait = charitable }
		modifier = { factor = 0.5 trait = honest }
		modifier = { factor = 0.75 trait = humble }
		modifier = { factor = 0.75 trait = just }
		modifier = { factor = 1.5 trait = proud }
		modifier = { factor = 1.5 trait = brave }
		modifier = { factor = 1.5 trait = arbitrary }
		modifier = { factor = 2.0 trait = envious }
		modifier = { factor = 2.0 trait = greedy }
		modifier = { factor = 2.0 trait = impaler }
		modifier = { factor = 2.0 trait = deceitful }
		modifier = { factor = 4.0 trait = ambitious }
	}
	
	success = {
		holder_scope = {
			FROM = { has_opinion_modifier = { who = PREV modifier = opinion_raised_tolerance } }
		}
	}
	
	abort = {
		always = no
	}
	
	effect = {
		FROM = {
			any_faction_backer = {
				faction = faction_raise_tolerance
				reverse_opinion = { modifier = opinion_grateful who = FROM years = 5 }
			}
		}
	}
}