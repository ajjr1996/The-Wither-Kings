# Charm character
plot_charm_character = {
	type = realm_characters_plus
	intrigue_plot = yes
	
	# Plotter scope
	potential = {
		NOT = { culture = wilderness }
		OR = {
			AND = {
				trait = sorcerer
				NOT = { has_character_modifier = drained }
				prisoner = no
			 }
			job_mage = {
				trait = sorcerer
				NOT = { has_character_modifier = drained }
				prisoner = no
				NOT = { trait = incapable }
			 }
		 }
	 }
	
	# Target allow trigger for when players target a specific character in the GUI
	player_allow = {
		NOT = { culture = wilderness }
		ai = yes # To keep AI from using it against a player
		NOT = {
			has_opinion_modifier = { who = FROM modifier = opinion_charmed }
		 }
	 }
	 
	# Target character scope
	allow = {
		NOT = { culture = wilderness }
		ai = yes # To keep AI from using it against a player
		FROM = {
			OR = {
				spouse = { character = ROOT }
				lover = { character = ROOT }
				liege = { character = ROOT }
			}
		}
	}
	
	chance = {
		factor = 1
		modifier = { factor = 0.1 }
		modifier = { factor = 0.1 FROM = { has_job_title = job_mage } }
		# Rank
		modifier = { factor = 2.0 ROOT = { liege = { character = FROM } } }
		modifier = { factor = 1.5 ROOT = { higher_tier_than = duke } }
		modifier = { factor = 1.5 ROOT = { higher_tier_than = king } }
		modifier = { factor = 1.5 ROOT = { higher_tier_than = FROM } }
		# Traits
		modifier = { factor = 2.0 FROM = { trait = mystic } }
		modifier = { factor = 2.0 FROM = { trait = kind } }
		modifier = { factor = 2.0 FROM = { trait = gregarious } }
		modifier = { factor = 2.0 FROM = { trait = charitable } }
		# Opinion
		modifier = { factor = 2.0 NOT = { opinion = { who = FROM value = 0 } } }
		modifier = { factor = 2.0 NOT = { opinion = { who = FROM value = -25 } } }
		modifier = { factor = 2.0 NOT = { opinion = { who = FROM value = -50 } } }
		modifier = { factor = 2.0 NOT = {opinion = { who = FROM value = -75 } } }
	 }
	
	creation_effect = {
		hidden_tooltip = { character_event = { id = plots.100 } }
	}
	
	success = {
		has_opinion_modifier = { who = FROM modifier = opinion_charmed }
	 }
	
	abort = {
		OR = {
			is_alive = no
		 }
	 }
	
	abort_effect = { }
	
	effect = {
		custom_tooltip = { text = plot_charm_character_tooltip }
	}
 }
# Heal character
plot_heal_character = {
	type = realm_characters_plus
	intrigue_plot = yes
	
	# Plotter scope
	potential = {
		NOT = { culture = wilderness }
		OR = {
			AND = {
				trait = sorcerer
				NOT = { has_character_modifier = drained }
				prisoner = no
			 }
			job_mage = {
				trait = sorcerer
				NOT = { has_character_modifier = drained }
				prisoner = no
				NOT = { trait = incapable }
			 }
		 }
	 }
	
	# Target allow trigger for when players target a specific character in the GUI
	player_allow = {
		NOT = { culture = wilderness }
		OR = {
			trait = ill
			trait = pneumonic
			trait = syphilitic
			trait = leper
			trait = has_tuberculosis
			trait = has_typhoid_fever
			trait = has_typhus
			trait = has_bubonic_plague
			trait = has_measles
			trait = has_small_pox
			trait = has_aztec_disease
			trait = wounded
			trait = maimed
			trait = infirm
			trait = blinded
			trait = eunuch
		 }
	 }
	
	# Target character scope
	allow = {
		NOT = { culture = wilderness }
		FROM = {
			OR = {
				spouse = { character = ROOT }
				lover = { character = ROOT }
				any_child = { character = ROOT }
			}
		}
	}
	
	chance = {
		factor = 1
		modifier = { factor = 0.1 }
		modifier = { factor = 0.1 FROM = { has_job_title = job_mage } }
		# Traits
		modifier = { factor = 2.0 FROM = { trait = kind } }
		modifier = { factor = 2.0 FROM = { trait = gregarious } }
		modifier = { factor = 2.0 FROM = { trait = charitable } }
		# Family
		modifier = { factor = 5.0 dynasty = FROM }
		modifier = { factor = 10.0 spouse = { character = FROM } }
		modifier = { factor = 10.0 father = { character = FROM } }
		modifier = { factor = 10.0 mother = { character = FROM } }
		modifier = { factor = 10.0 lover = { character = FROM } }
		# Opinion
		modifier = { factor = 2.0 reverse_opinion = { who = FROM value = 25 } }
		modifier = { factor = 2.0 reverse_opinion = { who = FROM value = 50 } }
		modifier = { factor = 2.0 reverse_opinion = { who = FROM value = 75 } }
		modifier = { factor = 0 NOT = { reverse_opinion = { who = FROM value = 0 } } }
	 }
	
	creation_effect = {
		hidden_tooltip = { character_event = { id = plots.110 } }
	}
	
	success = {
		NOT = {
			trait = ill
			trait = pneumonic
			trait = syphilitic
			trait = leper
			trait = has_tuberculosis
			trait = has_typhoid_fever
			trait = has_typhus
			trait = has_bubonic_plague
			trait = has_measles
			trait = has_small_pox
			trait = has_aztec_disease
			trait = wounded
			trait = maimed
			trait = infirm
			trait = blinded
			trait = eunuch
		 }
	 }
	
	abort = {
		OR = {
			is_alive = no
		 }
	 }
	
	abort_effect = { }
	
	effect = {
		custom_tooltip = { text = plot_heal_character_tooltip }
	}
 }
