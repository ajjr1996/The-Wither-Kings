#############################################
#
# Magic Duel Engine Events
# 
#
#############################################

namespace = mageduel

#Mage Duel Start
character_event = {
	id = mageduel.0
	desc = EVTDESCmageduel.0
	picture = GFX_evt_mage_duel
	
	is_triggered_only = yes

	option = { 
	name = EVTOPTAmageduel.0
	random_list = {
			50 = {
				modifier = {
					factor = 1.5
					attribute_diff = {
						character = FROMFROM
						attribute = learning
						value = 2
					}
				}
				modifier = {
					factor = 1.5
					attribute_diff = {
						character = FROMFROM
						attribute = learning
						value = 4
					}
				}
				modifier = {
					factor = 1.5
					attribute_diff = {
						character = FROMFROM
						attribute = learning
						value = 6
					}
				}
				modifier = {
					factor = 1.5
					attribute_diff = {
						character = FROMFROM
						attribute = learning
						value = 8
					}
				}
				ROOT = { save_event_target_as = enemy }
				FROMFROM = {
					save_event_target_as = player 
					character_event = { id = mageduel.991 }
				}
			}
			50 = {
				modifier = {
					factor = 2
					FROMFROM = {
						attribute_diff = {
							character = ROOT
							attribute = learning
							value = 2
						}
					}	
				}
				modifier = {
					factor = 3
					FROMFROM = {
						attribute_diff = {
							character = ROOT
							attribute = learning
							value = 4
						}
					}
				}
				modifier = {
					factor = 4
					FROMFROM = {
						attribute_diff = {
							character = ROOT
							attribute = learning
							value = 6
						}
					}
				}
				modifier = {
					factor = 5
					FROMFROM = {
						attribute_diff = {
							character = ROOT
							attribute = learning
							value = 8
						}
					}
				}
				FROMFROM = { character_event = { id = mageduel.990 } } #Refuse Battle
			}
		}
	}
}
#Concentration Phase [Player]
character_event = {
	id = mageduel.1
	desc = EVTDESCmageduel.1
	picture = GFX_evt_meditation

	is_triggered_only = yes
	
	immediate = { 
		event_target:enemy = { clr_character_flag = magicshield }
		remove_trait = magicshield
		clr_character_flag = mana0
	 }

	option = {
		name = EVTOPTAmageduel.1
		custom_tooltip = {
		text = TOOLTIPconcentration_phase
		hidden_tooltip = { 
		random_list = {
			20 = {
				modifier = {
					factor = 1.5
					learning = 18
				}
				modifier = {
					factor = 1.5
					learning = 16
				}
				modifier = {
					factor = 1.5
					learning = 14
				}
				modifier = {
					factor = 1.5
					learning = 12
				}
				modifier = {
					factor = 1.5
					learning = 10
				}
				character_event = { id = mageduel.2 }
			}
			20 = {
				modifier = {
					factor = 2
					learning = 16
				}
				modifier = {
					factor = 1.5
					NOT = { learning = 18 }
				}
				modifier = {
					factor = 1.5
					learning = 14
				}
				modifier = {
					factor = 1.5
					learning = 12
				}
				modifier = {
					factor = 1.5
					learning = 10
				}
				if = {
					limit = {
						NOT = { has_character_flag = concentration }
					}
					character_event = { id = mageduel.3 }
				}
				if = {
					limit = {
						has_character_flag = concentration
					}
					character_event = { id = mageduel.2 }
					clr_character_flag = concentration
				}
			}
			20 = {
				modifier = {
					factor = 2.5
					learning = 14
				}
				modifier = {
					factor = 1.5
					NOT = { learning = 18 }
				}
				modifier = {
					factor = 1.5
					NOT = { learning = 16 }
				}
				modifier = {
					factor = 1.5
					learning = 12
				}
				modifier = {
					factor = 1.5
					learning = 10
				}
				if = {
					limit = {
						NOT = { has_character_flag = concentration }
					}
					character_event = { id = mageduel.4 }
				}
				if = {
					limit = {
						has_character_flag = concentration
					}
					character_event = { id = mageduel.3 }
					clr_character_flag = concentration
				}
			}
			20 = {
				modifier = {
					factor = 3
					learning = 12
				}
				modifier = {
					factor = 1.5
					NOT = { learning = 18 }
				}
				modifier = {
					factor = 1.5
					NOT = { learning = 16 }
				}
				modifier = {
					factor = 1.5
					NOT = { learning = 14 }
				}
				modifier = {
					factor = 1.5
					learning = 10
				}
				if = {
					limit = {
						NOT = { has_character_flag = concentration }
					}
					character_event = { id = mageduel.5 }
				}
				if = {
					limit = {
						has_character_flag = concentration
					}
					character_event = { id = mageduel.4 }
					clr_character_flag = concentration
				}
			}
			20 = {
				modifier = {
					factor = 3
					learning = 10
				}
				modifier = {
					factor = 1.5
					NOT = { learning = 18 }
				}
				modifier = {
					factor = 1.5
					NOT = { learning = 16 }
				}
				modifier = {
					factor = 1.5
					NOT = { learning = 14 }
				}
				modifier = {
					factor = 1.5
					NOT = { learning = 12 }
				}
				if = {
					limit = {
						NOT = { has_character_flag = concentration }
					}
					character_event = { id = mageduel.6 }
				}
				if = {
					limit = {
						has_character_flag = concentration
					}
					character_event = { id = mageduel.5 }
					clr_character_flag = concentration
				}
			}
		}
	} } }
}
#Concentration Attack 5
character_event = {
	id = mageduel.2
	desc = EVTDESCmageduel.2
	picture = GFX_evt_mage_duel

	is_triggered_only = yes	

	option = {
		name = EVTOPTAmageduel.2 #Alzur's Thunder 3
		custom_tooltip = { 
		text = TOOLTIPalzurs_thunder
		hidden_tooltip = { 
		random_list = {
			30 = {
				modifier = {
					factor = 1.8
					learning = 18
				}
				modifier = {
					factor = 1.6
					learning = 16
				}
				modifier = {
					factor = 1.3
					learning = 14
				}
				modifier = {
					factor = 1.2
					learning = 12
				}
				modifier = {
					factor = 1.1
					learning = 10
				}
				event_target:enemy = {
					 character_event = { id = mageduel.12 }
				}
				set_character_flag = mana2
			}
			70 = {
				modifier = {
					factor = 5
					has_character_flag = magicshield
				}
				modifier = {
					factor = 2
					trait = incapable
				}
				modifier = {
					factor = 2
					trait = maimed
				}
				modifier = {
					factor = 1.5
					trait = wounded
				}
				modifier = {
					factor = 1.2
					trait = curse1
				}
				modifier = { 
					factor = 1.4
					trait = curse2
				}
				modifier = {
					factor = 1.6
					trait = curse3
				}
				character_event = { id = mageduel.16 }
				set_character_flag = mana2
			}
		}
	} } }
	option = {
		name = EVTOPTBmageduel.2 #Magic Missle 2
		custom_tooltip = { 
		text = TOOLTIPmagic_missle
		hidden_tooltip = {
		random_list = {
			50 = {
				modifier = {
					factor = 1.8
					learning = 18
				}
				modifier = {
					factor = 1.5
					learning = 16
				}
				modifier = {
					factor = 1.4
					learning = 14
				}
				modifier = {
					factor = 1.2
					learning = 12
				}
				modifier = {
					factor = 1.1
					learning = 10
				}
				event_target:enemy = {
					 character_event = { id = mageduel.17 }
				}
				set_character_flag = mana3
			}
			50 = {
				modifier = {
					factor = 5
					has_character_flag = magicshield
				}
				modifier = {
					factor = 2
					trait = incapable
				}
				modifier = {
					factor = 2
					trait = maimed
				}
				modifier = {
					factor = 1.5
					trait = wounded
				}
				modifier = {
					factor = 1.2
					trait = curse1
				}
				modifier = { 
					factor = 1.4
					trait = curse2
				}
				modifier = {
					factor = 1.6
					trait = curse3
				}
				character_event = { id = mageduel.22 }
				set_character_flag = mana3
			}
		}
	} } }
	option = {
		name = EVTOPTCmageduel.2 #Curse 1
		custom_tooltip = { 
		text = TOOLTIPcurse
		hidden_tooltip = {
		random_list = {
			25 = { character_event = { id = mageduel.23 } } #Curse1
			25 = { character_event = { id = mageduel.24 } } #Curse2
			25 = { character_event = { id = mageduel.25 } } #Curse3
			25 = { character_event = { id = mageduel.26 } } #Curse Miss
		}
		set_character_flag = mana4
	} } }
	option = {
		name = EVTOPTDmageduel.2 #Skip 0
		custom_tooltip = { 
		text = TOOLTIPskip
		hidden_tooltip = {
		character_event = { id = mageduel.7 }
	} } }
}
#Concentration Attack 4
character_event = {
	id = mageduel.3
	desc = EVTDESCmageduel.3
	picture = GFX_evt_mage_duel

	is_triggered_only = yes	

	option = {
		name = EVTOPTAmageduel.2 #Alzur's Thunder 3
		custom_tooltip = { 
		text = TOOLTIPalzurs_thunder
		hidden_tooltip = { 
		random_list = {
			25 = {
				modifier = {
					factor = 1.8
					learning = 18
				}
				modifier = {
					factor = 1.6
					learning = 16
				}
				modifier = {
					factor = 1.3
					learning = 14
				}
				modifier = {
					factor = 1.2
					learning = 12
				}
				modifier = {
					factor = 1.1
					learning = 10
				}
				set_character_flag = mana1
				event_target:enemy = {
					 character_event = { id = mageduel.12 }
				}
			}
			75 = {
				modifier = {
					factor = 5
					has_character_flag = magicshield
				}
				modifier = {
					factor = 2
					trait = incapable
				}
				modifier = {
					factor = 2
					trait = maimed
				}
				modifier = {
					factor = 1.5
					trait = wounded
				}
				modifier = {
					factor = 1.2
					trait = curse1
				}
				modifier = { 
					factor = 1.4
					trait = curse2
				}
				modifier = {
					factor = 1.6
					trait = curse3
				}
				character_event = { id = mageduel.16 }
				set_character_flag = mana1
			}
		}
	} } }
	option = {
		name = EVTOPTBmageduel.2 #Magic Missle 2
		custom_tooltip = { 
		text = TOOLTIPmagic_missle
		hidden_tooltip = {
		random_list = {
			50 = {
				modifier = {
					factor = 1.8
					learning = 18
				}
				modifier = {
					factor = 1.5
					learning = 16
				}
				modifier = {
					factor = 1.4
					learning = 14
				}
				modifier = {
					factor = 1.2
					learning = 12
				}
				modifier = {
					factor = 1.1
					learning = 10
				}
				event_target:enemy = {
					 character_event = { id = mageduel.17 }
				}
				set_character_flag = mana2
			}
			50 = {
				modifier = {
					factor = 5
					has_character_flag = magicshield
				}
				modifier = {
					factor = 2
					trait = incapable
				}
				modifier = {
					factor = 2
					trait = maimed
				}
				modifier = {
					factor = 1.5
					trait = wounded
				}
				modifier = {
					factor = 1.2
					trait = curse1
				}
				modifier = { 
					factor = 1.4
					trait = curse2
				}
				modifier = {
					factor = 1.6
					trait = curse3
				}
				character_event = { id = mageduel.22 }
				set_character_flag = mana2
			}
		}
	} } }
	option = {
		name = EVTOPTCmageduel.2 #Curse 1
		custom_tooltip = { 
		text = TOOLTIPcurse
		hidden_tooltip = {
		random_list = {
			25 = { character_event = { id = mageduel.23 } } #Curse1
			25 = { character_event = { id = mageduel.24 } } #Curse2
			25 = { character_event = { id = mageduel.25 } } #Curse3
			25 = { character_event = { id = mageduel.26 } } #Curse Miss
		}
		set_character_flag = mana3
	} } }
	option = {
		name = EVTOPTDmageduel.2 #Skip 0
		custom_tooltip = { 
		text = TOOLTIPskip
		hidden_tooltip = {
		character_event = { id = mageduel.8 } 
	} } }
}
#Concentration Attack 3
character_event = {
	id = mageduel.4
	desc = EVTDESCmageduel.4
	picture = GFX_evt_mage_duel

	is_triggered_only = yes	

	option = {
		name = EVTOPTAmageduel.2 #Alzur's Thunder 3
		custom_tooltip = { 
		text = TOOLTIPalzurs_thunder
		hidden_tooltip = { 
		random_list = {
			20 = {
				modifier = {
					factor = 1.8
					learning = 18
				}
				modifier = {
					factor = 1.6
					learning = 16
				}
				modifier = {
					factor = 1.3
					learning = 14
				}
				modifier = {
					factor = 1.2
					learning = 12
				}
				modifier = {
					factor = 1.1
					learning = 10
				}
				event_target:enemy = {
					 character_event = { id = mageduel.12 }
				}
				set_character_flag = mana0
			}
			80 = {
				modifier = {
					factor = 5
					has_character_flag = magicshield
				}
				modifier = {
					factor = 2
					trait = incapable
				}
				modifier = {
					factor = 2
					trait = maimed
				}
				modifier = {
					factor = 1.5
					trait = wounded
				}
				modifier = {
					factor = 1.2
					trait = curse1
				}
				modifier = { 
					factor = 1.4
					trait = curse2
				}
				modifier = {
					factor = 1.6
					trait = curse3
				}
				character_event = { id = mageduel.16 }
				set_character_flag = mana0
			}
		}
	} } }
	option = {
		name = EVTOPTBmageduel.2 #Magic Missle 2
		custom_tooltip = { 
		text = TOOLTIPmagic_missle
		hidden_tooltip = {
		random_list = {
			50 = {
				modifier = {
					factor = 1.8
					learning = 18
				}
				modifier = {
					factor = 1.5
					learning = 16
				}
				modifier = {
					factor = 1.4
					learning = 14
				}
				modifier = {
					factor = 1.2
					learning = 12
				}
				modifier = {
					factor = 1.1
					learning = 10
				}
				event_target:enemy = {
					 character_event = { id = mageduel.17 }
				}
				set_character_flag = mana1
			}
			50 = {
				modifier = {
					factor = 5
					has_character_flag = magicshield
				}
				modifier = {
					factor = 2
					trait = incapable
				}
				modifier = {
					factor = 2
					trait = maimed
				}
				modifier = {
					factor = 1.5
					trait = wounded
				}
				modifier = {
					factor = 1.2
					trait = curse1
				}
				modifier = { 
					factor = 1.4
					trait = curse2
				}
				modifier = {
					factor = 1.6
					trait = curse3
				}
				character_event = { id = mageduel.22 }
				set_character_flag = mana1
			}
		}
	} } }
	option = {
		name = EVTOPTCmageduel.2 #Curse
		custom_tooltip = { 
		text = TOOLTIPcurse
		hidden_tooltip = {
		random_list = {
			25 = { character_event = { id = mageduel.23 } } #Curse1
			25 = { character_event = { id = mageduel.24 } } #Curse2
			25 = { character_event = { id = mageduel.25 } } #Curse3
			25 = { character_event = { id = mageduel.26 } } #Curse Miss
		}
		set_character_flag = mana2
	} } }
	option = {
		name = EVTOPTDmageduel.2 #Skip 0
		custom_tooltip = { 
		text = TOOLTIPskip
		hidden_tooltip = {
		character_event = { id = mageduel.9 } 
	} } }
}
#Concentration Attack 2
character_event = {
	id = mageduel.5
	desc = EVTDESCmageduel.5
	picture = GFX_evt_mage_duel

	is_triggered_only = yes	

	option = {
		name = EVTOPTBmageduel.2 #Magic Missle 2
		custom_tooltip = { 
		text = TOOLTIPmagic_missle
		hidden_tooltip = {
		random_list = {
			40 = {
				modifier = {
					factor = 1.8
					learning = 18
				}
				modifier = {
					factor = 1.5
					learning = 16
				}
				modifier = {
					factor = 1.4
					learning = 14
				}
				modifier = {
					factor = 1.2
					learning = 12
				}
				modifier = {
					factor = 1.1
					learning = 10
				}
				event_target:enemy = {
					 character_event = { id = mageduel.17 }
				}
				set_character_flag = mana0
			}
			60 = {
				modifier = {
					factor = 5
					has_character_flag = magicshield
				}
				modifier = {
					factor = 2
					trait = incapable
				}
				modifier = {
					factor = 2
					trait = maimed
				}
				modifier = {
					factor = 1.5
					trait = wounded
				}
				modifier = {
					factor = 1.2
					trait = curse1
				}
				modifier = { 
					factor = 1.4
					trait = curse2
				}
				modifier = {
					factor = 1.6
					trait = curse3
				}
				character_event = { id = mageduel.22 }
				set_character_flag = mana0
			}
		}
	} } }
	option = {
		name = EVTOPTCmageduel.2 #Curse 1
		custom_tooltip = { 
		text = TOOLTIPcurse
		hidden_tooltip = {
		random_list = {
			25 = { character_event = { id = mageduel.23 } } #Curse1
			25 = { character_event = { id = mageduel.24 } } #Curse2
			25 = { character_event = { id = mageduel.25 } } #Curse3
			25 = { character_event = { id = mageduel.26 } } #Curse Miss
		}
		set_character_flag = mana2
	} } }
	option = {
		name = EVTOPTDmageduel.2 #Skip 0
		custom_tooltip = { 
		text = TOOLTIPskip
		hidden_tooltip = {
		character_event = { id = mageduel.10 }  
	} } }
}
#Concentration Attack 1
character_event = {
	id = mageduel.6
	desc = EVTDESCmageduel.6
	picture = GFX_evt_mage_duel

	is_triggered_only = yes	

	option = {
		name = EVTOPTCmageduel.2 #Curse 1
		custom_tooltip = { 
		text = TOOLTIPcurse
		hidden_tooltip = {
		random_list = {
			25 = { character_event = { id = mageduel.23 } } #Curse1
			25 = { character_event = { id = mageduel.24 } } #Curse2
			25 = { character_event = { id = mageduel.25 } } #Curse3
			25 = { character_event = { id = mageduel.26 } } #Curse Miss
		}
		set_character_flag = mana0
	} } }
	option = {
		name = EVTOPTDmageduel.2 #Skip 0
		custom_tooltip = { 
		text = TOOLTIPskip
		hidden_tooltip = {
		character_event = { id = mageduel.11 }  
	} } }
}
#Concentration Defense 5		
character_event = {
	id = mageduel.7
	desc = EVTDESCmageduel.7
	picture = GFX_evt_mage_duel

	is_triggered_only = yes	

	option = {
		name = EVTOPTAmageduel.7 #Healing 5
		custom_tooltip = { 
		text = TOOLTIPhealing
		hidden_tooltip = {
		random_list = {
			90 = { character_event = { id = mageduel.27 } } #Healing
			10 = {
				modifier = {
					factor = 1.1
					learning = 18
				}
				modifier = {
					factor = 1.1
					learning = 16
				}
				modifier = {
					factor = 1.1
					learning = 14
				}
				modifier = {
					factor = 1.1
					learning = 12
				}
				modifier = {
					factor = 1.1
					learning = 10
				}
				character_event = { id = mageduel.28 } #Greater Healing
			}
		}
	} } }	
	option = {
		name = EVTOPTBmageduel.7 #Magic Shield 4
		custom_tooltip = { 
		text = TOOLTIPmagic_shield
		hidden_tooltip = {
		random_list = {
			80 = {
				modifier = { 
					factor = 1.5
					learning = 18
				}
				modifier = {
					factor = 1.4
					learning = 16
				}
				modifier = {
					factor = 1.3
					learning = 14
				}
				modifier = {
					factor = 1.2
					learning = 12
				}
				modifier = {
					factor = 1.1
					learning = 10
				}
			 	character_event = { id = mageduel.29 } #Success
			}
			20 = {
				modifier = {
					factor = 1.2
					trait = curse1
				}
				modifier = { 
					factor = 1.6
					trait = curse2
				}
				modifier = {
					factor = 2
					trait = curse3
				}
				modifier = {
					factor = 3
					trait = incapable
				}
				modifier = {
					factor = 2
					trait = maimed
				}
				modifier = {
					factor = 1.5
					trait = wounded
				}
				character_event = { id = mageduel.30 } #Fail
			}
		}
	} } }
	option = {
		name = EVTOPTCmageduel.7 #Counter Magic 3
		custom_tooltip = { 
		text = TOOLTIPcounter_magic
		hidden_tooltip = {
		random_list = {
			80 = {
				modifier = { 
					factor = 1.5
					learning = 18
				}
				modifier = {
					factor = 1.4
					learning = 16
				}
				modifier = {
					factor = 1.3
					learning = 14
				}
				modifier = {
					factor = 1.2
					learning = 12
				}
				modifier = {
					factor = 1.1
					learning = 10
				} 
				character_event = { id = mageduel.31 } #Success
			}
			20 = {
				modifier = {
					factor = 1.2
					trait = curse1
				}
				modifier = { 
					factor = 1.6
					trait = curse2
				}
				modifier = {
					factor = 2
					trait = curse3
				}
				modifier = {
					factor = 3
					trait = incapable
				}
				modifier = {
					factor = 2
					trait = maimed
				}
				modifier = {
					factor = 1.5
					trait = wounded
				} 
				character_event = { id = mageduel.32 } #Fail
			}
		}
	} } }
	option = {
		name = EVTOPTDmageduel.7 #Concentration 1
		custom_tooltip = { 
		text = TOOLTIPenergy_flow
		hidden_tooltip = {
		random_list = {
			90 = { character_event = { id = mageduel.33 } } #Success
			10 = { 
				modifier = {
					factor = 4
					trait = incapable
				}
				modifier = {
					factor = 3
					trait = maimed
				}
				modifier = {
					factor = 2
					trait = wounded
				} 
				character_event = { id = mageduel.34 } #Fail
			}
		} 
	} } }
}
#Concentration Defense 4		
character_event = {
	id = mageduel.8
	desc = EVTDESCmageduel.8
	picture = GFX_evt_mage_duel

	is_triggered_only = yes	

	option = {
		name = EVTOPTBmageduel.7 #Magic Shield 4
		custom_tooltip = { 
		text = TOOLTIPmagic_shield
		hidden_tooltip = {
		random_list = {
			80 = {
				modifier = { 
					factor = 1.5
					learning = 18
				}
				modifier = {
					factor = 1.4
					learning = 16
				}
				modifier = {
					factor = 1.3
					learning = 14
				}
				modifier = {
					factor = 1.2
					learning = 12
				}
				modifier = {
					factor = 1.1
					learning = 10
				}
			 	character_event = { id = mageduel.29 } #Success
			}
			20 = {
				modifier = {
					factor = 1.2
					trait = curse1
				}
				modifier = { 
					factor = 1.6
					trait = curse2
				}
				modifier = {
					factor = 2
					trait = curse3
				}
				modifier = {
					factor = 3
					trait = incapable
				}
				modifier = {
					factor = 2
					trait = maimed
				}
				modifier = {
					factor = 1.5
					trait = wounded
				}
				character_event = { id = mageduel.30 } #Fail
			}
		}
	} } }
	option = {
		name = EVTOPTCmageduel.7 #Counter Magic 3
		custom_tooltip = { 
		text = TOOLTIPcounter_magic
		hidden_tooltip = {
		random_list = {
			80 = {
				modifier = { 
					factor = 1.5
					learning = 18
				}
				modifier = {
					factor = 1.4
					learning = 16
				}
				modifier = {
					factor = 1.3
					learning = 14
				}
				modifier = {
					factor = 1.2
					learning = 12
				}
				modifier = {
					factor = 1.1
					learning = 10
				} 
				character_event = { id = mageduel.31 } #Success
			}
			20 = {
				modifier = {
					factor = 1.2
					trait = curse1
				}
				modifier = { 
					factor = 1.6
					trait = curse2
				}
				modifier = {
					factor = 2
					trait = curse3
				}
				modifier = {
					factor = 3
					trait = incapable
				}
				modifier = {
					factor = 2
					trait = maimed
				}
				modifier = {
					factor = 1.5
					trait = wounded
				} 
				character_event = { id = mageduel.32 } #Fail
			}
		}
	} } }
	option = {
		name = EVTOPTDmageduel.7 #Concentration 1
		custom_tooltip = { 
		text = TOOLTIPenergy_flow
		hidden_tooltip = {
		random_list = {
			90 = { character_event = { id = mageduel.33 } } #Success
			10 = { 
				modifier = {
					factor = 4
					trait = incapable
				}
				modifier = {
					factor = 3
					trait = maimed
				}
				modifier = {
					factor = 2
					trait = wounded
				} 
				character_event = { id = mageduel.34 } #Fail
			}
		} 
	} } }
}
#Concentration Defense 3		
character_event = {
	id = mageduel.9
	desc = EVTDESCmageduel.9
	picture = GFX_evt_mage_duel

	is_triggered_only = yes	

	option = {
		name = EVTOPTCmageduel.7 #Counter Magic 3
		custom_tooltip = { 
		text = TOOLTIPcounter_magic
		hidden_tooltip = {
		random_list = {
			80 = {
				modifier = { 
					factor = 1.5
					learning = 18
				}
				modifier = {
					factor = 1.4
					learning = 16
				}
				modifier = {
					factor = 1.3
					learning = 14
				}
				modifier = {
					factor = 1.2
					learning = 12
				}
				modifier = {
					factor = 1.1
					learning = 10
				} 
				character_event = { id = mageduel.31 } #Success
			}
			20 = {
				modifier = {
					factor = 1.2
					trait = curse1
				}
				modifier = { 
					factor = 1.6
					trait = curse2
				}
				modifier = {
					factor = 2
					trait = curse3
				}
				modifier = {
					factor = 3
					trait = incapable
				}
				modifier = {
					factor = 2
					trait = maimed
				}
				modifier = {
					factor = 1.5
					trait = wounded
				}
				character_event = { id = mageduel.32 } #Fail
			}
		}
	} } }
	option = {
		name = EVTOPTDmageduel.7 #Concentration 1
		custom_tooltip = { 
		text = TOOLTIPenergy_flow
		hidden_tooltip = {
		random_list = {
			90 = { character_event = { id = mageduel.33 } } #Success
			10 = { 
				modifier = {
					factor = 4
					trait = incapable
				}
				modifier = {
					factor = 3
					trait = maimed
				}
				modifier = {
					factor = 2
					trait = wounded
				} 
				character_event = { id = mageduel.34 } #Fail
			}
		} 
	} } }
}
#Concentration Defense 2		
character_event = {
	id = mageduel.10
	desc = EVTDESCmageduel.10
	picture = GFX_evt_mage_duel

	is_triggered_only = yes	

	option = {
		name = EVTOPTDmageduel.7 #Concentration 1
		custom_tooltip = { 
		text = TOOLTIPenergy_flow
		hidden_tooltip = {
		random_list = {
			90 = { character_event = { id = mageduel.33 } } #Success
			10 = { 
				modifier = {
					factor = 4
					trait = incapable
				}
				modifier = {
					factor = 3
					trait = maimed
				}
				modifier = {
					factor = 2
					trait = wounded
				} 
				character_event = { id = mageduel.34 } #Fail
			}
		} 
	} } }
}
#Concentration Defense 1		
character_event = {
	id = mageduel.11
	desc = EVTDESCmageduel.11
	picture = GFX_evt_mage_duel

	is_triggered_only = yes	

	option = {
		name = EVTOPTDmageduel.7 #Concentration 1
		custom_tooltip = { 
		text = TOOLTIPenergy_flow
		hidden_tooltip = {
		random_list = {
			90 = { character_event = { id = mageduel.33 } } #Success
			10 = { 
				modifier = {
					factor = 4
					trait = incapable
				}
				modifier = {
					factor = 3
					trait = maimed
				}
				modifier = {
					factor = 2
					trait = wounded
				} 
				character_event = { id = mageduel.34 } #Fail
			}
		} 
	} } }
}
#Alzur's Thunder Event Hit
character_event = {
	id = mageduel.12
	desc = EVTDESCmageduel.12
	picture = GFX_evt_mage_duel

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.12 #Hit Maimed
		trigger = {
			AND = {
				NOT = { trait = wounded }
				NOT = { trait = maimed }
				NOT = { trait = incapable }
			}
		}
		event_target:player = { character_event = { id = mageduel.13 } }	
	}
	option = {
		name = EVTOPTBmageduel.12 #Hit Incapable
		trigger = {
			AND = {
				trait = wounded
				NOT = { trait = maimed }
				NOT = { trait = incapable }
			}
		}
		event_target:player = { character_event = { id = mageduel.14 } }	
	}
	option = {
		name = EVTOPTCmageduel.12 #Hit Death
		trigger = {
			OR = {
				trait = maimed
				trait = incapable
			}
		}
		event_target:player = { character_event = { id = mageduel.15 } }	
	}
}
#Alzur's Thunder Maiming
character_event = {
	id = mageduel.13
	desc = EVTDESCmageduel.13
	picture = GFX_evt_alzurs_thunder

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.13
		event_target:enemy = { add_trait = maimed }
		if = {
			limit = {
				AND = {
					OR = {
						has_character_flag = mana5
						has_character_flag = mana4
						has_character_flag = mana3
						has_character_flag = mana2
						has_character_flag = mana1
						has_character_flag = mana0
					}
					has_character_flag = countermagic
				}
			}
			random_list = {
				33 = { character_event = { id = mageduel.35 } }
				67 = { 
					if = {
						limit = { has_character_flag = mana5 }
						character_event = { id = mageduel.7 }
					}
					if = {
						limit = { has_character_flag = mana4 }
						character_event = { id = mageduel.8 }
					}
					if = {
						limit = { has_character_flag = mana3 }
						character_event = { id = mageduel.9 }
					}
					if = {
						limit = { has_character_flag = mana2 }
						character_event = { id = mageduel.10 }
					}
					if = {
						limit = { has_character_flag = mana1 }
						character_event = { id = mageduel.11 }
					}
					if = {
						limit = { has_character_flag = mana0 }
						event_target:enemy = { character_event = { id = mageduel.36 } }
					}
				}
			}
		}
		if = {
			limit = { 
				has_character_flag = mana5
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.7 }
		}
		if = {
			limit = { 
				has_character_flag = mana4
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.8 }
		}
		if = {
			limit = { 
				has_character_flag = mana3
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.9 }
		}
		if = {
			limit = { 
				has_character_flag = mana2
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.10 }
		}
		if = {
			limit = { 
				has_character_flag = mana1
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.11 }
		}
		if = {
			limit = { 
				has_character_flag = mana0
				NOT = { has_character_flag = countermagic }
			}
			event_target:enemy = { character_event = { id = mageduel.36 } }
		}	

	}
}
#Alzur's Thunder Incapable
character_event = {
	id = mageduel.14
	desc = EVTDESCmageduel.14
	picture = GFX_evt_alzurs_thunder

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.14
		event_target:enemy = { remove_trait = wounded } 
		event_target:enemy = { add_trait = incapable }
		if = {
			limit = { has_character_flag = mana5 }
			character_event = { id = mageduel.7 }
		}
		if = {
			limit = { has_character_flag = mana4 }
			character_event = { id = mageduel.8 }
		}
		if = {
			limit = { has_character_flag = mana3 }
			character_event = { id = mageduel.9 }
		}
		if = {
			limit = { has_character_flag = mana2 }
			character_event = { id = mageduel.10 }
		}
		if = {
			limit = { has_character_flag = mana1 }
			character_event = { id = mageduel.11 }
		}
		if = {
			limit = { has_character_flag = mana0 }
			event_target:enemy = { character_event = { id = mageduel.36 } }
		}	
	}
}
#Alzur's Thunder Killing
character_event = {
	id = mageduel.15
	desc = EVTDESCmageduel.15
	picture = GFX_evt_magic_victory

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.15
		prestige = 100
		hidden_tooltip = {
			event_target:enemy = { 
				remove_trait = curse1
				remove_trait = curse2
				remove_trait = curse3
				remove_trait = magicshield
				remove_trait = countermagic
				clr_character_flag = magicshield
				clr_character_flag = countermagic
				clr_character_flag = mana0
				clr_character_flag = mana1
				clr_character_flag = mana2
				clr_character_flag = mana3
				clr_character_flag = mana4
				clr_character_flag = mana5
			}
			event_target:player = {
				remove_trait = curse1
				remove_trait = curse2
				remove_trait = curse3
				remove_trait = magicshield
				remove_trait = countermagic
				clr_character_flag = magicshield
				clr_character_flag = countermagic
				clr_character_flag = mana0
				clr_character_flag = mana1
				clr_character_flag = mana2
				clr_character_flag = mana3
				clr_character_flag = mana4
				clr_character_flag = mana5
			}
		}
	}
}	
#Alzur's Thunder Event Miss
character_event = {
	id = mageduel.16
	desc = EVTDESCmageduel.16
	picture = GFX_evt_magic_defense

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.16 #Miss
		if = {
			limit = { has_character_flag = mana5 }
			character_event = { id = mageduel.7 }
		}
		if = {
			limit = { has_character_flag = mana4 }
			character_event = { id = mageduel.8 }
		}
		if = {
			limit = { has_character_flag = mana3 }
			character_event = { id = mageduel.9 }
		}
		if = {
			limit = { has_character_flag = mana2 }
			character_event = { id = mageduel.10 }
		}
		if = {
			limit = { has_character_flag = mana1 }
			character_event = { id = mageduel.11 }
		}
		if = {
			limit = { has_character_flag = mana0 }
			event_target:enemy = { character_event = { id = mageduel.36 } }
		}	
	}
}
#Magic Missle Hit
character_event = {
	id = mageduel.17
	desc = EVTDESCmageduel.17
	picture = GFX_evt_mage_duel

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.17 #Hit Wounded
		trigger = {
			AND = {
				NOT = { trait = wounded }
				NOT = { trait = maimed }
				NOT = { trait = incapable }
			}
		}
		event_target:player = { character_event = { id = mageduel.18 } }	
	}
	option = {
		name = EVTOPTBmageduel.17 #Hit Maimed
		trigger = {
			AND = {
				trait = wounded
				NOT = { trait = maimed }
				NOT = { trait = incapable }
			}
		}
		event_target:player = { character_event = { id = mageduel.19 } }	
	}
	option = {
		name = EVTOPTCmageduel.17 #Hit Incapable
		trigger = {
			AND = {
				trait = maimed
				NOT = { trait = wounded }
				NOT = { trait = incapable }
			}
		}
		event_target:player = { character_event = { id = mageduel.20 } }	
	}
	option = {
		name = EVTOPTDmageduel.17 #Hit Death
		trigger = {
			AND = {
				trait = incapable
				NOT = { trait = wounded }
				NOT = { trait = maimed }
			}
		}
		event_target:player = { character_event = { id = mageduel.21 } }	
	}
}
#Magic Missle Wounded
character_event = {
	id = mageduel.18
	desc = EVTDESCmageduel.18
	picture = GFX_evt_magic_missile

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.18 #Hit wounded
		event_target:enemy = { add_trait = wounded }
		if = {
			limit = { has_character_flag = mana5 }
			character_event = { id = mageduel.7 }
		}
		if = {
			limit = { has_character_flag = mana4 }
			character_event = { id = mageduel.8 }
		}
		if = {
			limit = { has_character_flag = mana3 }
			character_event = { id = mageduel.9 }
		}
		if = {
			limit = { has_character_flag = mana2 }
			character_event = { id = mageduel.10 }
		}
		if = {
			limit = { has_character_flag = mana1 }
			character_event = { id = mageduel.11 }
		}
		if = {
			limit = { has_character_flag = mana0 }
			event_target:enemy = { character_event = { id = mageduel.36 } }
		}	
	}
}
#Magic Missle Maimed
character_event = {
	id = mageduel.19
	desc = EVTDESCmageduel.19
	picture = GFX_evt_magic_missile

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.19 #Hit Maimed
		event_target:enemy = { add_trait = maimed }
		if = {
			limit = { has_character_flag = mana5 }
			character_event = { id = mageduel.7 }
		}
		if = {
			limit = { has_character_flag = mana4 }
			character_event = { id = mageduel.8 }
		}
		if = {
			limit = { has_character_flag = mana3 }
			character_event = { id = mageduel.9 }
		}
		if = {
			limit = { has_character_flag = mana2 }
			character_event = { id = mageduel.10 }
		}
		if = {
			limit = { has_character_flag = mana1 }
			character_event = { id = mageduel.11 }
		}
		if = {
			limit = { has_character_flag = mana0 }
			event_target:enemy = { character_event = { id = mageduel.36 } }
		}	
	}
}
#Magic Missle Incapable
character_event = {
	id = mageduel.20
	desc = EVTDESCmageduel.20
	picture = GFX_evt_magic_missile

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.20 #Hit Incapable
		event_target:enemy = { 
			remove_trait = maimed
			add_trait = incapable
		}
		if = {
			limit = { has_character_flag = mana5 }
			character_event = { id = mageduel.7 }
		}
		if = {
			limit = { has_character_flag = mana4 }
			character_event = { id = mageduel.8 }
		}
		if = {
			limit = { has_character_flag = mana3 }
			character_event = { id = mageduel.9 }
		}
		if = {
			limit = { has_character_flag = mana2 }
			character_event = { id = mageduel.10 }
		}
		if = {
			limit = { has_character_flag = mana1 }
			character_event = { id = mageduel.11 }
		}
		if = {
			limit = { has_character_flag = mana0 }
			event_target:enemy = { character_event = { id = mageduel.36 } }
		}	
	}
}
#Magic Missle Death
character_event = {
	id = mageduel.21
	desc = EVTDESCmageduel.21
	picture = GFX_evt_magic_victory

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.21 #Hit Death
		prestige = 100
		hidden_tooltip = {
			event_target:enemy = { 
				remove_trait = curse1
				remove_trait = curse2
				remove_trait = curse3
				remove_trait = magicshield
				remove_trait = countermagic
				clr_character_flag = magicshield
				clr_character_flag = countermagic
				clr_character_flag = mana0
				clr_character_flag = mana1
				clr_character_flag = mana2
				clr_character_flag = mana3
				clr_character_flag = mana4
				clr_character_flag = mana5
			}
			event_target:player = {
				remove_trait = curse1
				remove_trait = curse2
				remove_trait = curse3
				remove_trait = magicshield
				remove_trait = countermagic
				clr_character_flag = magicshield
				clr_character_flag = countermagic
				clr_character_flag = mana0
				clr_character_flag = mana1
				clr_character_flag = mana2
				clr_character_flag = mana3
				clr_character_flag = mana4
				clr_character_flag = mana5
			}
		}
	}
}
#Magic Missle Miss
character_event = {
	id = mageduel.22
	desc = EVTDESCmageduel.22
	picture = GFX_evt_magic_defense

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.22 #Missed
		if = {
			limit = { has_character_flag = mana5 }
			character_event = { id = mageduel.7 }
		}
		if = {
			limit = { has_character_flag = mana4 }
			character_event = { id = mageduel.8 }
		}
		if = {
			limit = { has_character_flag = mana3 }
			character_event = { id = mageduel.9 }
		}
		if = {
			limit = { has_character_flag = mana2 }
			character_event = { id = mageduel.10 }
		}
		if = {
			limit = { has_character_flag = mana1 }
			character_event = { id = mageduel.11 }
		}
		if = {
			limit = { has_character_flag = mana0 }
			event_target:enemy = { character_event = { id = mageduel.36 } }
		}	
	}
}
#Curse 1
character_event = { 
	id = mageduel.23
	desc = EVTDESCmageduel.23
	picture = GFX_evt_curse

	is_triggered_only = yes

	option = { 
		name = EVTOPTAmageduel.23 #Curse1
		hidden_tooltip = {
			event_target:enemy = {
					remove_trait = curse2
					remove_trait = curse3
			}
		}
		event_target:enemy = { 
					add_trait = curse1
		}
		if = {
			limit = { has_character_flag = mana5 }
			character_event = { id = mageduel.7 }
		}
		if = {
			limit = { has_character_flag = mana4 }
			character_event = { id = mageduel.8 }
		}
		if = {
			limit = { has_character_flag = mana3 }
			character_event = { id = mageduel.9 }
		}
		if = {
			limit = { has_character_flag = mana2 }
			character_event = { id = mageduel.10 }
		}
		if = {
			limit = { has_character_flag = mana1 }
			character_event = { id = mageduel.11 }
		}
		if = {
			limit = { has_character_flag = mana0 }
			event_target:enemy = { character_event = { id = mageduel.36 } }
		}
	}
}		
#Curse 2
character_event = { 
	id = mageduel.24
	desc = EVTDESCmageduel.24
	picture = GFX_evt_curse

	is_triggered_only = yes

	option = { 
		name = EVTOPTAmageduel.24 #Curse2
		hidden_tooltip = {
			event_target:enemy = {
				remove_trait = curse1
				remove_trait = curse3
			}
		}
		event_target:enemy = { 
				add_trait = curse2
		}
		if = {
			limit = { has_character_flag = mana5 }
			character_event = { id = mageduel.7 }
		}
		if = {
			limit = { has_character_flag = mana4 }
			character_event = { id = mageduel.8 }
		}
		if = {
			limit = { has_character_flag = mana3 }
			character_event = { id = mageduel.9 }
		}
		if = {
			limit = { has_character_flag = mana2 }
			character_event = { id = mageduel.10 }
		}
		if = {
			limit = { has_character_flag = mana1 }
			character_event = { id = mageduel.11 }
		}
		if = {
			limit = { has_character_flag = mana0 }
			event_target:enemy = { character_event = { id = mageduel.36 } }
		}
	}
}
#Curse 3
character_event = { 
	id = mageduel.25
	desc = EVTDESCmageduel.25
	picture = GFX_evt_curse

	is_triggered_only = yes

	option = { 
		name = EVTOPTAmageduel.25 #Curse3
		hidden_tooltip = {
			event_target:enemy = {
				remove_trait = curse1
				remove_trait = curse2
			}
		}
		event_target:enemy = { 
				add_trait = curse3
		}
		if = {
			limit = { has_character_flag = mana5 }
			character_event = { id = mageduel.7 }
		}
		if = {
			limit = { has_character_flag = mana4 }
			character_event = { id = mageduel.8 }
		}
		if = {
			limit = { has_character_flag = mana3 }
			character_event = { id = mageduel.9 }
		}
		if = {
			limit = { has_character_flag = mana2 }
			character_event = { id = mageduel.10 }
		}
		if = {
			limit = { has_character_flag = mana1 }
			character_event = { id = mageduel.11 }
		}
		if = {
			limit = { has_character_flag = mana0 }
			event_target:enemy = { character_event = { id = mageduel.36 } }
		}
	}
}
#Curse miss
character_event = { 
	id = mageduel.26
	desc = EVTDESCmageduel.26
	picture = GFX_evt_magic_defense

	is_triggered_only = yes

	option = { 
		name = EVTOPTAmageduel.26 #Curse miss
		if = {
			limit = { has_character_flag = mana5 }
			character_event = { id = mageduel.7 }
		}
		if = {
			limit = { has_character_flag = mana4 }
			character_event = { id = mageduel.8 }
		}
		if = {
			limit = { has_character_flag = mana3 }
			character_event = { id = mageduel.9 }
		}
		if = {
			limit = { has_character_flag = mana2 }
			character_event = { id = mageduel.10 }
		}
		if = {
			limit = { has_character_flag = mana1 }
			character_event = { id = mageduel.11 }
		}
		if = {
			limit = { has_character_flag = mana0 }
			event_target:enemy = { character_event = { id = mageduel.36 } }
		}
	}
}
#Healing Success
character_event = {
	id = mageduel.27
	desc = EVTDESCmageduel.27
	picture = GFX_evt_healing
	
	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.27 #Healed
		if = {
			limit = { trait = wounded }
			remove_trait = wounded
		}
		if = {
			limit = {
				AND = { 
					NOT = { trait = incapable }
					trait = maimed 
				}
			}
			remove_trait = maimed
			add_trait = wounded
		}
		if = {
			limit = { 
				AND = {
					trait = incapable
					trait = maimed
				 }
			}
			remove_trait = incapable
		}
				if = {
			limit = { trait = wounded }
			remove_trait = wounded
		}
		if = {
			limit = { trait = curse1 }
			remove_trait = curse1
		}
		if = {
			limit = { trait = curse2 }
			remove_trait = curse2
			add_trait = curse1
		}
		if = {
			limit = { trait = curse3 }
			remove_trait = curse3
			add_trait = curse2
		}
		event_target:enemy = { character_event = { id = mageduel.36 } }
		clr_character_flag = mana0
		clr_character_flag = mana1
		clr_character_flag = mana2
		clr_character_flag = mana3
		clr_character_flag = mana4
		clr_character_flag = mana5	
	}
}
#Healing Great Success
character_event = {
	id = mageduel.28
	desc = EVTDESCmageduel.28
	picture = GFX_evt_healing
	
	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.28 #Healed
		if = {
			limit = { trait = wounded }
			remove_trait = wounded
		}
		if = {
			limit = {
				AND = {
					NOT = { trait = incapable }
					trait = maimed
				}
			}
			remove_trait = maimed
		}
		if = {
			limit = { 
				AND = {
					trait = incapable
					trait = maimed 
				}
			}
			remove_trait = incapable
			remove_trait = maimed
			add_trait = wounded
		}
		if = { 
			limit = { trait = curse1 }
			remove_trait = curse1
		}
		if = { 
			limit = { trait = curse2 }
			remove_trait = curse2
		}
		if = { 
			limit = { trait = curse3 }
			remove_trait = curse3
		} 
		event_target:enemy = { character_event = { id = mageduel.36 } }
		clr_character_flag = mana0
		clr_character_flag = mana1
		clr_character_flag = mana2
		clr_character_flag = mana3
		clr_character_flag = mana4
		clr_character_flag = mana5
	}
}
#Magic Shield Success
character_event = {
	id = mageduel.29
	desc = EVTDESCmageduel.29
	picture = GFX_evt_magic_shield
	
	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.29
		event_target:enemy = { set_character_flag = magicshield }
		event_target:player = { add_trait = magicshield }
		event_target:enemy = { character_event = { id = mageduel.36 } }
		clr_character_flag = mana0
		clr_character_flag = mana1
		clr_character_flag = mana2
		clr_character_flag = mana3
		clr_character_flag = mana4
		clr_character_flag = mana5
	}
}
#Magic Shield Fail
character_event = {
	id = mageduel.30
	desc = EVTDESCmageduel.30
	picture = GFX_evt_magic_shield
	
	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.30
		event_target:enemy = { character_event = { id = mageduel.36 } }
		clr_character_flag = mana0
		clr_character_flag = mana1
		clr_character_flag = mana2
		clr_character_flag = mana3
		clr_character_flag = mana4
		clr_character_flag = mana5
	}
}
#Countermagic Success
character_event = {
	id = mageduel.31
	desc = EVTDESCmageduel.31
	picture = GFX_evt_counter_magic
	
	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.31
		event_target:enemy = { set_character_flag = countermagic }
		event_target:player = { add_trait = countermagic }
		event_target:enemy = { character_event = { id = mageduel.36 } }
		clr_character_flag = mana0
		clr_character_flag = mana1
		clr_character_flag = mana2
		clr_character_flag = mana3
		clr_character_flag = mana4
		clr_character_flag = mana5
	}
}
#Countermagic Fail
character_event = {
	id = mageduel.32
	desc = EVTDESCmageduel.32
	picture = GFX_evt_counter_magic
	
	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.32
		event_target:enemy = { character_event = { id = mageduel.36 } }
		clr_character_flag = mana0
		clr_character_flag = mana1
		clr_character_flag = mana2
		clr_character_flag = mana3
		clr_character_flag = mana4
		clr_character_flag = mana5
	}
}
#Concentration Success
character_event = {
	id = mageduel.33
	desc = EVTDESCmageduel.33
	picture = GFX_evt_mage_duel
	
	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.33
		set_character_flag = concentration
		event_target:enemy = { character_event = { id = mageduel.36 } }
		clr_character_flag = mana0
		clr_character_flag = mana1
		clr_character_flag = mana2
		clr_character_flag = mana3
		clr_character_flag = mana4
		clr_character_flag = mana5
	}
}
#Concentration Fail
character_event = {
	id = mageduel.34
	desc = EVTDESCmageduel.34
	picture = GFX_evt_mage_duel
	
	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.34
		event_target:enemy = { character_event = { id = mageduel.36 } }
		clr_character_flag = mana0
		clr_character_flag = mana1
		clr_character_flag = mana2
		clr_character_flag = mana3
		clr_character_flag = mana4
		clr_character_flag = mana5
	}
}
#Countermagic Event
character_event = {
	id = mageduel.35
	desc = EVTDESCmageduel.35
	picture = GFX_evt_counter_missile

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.35
		event_target:player = {
			if = {
				limit = {
					NOt = { trait = wounded }
					trait = maimed
					NOT = {trait = incapable }
				}
				remove_trait = maimed
				add_trait = incapable
			}
			if = {
				limit = {
					trait = wounded
					NOT = { trait = maimed }
					NOT = { trait = incapable }
				}
				add_trait = maimed
			}
			if = {
				limit = {
					NOT = { trait = wounded }
					NOT = { trait = maimed }
					NOT = { trait = incapable }
				}
				add_trait = wounded
			}
		}
		hidden_tooltip = {
			event_target:enemy = {
				remove_trait = countermagic
			}
		}
		clr_character_flag = countermagic
		if = {
			limit = { has_character_flag = mana5 }
			character_event = { id = mageduel.7 }
		}
		if = {
			limit = { has_character_flag = mana4 }
			character_event = { id = mageduel.8 }
		}
		if = {
			limit = { has_character_flag = mana3 }
			character_event = { id = mageduel.9 }
		}
		if = {
			limit = { has_character_flag = mana2 }
			character_event = { id = mageduel.10 }
		}
		if = {
			limit = { has_character_flag = mana1 }
			character_event = { id = mageduel.11 }
		}
		if = {
			limit = { has_character_flag = mana0 }
			event_target:enemy = { character_event = { id = mageduel.36 } }
		}
	}
}
##############################################################
#
#			ENEMY'S TURN
#
##############################################################
#Concentration Phase [Enemy]
character_event = {
	id = mageduel.36
	desc = EVTDESCmageduel.1
	picture = GFX_evt_mage_duel

	is_triggered_only = yes

	immediate = { 
		event_target:player = { clr_character_flag = magicshield }
		remove_trait = magicshield
		clr_character_flag = mana0
	 }

	option = {
		name = EVTOPTAmageduel.1
		random_list = {
			20 = {
				modifier = {
					factor = 1.5
					learning = 18
				}
				modifier = {
					factor = 1.5
					learning = 16
				}
				modifier = {
					factor = 1.5
					learning = 14
				}
				modifier = {
					factor = 1.5
					learning = 12
				}
				modifier = {
					factor = 1.5
					learning = 10
				}
				ROOT = { character_event = { id = mageduel.37 } }
			}
			20 = {
				modifier = {
					factor = 2
					learning = 16
				}
				modifier = {
					factor = 1.5
					NOT = { learning = 18 }
				}
				modifier = {
					factor = 1.5
					learning = 14
				}
				modifier = {
					factor = 1.5
					learning = 12
				}
				modifier = {
					factor = 1.5
					learning = 10
				}
				if = {
					limit = {
						NOT = { has_character_flag = concentration }
					}
					ROOT = { character_event = { id = mageduel.38 } }
				}
				if = {
					limit = {
						has_character_flag = concentration
					}
					ROOT = { character_event = { id = mageduel.37 } }
					clr_character_flag = concentration
				}
			}
			20 = {
				modifier = {
					factor = 2.5
					learning = 14
				}
				modifier = {
					factor = 1.5
					NOT = { learning = 18 }
				}
				modifier = {
					factor = 1.5
					NOT = { learning = 16 }
				}
				modifier = {
					factor = 1.5
					learning = 12
				}
				modifier = {
					factor = 1.5
					learning = 10
				}
				if = {
					limit = {
						NOT = { has_character_flag = concentration }
					}
					ROOT = { character_event = { id = mageduel.39 } }
				}
				if = {
					limit = {
						has_character_flag = concentration
					}
					ROOT = { character_event = { id = mageduel.38 } }
					clr_character_flag = concentration
				}
			}
			20 = {
				modifier = {
					factor = 3
					learning = 12
				}
				modifier = {
					factor = 1.5
					NOT = { learning = 18 }
				}
				modifier = {
					factor = 1.5
					NOT = { learning = 16 }
				}
				modifier = {
					factor = 1.5
					NOT = { learning = 14 }
				}
				modifier = {
					factor = 1.5
					learning = 10
				}
				if = {
					limit = {
						NOT = { has_character_flag = concentration }
					}
					ROOT = { character_event = { id = mageduel.40 } }
				}
				if = {
					limit = {
						has_character_flag = concentration
					}
					ROOT = { character_event = { id = mageduel.39 } }
					clr_character_flag = concentration
				}
			}
			20 = {
				modifier = {
					factor = 3
					learning = 10
				}
				modifier = {
					factor = 1.5
					NOT = { learning = 18 }
				}
				modifier = {
					factor = 1.5
					NOT = { learning = 16 }
				}
				modifier = {
					factor = 1.5
					NOT = { learning = 14 }
				}
				modifier = {
					factor = 1.5
					NOT = { learning = 12 }
				}
				if = {
					limit = {
						NOT = { has_character_flag = concentration }
					}
					ROOT = { character_event = { id = mageduel.41 } }
				}
				if = {
					limit = {
						has_character_flag = concentration
					}
					ROOT = { character_event = { id = mageduel.40 } }
					clr_character_flag = concentration
				}
			}
		}
	}
}
#Concentration Attack 5
character_event = {
	id = mageduel.37
	desc = EVTDESCmageduel.2
	picture = GFX_evt_mage_duel

	is_triggered_only = yes	

	option = {
		name = EVTOPTAmageduel.2 #Alzur's Thunder 3
		trigger = { 
			NOT = { has_character_flag = magicshield }
			NOT = { trait = incapable }
		 }
		random_list = {
			30 = {
				modifier = {
					factor = 1.8
					learning = 18
				}
				modifier = {
					factor = 1.6
					learning = 16
				}
				modifier = {
					factor = 1.3
					learning = 14
				}
				modifier = {
					factor = 1.2
					learning = 12
				}
				modifier = {
					factor = 1.1
					learning = 10
				}
				event_target:player = {
					 character_event = { id = mageduel.47 }
				}
				set_character_flag = mana2
			}
			70 = {
				modifier = {
					factor = 5
					has_character_flag = magicshield
				}
				modifier = {
					factor = 3
					trait = incapable
				}
				modifier = {
					factor = 2
					trait = maimed
				}
				modifier = {
					factor = 1.5
					trait = wounded
				}
				event_target:player = {
					character_event = { id = mageduel.71 }
				}
				set_character_flag = mana2
			}
		}
	}
	option = {
		name = EVTOPTBmageduel.2 #Magic Missle 2
		random_list = {
			50 = {
				modifier = {
					factor = 1.1
					learning = 18
				}
				modifier = {
					factor = 1.1
					learning = 16
				}
				modifier = {
					factor = 1.1
					learning = 14
				}
				modifier = {
					factor = 1.1
					learning = 12
				}
				modifier = {
					factor = 1.1
					learning = 10
				}
				event_target:player = {
					 character_event = { id = mageduel.52 }
				}
				set_character_flag = mana3
			}
			50 = {
				modifier = {
					factor = 5
					has_character_flag = magicshield
				}
				modifier = {
					factor = 3
					trait = incapable
				}
				modifier = {
					factor = 2
					trait = maimed
				}
				modifier = {
					factor = 1.5
					trait = wounded
				}
				event_target:player = {
					 character_event = { id = mageduel.73 }
				}
				set_character_flag = mana3
			}
		}
	}
	option = {
		name = EVTOPTCmageduel.2 #Curse 1
		trigger = {
			event_target:player = { NOT = { trait = curse3 } }
		}
		random_list = {
			25 = { event_target:player = { character_event = { id = mageduel.82 } } } #Curse1
			25 = { event_target:player = { character_event = { id = mageduel.83 } } } #Curse2
			25 = { event_target:player = { character_event = { id = mageduel.84 } } } #Curse3
			25 = { event_target:player = { character_event = { id = mageduel.85 } } } #Curse Miss
		}
		set_character_flag = mana4
	}
	option = {
		name = EVTOPTDmageduel.2 #Skip 0
		character_event = { id = mageduel.42 }
	}
}
#Concentration Attack 4
character_event = {
	id = mageduel.38
	desc = EVTDESCmageduel.3
	picture = GFX_evt_mage_duel

	is_triggered_only = yes	

	option = {
		name = EVTOPTAmageduel.2 #Alzur's Thunder 3
		trigger = { 
			NOT = { has_character_flag = magicshield }
			NOT = { trait = incapable }
		 }
		random_list = {
			30 = {
				modifier = {
					factor = 1.8
					learning = 18
				}
				modifier = {
					factor = 1.6
					learning = 16
				}
				modifier = {
					factor = 1.3
					learning = 14
				}
				modifier = {
					factor = 1.2
					learning = 12
				}
				modifier = {
					factor = 1.1
					learning = 10
				}
				event_target:player = {
					 character_event = { id = mageduel.47 }
				}
				set_character_flag = mana1
			}
			70 = {
				modifier = {
					factor = 5
					has_character_flag = magicshield
				}
				modifier = {
					factor = 3
					trait = incapable
				}
				modifier = {
					factor = 2
					trait = maimed
				}
				modifier = {
					factor = 1.5
					trait = wounded
				}
				event_target:player = {
					character_event = { id = mageduel.71 }
				}
				set_character_flag = mana1
			}
		}
	}
	option = {
		name = EVTOPTBmageduel.2 #Magic Missle 2
		random_list = {
			50 = {
				modifier = {
					factor = 1.1
					learning = 18
				}
				modifier = {
					factor = 1.1
					learning = 16
				}
				modifier = {
					factor = 1.1
					learning = 14
				}
				modifier = {
					factor = 1.1
					learning = 12
				}
				modifier = {
					factor = 1.1
					learning = 10
				}
				event_target:player = {
					 character_event = { id = mageduel.52 }
				}
				set_character_flag = mana2
			}
			50 = {
				modifier = {
					factor = 5
					has_character_flag = magicshield
				}
				modifier = {
					factor = 3
					trait = incapable
				}
				modifier = {
					factor = 2
					trait = maimed
				}
				modifier = {
					factor = 1.5
					trait = wounded
				}
				event_target:player = {
					 character_event = { id = mageduel.73 }
				}
				set_character_flag = mana2
			}
		}
	}
	option = {
		name = EVTOPTCmageduel.2 #Curse 1
		trigger = {
			event_target:player = { NOT = { trait = curse3 } }
		}
		random_list = {
			25 = { event_target:player = { character_event = { id = mageduel.82 } } } #Curse1
			25 = { event_target:player = { character_event = { id = mageduel.83 } } } #Curse2
			25 = { event_target:player = { character_event = { id = mageduel.84 } } } #Curse3
			25 = { event_target:player = { character_event = { id = mageduel.85 } } } #Curse Miss
		}
		set_character_flag = mana3
	}
	option = {
		name = EVTOPTDmageduel.2 #Skip 0
		character_event = { id = mageduel.43 } 
	}
}
#Concentration Attack 3
character_event = {
	id = mageduel.39
	desc = EVTDESCmageduel.4
	picture = GFX_evt_mage_duel

	is_triggered_only = yes	

	option = {
		name = EVTOPTAmageduel.2 #Alzur's Thunder 3
		trigger = { 
			NOT = { has_character_flag = magicshield }
			NOT = { trait = incapable }
		 }
		random_list = {
			20 = {
				modifier = {
					factor = 1.8
					learning = 18
				}
				modifier = {
					factor = 1.6
					learning = 16
				}
				modifier = {
					factor = 1.3
					learning = 14
				}
				modifier = {
					factor = 1.2
					learning = 12
				}
				modifier = {
					factor = 1.1
					learning = 10
				}
				event_target:player = {
					 character_event = { id = mageduel.47 }
				}
				set_character_flag = mana0
			}
			80 = {
				modifier = {
					factor = 5
					has_character_flag = magicshield
				}
				modifier = {
					factor = 3
					trait = incapable
				}
				modifier = {
					factor = 2
					trait = maimed
				}
				modifier = {
					factor = 1.5
					trait = wounded
				}
				event_target:player = {
					character_event = { id = mageduel.71 }
				}
				set_character_flag = mana0
			}
		}
	}
	option = {
		name = EVTOPTBmageduel.2 #Magic Missle 2
		random_list = {
			50 = {
				modifier = {
					factor = 1.1
					learning = 18
				}
				modifier = {
					factor = 1.1
					learning = 16
				}
				modifier = {
					factor = 1.1
					learning = 14
				}
				modifier = {
					factor = 1.1
					learning = 12
				}
				modifier = {
					factor = 1.1
					learning = 10
				}
				event_target:player = {
					 character_event = { id = mageduel.52 }
				}
				set_character_flag = mana1
			}
			50 = {
				modifier = {
					factor = 5
					has_character_flag = magicshield
				}
				modifier = {
					factor = 3
					trait = incapable
				}
				modifier = {
					factor = 2
					trait = maimed
				}
				modifier = {
					factor = 1.5
					trait = wounded
				}
				event_target:player = {
					 character_event = { id = mageduel.73 }
				}
				set_character_flag = mana1
			}
		}
	}
	option = {
		name = EVTOPTCmageduel.2 #Curse 1
		trigger = {
			event_target:player = { NOT = { trait = curse3 } }
		}
		random_list = {
			25 = { event_target:player = { character_event = { id = mageduel.82 } } } #Curse1
			25 = { event_target:player = { character_event = { id = mageduel.83 } } } #Curse2
			25 = { event_target:player = { character_event = { id = mageduel.84 } } } #Curse3
			25 = { event_target:player = { character_event = { id = mageduel.85 } } } #Curse Miss
		}
		set_character_flag = mana2
	}
	option = {
		name = EVTOPTDmageduel.2 #Skip 0
		character_event = { id = mageduel.44 } 
	}
}
#Concentration Attack 2
character_event = {
	id = mageduel.40
	desc = EVTDESCmageduel.5
	picture = GFX_evt_mage_duel

	is_triggered_only = yes	

	option = {
		name = EVTOPTBmageduel.2 #Magic Missle 2
		random_list = {
			50 = {
				modifier = {
					factor = 1.1
					learning = 18
				}
				modifier = {
					factor = 1.1
					learning = 16
				}
				modifier = {
					factor = 1.1
					learning = 14
				}
				modifier = {
					factor = 1.1
					learning = 12
				}
				modifier = {
					factor = 1.1
					learning = 10
				}
				event_target:player = {
					 character_event = { id = mageduel.52 }
				}
				set_character_flag = mana0
			}
			50 = {
				modifier = {
					factor = 5
					has_character_flag = magicshield
				}
				modifier = {
					factor = 3
					trait = incapable
				}
				modifier = {
					factor = 2
					trait = maimed
				}
				modifier = {
					factor = 1.5
					trait = wounded
				}
				event_target:player = {
					 character_event = { id = mageduel.73 }
				}
				set_character_flag = mana0
			}
		}
	}
	option = {
		name = EVTOPTCmageduel.2 #Curse 1
		trigger = {
			event_target:player = { NOT = { trait = curse3 } }
		}
		random_list = {
			25 = { event_target:player = { character_event = { id = mageduel.82 } } } #Curse1
			25 = { event_target:player = { character_event = { id = mageduel.83 } } } #Curse2
			25 = { event_target:player = { character_event = { id = mageduel.84 } } } #Curse3
			25 = { event_target:player = { character_event = { id = mageduel.85 } } } #Curse Misss
		}
		set_character_flag = mana1
	}
	option = {
		name = EVTOPTDmageduel.2 #Skip 0
		character_event = { id = mageduel.45 }  
	}
}
#Concentration Attack 1
character_event = {
	id = mageduel.41
	desc = EVTDESCmageduel.6
	picture = GFX_evt_mage_duel

	is_triggered_only = yes	

	option = {
		name = EVTOPTCmageduel.2 #Curse 1
		trigger = {
			event_target:player = { NOT = { trait = curse3 } }
		}
		random_list = {
			25 = { event_target:player = { character_event = { id = mageduel.82 } } } #Curse1
			25 = { event_target:player = { character_event = { id = mageduel.83 } } } #Curse2
			25 = { event_target:player = { character_event = { id = mageduel.84 } } } #Curse3
			25 = { event_target:player = { character_event = { id = mageduel.85 } } } #Curse Miss
		}
		set_character_flag = mana0
	}
	option = {
		name = EVTOPTDmageduel.2 #Skip 0
		character_event = { id = mageduel.46 }  
	}
}
#Concentration Defense 5		
character_event = {
	id = mageduel.42
	desc = EVTDESCmageduel.7
	picture = GFX_evt_mage_duel

	is_triggered_only = yes	

	option = {
		name = EVTOPTAmageduel.7 #Healing 5
		trigger = { 
			OR = {
				trait = wounded
				trait = maimed
				trait = incapable
			}
		}
		random_list = {
			90 = { event_target:player = {
				character_event = { id = mageduel.74 } #Healing
				 }
			} 
			10 = {
				modifier = {
					factor = 1.1
					learning = 18
				}
				modifier = {
					factor = 1.1
					learning = 16
				}
				modifier = {
					factor = 1.1
					learning = 14
				}
				modifier = {
					factor = 1.1
					learning = 12
				}
				modifier = {
					factor = 1.1
					learning = 10
				}
				event_target:player = { 
					character_event = { id = mageduel.75 } #Greater Healing
				} 
			}
		}
	}	
	option = {
		name = EVTOPTBmageduel.7 #Magic Shield 4
		random_list = {
			90 = { event_target:player = { character_event = { id = mageduel.76 } } } #Success
			10 = { event_target:player = { character_event = { id = mageduel.77 } } } #Fail
		}
	}
	option = {
		name = EVTOPTCmageduel.7 #Counter Magic 3
		trigger = { event_target:player = { NOT = { has_character_flag = countermagic } } }
		random_list = {
			90 = { event_target:player = { character_event = { id = mageduel.78 } } } #Success
			10 = { event_target:player = { character_event = { id = mageduel.79 } } } #Fail
		}
	}
	option = {
		name = EVTOPTDmageduel.7 #Concentration 1
		trigger = { 
			OR = {
				has_character_flag = mana3
				has_character_flag = mana2
				has_character_flag = mana1
				has_character_flag = mana0
			}
		}
		random_list = {
			90 = { event_target:player = { character_event = { id = mageduel.80 } } } #Success
			10 = { event_target:player = { character_event = { id = mageduel.81 } } } #Fail
		} 
	}
}
#Concentration Defense 4		
character_event = {
	id = mageduel.43
	desc = EVTDESCmageduel.8
	picture = GFX_evt_mage_duel

	is_triggered_only = yes	

	option = {
		name = EVTOPTBmageduel.7 #Magic Shield 4
		random_list = {
			90 = { event_target:player = { character_event = { id = mageduel.76 } } } #Success
			10 = { event_target:player = { character_event = { id = mageduel.77 } } } #Fail
		}
	}
	option = {
		name = EVTOPTCmageduel.7 #Counter Magic 3
		trigger = { event_target:player = { NOT = { has_character_flag = countermagic } } }
		random_list = {
			90 = { event_target:player = { character_event = { id = mageduel.78 } } } #Success
			10 = { event_target:player = { character_event = { id = mageduel.79 } } } #Fail
		}
	}
	option = {
		name = EVTOPTDmageduel.7 #Concentration 1
		trigger = { 
			OR = {
				has_character_flag = mana3
				has_character_flag = mana2
				has_character_flag = mana1
				has_character_flag = mana0
			}
		}
		random_list = {
			90 = { event_target:player = { character_event = { id = mageduel.80 } } } #Success
			10 = { event_target:player = { character_event = { id = mageduel.81 } } } #Fail
		}  
	}
}
#Concentration Defense 3		
character_event = {
	id = mageduel.44
	desc = EVTDESCmageduel.9
	picture = GFX_evt_mage_duel

	is_triggered_only = yes	

	option = {
		name = EVTOPTCmageduel.7 #Counter Magic 3
		trigger = { event_target:player = { NOT = { has_character_flag = countermagic } } }
		random_list = {
			90 = { event_target:player = { character_event = { id = mageduel.78 } } } #Success
			10 = { event_target:player = { character_event = { id = mageduel.79 } } } #Fail
		}
	}
	option = {
		name = EVTOPTDmageduel.7 #Concentration 1
		random_list = {
			90 = { event_target:player = { character_event = { id = mageduel.80 } } } #Success
			10 = { event_target:player = { character_event = { id = mageduel.81 } } } #Fail
		}  
	}
}
#Concentration Defense 2		
character_event = {
	id = mageduel.45
	desc = EVTDESCmageduel.10
	picture = GFX_evt_mage_duel

	is_triggered_only = yes	

	option = {
		name = EVTOPTDmageduel.7 #Concentration 1
		random_list = {
			90 = { event_target:player = { character_event = { id = mageduel.80 } } } #Success
			10 = { event_target:player = { character_event = { id = mageduel.81 } } } #Fail
		}  
	}
}
#Concentration Defense 1		
character_event = {
	id = mageduel.46
	desc = EVTDESCmageduel.11
	picture = GFX_evt_mage_duel

	is_triggered_only = yes	

	option = {
		name = EVTOPTDmageduel.7 #Concentration 1
		random_list = {
			90 = { event_target:player = { character_event = { id = mageduel.80 } } } #Success
			10 = { event_target:player = { character_event = { id = mageduel.81 } } } #Fail
		}  
	}
}
#Alzur's Thunder Event Hit
character_event = {
	id = mageduel.47
	desc = EVTDESCmageduel.47
	picture = GFX_evt_mage_duel

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.47 #Hit Maimed
		trigger = {
			AND = {
				NOT = { trait = wounded }
				NOT = { trait = maimed }
				NOT = { trait = incapable }
			}
		}
		add_trait = maimed
		event_target:enemy = { character_event = { id = mageduel.48 } }	
	}
	option = {
		name = EVTOPTBmageduel.47 #Hit Incapable
		trigger = {
			AND = {
				trait = wounded
				NOT = { trait = maimed }
				NOT = { trait = incapable }
			}
		}
		remove_trait = wounded
		add_trait = incapable
		event_target:enemy = { character_event = { id = mageduel.49 } }	
	}
	option = {
		name = EVTOPTCmageduel.47 #Hit Death
		trigger = {
			OR = {
				trait = maimed
				trait = incapable
			}
		}
		event_target:player = { character_event = { id = mageduel.50 } }	
	}
}
#Alzur's Thunder Maiming
character_event = {
	id = mageduel.48
	desc = EVTDESCmageduel.13
	picture = GFX_evt_mage_duel

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.13
		if = {
			limit = {
				AND = {
					OR = {
						has_character_flag = mana5
						has_character_flag = mana4
						has_character_flag = mana3
						has_character_flag = mana2
						has_character_flag = mana1
						has_character_flag = mana0
					}
					has_character_flag = countermagic
				}
			}
			random_list = {
				33 = { event_target:player = { character_event = { id = mageduel.72 } }
				}
				67 = { 
					if = {
						limit = { has_character_flag = mana5 }
						character_event = { id = mageduel.42 }
					}
					if = {
						limit = { has_character_flag = mana4 }
						character_event = { id = mageduel.43 }
					}
					if = {
						limit = { has_character_flag = mana3 }
						character_event = { id = mageduel.44 }
					}
					if = {
						limit = { has_character_flag = mana2 }
						character_event = { id = mageduel.45 }
					}
					if = {
						limit = { has_character_flag = mana1 }
						character_event = { id = mageduel.46 }
					}
					if = {
						limit = { has_character_flag = mana0 }
						event_target:player = { character_event = { id = mageduel.1 } }
					}
				}
			}
		}
		if = {
			limit = { 
				has_character_flag = mana5
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.42 }
		}
		if = {
			limit = { 
				has_character_flag = mana4
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.43 }
		}
		if = {
			limit = { 
				has_character_flag = mana3
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.44 }
		}
		if = {
			limit = { 
				has_character_flag = mana2
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.45 }
		}
		if = {
			limit = { 
				has_character_flag = mana1
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.46 }
		}
		if = {
			limit = { 
				has_character_flag = mana0
				NOT = { has_character_flag = countermagic }
			}
			event_target:player = { character_event = { id = mageduel.1 } }
		}	

	}
}
#Alzur's Thunder Incapable
character_event = {
	id = mageduel.49
	desc = EVTDESCmageduel.14
	picture = GFX_evt_mage_duel

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.14
		if = {
			limit = {
				AND = {
					OR = {
						has_character_flag = mana5
						has_character_flag = mana4
						has_character_flag = mana3
						has_character_flag = mana2
						has_character_flag = mana1
						has_character_flag = mana0
					}
					has_character_flag = countermagic
				}
			}
			random_list = {
				33 = { event_target:player = {
						character_event = { id = mageduel.72 }
					}
				}
				67 = { 
					if = {
						limit = { has_character_flag = mana5 }
						character_event = { id = mageduel.42 }
					}
					if = {
						limit = { has_character_flag = mana4 }
						character_event = { id = mageduel.43 }
					}
					if = {
						limit = { has_character_flag = mana3 }
						character_event = { id = mageduel.44 }
					}
					if = {
						limit = { has_character_flag = mana2 }
						character_event = { id = mageduel.45 }
					}
					if = {
						limit = { has_character_flag = mana1 }
						character_event = { id = mageduel.46 }
					}
					if = {
						limit = { has_character_flag = mana0 }
						event_target:player = { character_event = { id = mageduel.1 } }
					}
				}
			}
		}
		if = {
			limit = { 
				has_character_flag = mana5
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.42 }
		}
		if = {
			limit = { 
				has_character_flag = mana4
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.43 }
		}
		if = {
			limit = { 
				has_character_flag = mana3
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.44 }
		}
		if = {
			limit = { 
				has_character_flag = mana2
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.45 }
		}
		if = {
			limit = { 
				has_character_flag = mana1
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.46 }
		}
		if = {
			limit = { 
				has_character_flag = mana0
				NOT = { has_character_flag = countermagic }
			}
			event_target:player = { character_event = { id = mageduel.1 } }
		}	
	}
}
#Alzur's Thunder Killing
character_event = {
	id = mageduel.50
	desc = EVTDESCmageduel.50
	picture = GFX_evt_battle_lost

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.50
		prestige = -100
		hidden_tooltip = {
			event_target:enemy = { 
				remove_trait = curse1
				remove_trait = curse2
				remove_trait = curse3
				remove_trait = magicshield
				remove_trait = countermagic
				clr_character_flag = magicshield
				clr_character_flag = countermagic
				clr_character_flag = mana0
				clr_character_flag = mana1
				clr_character_flag = mana2
				clr_character_flag = mana3
				clr_character_flag = mana4
				clr_character_flag = mana5
			}
			event_target:player = {
				remove_trait = curse1
				remove_trait = curse2
				remove_trait = curse3
				remove_trait = magicshield
				remove_trait = countermagic
				clr_character_flag = magicshield
				clr_character_flag = countermagic
				clr_character_flag = mana0
				clr_character_flag = mana1
				clr_character_flag = mana2
				clr_character_flag = mana3
				clr_character_flag = mana4
				clr_character_flag = mana5
			}
		}
	}
}	
#Alzur's Thunder Event Miss
character_event = {
	id = mageduel.51
	desc = EVTDESCmageduel.16
	picture = GFX_evt_mage_duel

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.16 #Miss
		if = {
			limit = { has_character_flag = mana5 }
			character_event = { id = mageduel.42 }
		}
		if = {
			limit = { has_character_flag = mana4 }
			character_event = { id = mageduel.43 }
		}
		if = {
			limit = { has_character_flag = mana3 }
			character_event = { id = mageduel.44 }
		}
		if = {
			limit = { has_character_flag = mana2 }
			character_event = { id = mageduel.45 }
		}
		if = {
			limit = { has_character_flag = mana1 }
			character_event = { id = mageduel.46 }
		}
		if = {
			limit = { has_character_flag = mana0 }
			event_target:player = { character_event = { id = mageduel.1 } }
		}	
	}
}
#Magic Missle Hit
character_event = {
	id = mageduel.52
	desc = EVTDESCmageduel.52
	picture = GFX_evt_mage_duel

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.52 #Hit Wounded
		trigger = {
			AND = {
				NOT = { trait = wounded }
				NOT = { trait = maimed }
				NOT = { trait = incapable }
			}
		}
		add_trait = wounded
		event_target:enemy = { character_event = { id = mageduel.53 } }	
	}
	option = {
		name = EVTOPTBmageduel.52 #Hit Maimed
		trigger = {
			AND = {
				trait = wounded
				NOT = { trait = maimed }
				NOT = { trait = incapable }
			}
		}
		add_trait = maimed
		event_target:enemy = { character_event = { id = mageduel.54 } }	
	}
	option = {
		name = EVTOPTCmageduel.52 #Hit Incapable
		trigger = {
			AND = {
				trait = maimed
				NOT = { trait = wounded }
				NOT = { trait = incapable }
			}
		}
		remove_trait = maimed
		add_trait = incapable
		event_target:enemy = { character_event = { id = mageduel.55 } }	
	}
	option = {
		name = EVTOPTDmageduel.52 #Hit Death
		trigger = {
			AND = {
				trait = incapable
				NOT = { trait = wounded }
				NOT = { trait = maimed }
			}
		}
		event_target:player = { character_event = { id = mageduel.56 } }	
	}
}
#Magic Missle Wounded
character_event = {
	id = mageduel.53
	desc = EVTDESCmageduel.18
	picture = GFX_evt_mage_duel

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.18 #Hit wounded
		if = {
			limit = {
				AND = {
					OR = {
						has_character_flag = mana5
						has_character_flag = mana4
						has_character_flag = mana3
						has_character_flag = mana2
						has_character_flag = mana1
						has_character_flag = mana0
					}
					has_character_flag = countermagic
				}
			}
			random_list = {
				33 = { event_target:player = {
						character_event = { id = mageduel.72 }
					}
				}
				67 = { 
					if = {
						limit = { has_character_flag = mana5 }
						character_event = { id = mageduel.42 }
					}
					if = {
						limit = { has_character_flag = mana4 }
						character_event = { id = mageduel.43 }
					}
					if = {
						limit = { has_character_flag = mana3 }
						character_event = { id = mageduel.44 }
					}
					if = {
						limit = { has_character_flag = mana2 }
						character_event = { id = mageduel.45 }
					}
					if = {
						limit = { has_character_flag = mana1 }
						character_event = { id = mageduel.46 }
					}
					if = {
						limit = { has_character_flag = mana0 }
						event_target:player = { character_event = { id = mageduel.1 } }
					}
				}
			}
		}
		if = {
			limit = { 
				has_character_flag = mana5
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.42 }
		}
		if = {
			limit = { 
				has_character_flag = mana4
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.43 }
		}
		if = {
			limit = { 
				has_character_flag = mana3
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.44 }
		}
		if = {
			limit = { 
				has_character_flag = mana2
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.45 }
		}
		if = {
			limit = { 
				has_character_flag = mana1
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.46 }
		}
		if = {
			limit = { 
				has_character_flag = mana0
				NOT = { has_character_flag = countermagic }
			}
			event_target:player = { character_event = { id = mageduel.1 } }
		}	
	}
}
#Magic Missle Maimed
character_event = {
	id = mageduel.54
	desc = EVTDESCmageduel.19
	picture = GFX_evt_mage_duel

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.19 #Hit Maimed
		if = {
			limit = {
				AND = {
					OR = {
						has_character_flag = mana5
						has_character_flag = mana4
						has_character_flag = mana3
						has_character_flag = mana2
						has_character_flag = mana1
						has_character_flag = mana0
					}
					has_character_flag = countermagic
				}
			}
			random_list = {
				33 = { event_target:player = {
						character_event = { id = mageduel.72 }
					}
				}
				67 = { 
					if = {
						limit = { has_character_flag = mana5 }
						character_event = { id = mageduel.42 }
					}
					if = {
						limit = { has_character_flag = mana4 }
						character_event = { id = mageduel.43 }
					}
					if = {
						limit = { has_character_flag = mana3 }
						character_event = { id = mageduel.44 }
					}
					if = {
						limit = { has_character_flag = mana2 }
						character_event = { id = mageduel.45 }
					}
					if = {
						limit = { has_character_flag = mana1 }
						character_event = { id = mageduel.46 }
					}
					if = {
						limit = { has_character_flag = mana0 }
						event_target:player = { character_event = { id = mageduel.1 } }
					}
				}
			}
		}
		if = {
			limit = { 
				has_character_flag = mana5
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.42 }
		}
		if = {
			limit = { 
				has_character_flag = mana4
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.43 }
		}
		if = {
			limit = { 
				has_character_flag = mana3
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.44 }
		}
		if = {
			limit = { 
				has_character_flag = mana2
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.45 }
		}
		if = {
			limit = { 
				has_character_flag = mana1
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.46 }
		}
		if = {
			limit = { 
				has_character_flag = mana0
				NOT = { has_character_flag = countermagic }
			}
			event_target:player = { character_event = { id = mageduel.1 } }
		}	
	}
}
#Magic Missle Incapable
character_event = {
	id = mageduel.55
	desc = EVTDESCmageduel.20
	picture = GFX_evt_mage_duel

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.20 #Hit Incapable
		if = {
			limit = {
				AND = {
					OR = {
						has_character_flag = mana5
						has_character_flag = mana4
						has_character_flag = mana3
						has_character_flag = mana2
						has_character_flag = mana1
						has_character_flag = mana0
					}
					has_character_flag = countermagic
				}
			}
			random_list = {
				33 = { event_target:player = {
						character_event = { id = mageduel.72 }
					}
				}
				67 = { 
					if = {
						limit = { has_character_flag = mana5 }
						character_event = { id = mageduel.42 }
					}
					if = {
						limit = { has_character_flag = mana4 }
						character_event = { id = mageduel.43 }
					}
					if = {
						limit = { has_character_flag = mana3 }
						character_event = { id = mageduel.44 }
					}
					if = {
						limit = { has_character_flag = mana2 }
						character_event = { id = mageduel.45 }
					}
					if = {
						limit = { has_character_flag = mana1 }
						character_event = { id = mageduel.46 }
					}
					if = {
						limit = { has_character_flag = mana0 }
						event_target:player = { character_event = { id = mageduel.1 } }
					}
				}
			}
		}
		if = {
			limit = { 
				has_character_flag = mana5
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.42 }
		}
		if = {
			limit = { 
				has_character_flag = mana4
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.43 }
		}
		if = {
			limit = { 
				has_character_flag = mana3
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.44 }
		}
		if = {
			limit = { 
				has_character_flag = mana2
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.45 }
		}
		if = {
			limit = { 
				has_character_flag = mana1
				NOT = { has_character_flag = countermagic }
			}
			character_event = { id = mageduel.46 }
		}
		if = {
			limit = { 
				has_character_flag = mana0
				NOT = { has_character_flag = countermagic }
			}
			event_target:player = { character_event = { id = mageduel.1 } }
		}	
	}
}
#Magic Missle Death
character_event = {
	id = mageduel.56
	desc = EVTDESCmageduel.56
	picture = GFX_evt_battle_lost

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.21 #Hit Death
		prestige = -100
		hidden_tooltip = {
			event_target:enemy = { 
				remove_trait = curse1
				remove_trait = curse2
				remove_trait = curse3
				remove_trait = magicshield
				remove_trait = countermagic
				clr_character_flag = magicshield
				clr_character_flag = countermagic
				clr_character_flag = mana0
				clr_character_flag = mana1
				clr_character_flag = mana2
				clr_character_flag = mana3
				clr_character_flag = mana4
				clr_character_flag = mana5
			}
			event_target:player = {
				remove_trait = curse1
				remove_trait = curse2
				remove_trait = curse3
				remove_trait = magicshield
				remove_trait = countermagic
				clr_character_flag = magicshield
				clr_character_flag = countermagic
				clr_character_flag = mana0
				clr_character_flag = mana1
				clr_character_flag = mana2
				clr_character_flag = mana3
				clr_character_flag = mana4
				clr_character_flag = mana5
			}
		}
	}
}
#Magic Missle Miss
character_event = {
	id = mageduel.57
	desc = EVTDESCmageduel.22
	picture = GFX_evt_mage_duel

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.22 #Missed
		if = {
			limit = { has_character_flag = mana5 }
			character_event = { id = mageduel.42 }
		}
		if = {
			limit = { has_character_flag = mana4 }
			character_event = { id = mageduel.43 }
		}
		if = {
			limit = { has_character_flag = mana3 }
			character_event = { id = mageduel.44 }
		}
		if = {
			limit = { has_character_flag = mana2 }
			character_event = { id = mageduel.45 }
		}
		if = {
			limit = { has_character_flag = mana1 }
			character_event = { id = mageduel.46 }
		}
		if = {
			limit = { has_character_flag = mana0 }
			event_target:player = { character_event = { id = mageduel.1 } }
		}	
	}
}
#Curse 1
character_event = { 
	id = mageduel.58
	desc = EVTDESCmageduel.58
	picture = GFX_evt_mage_duel

	is_triggered_only = yes

	option = { 
		name = EVTOPTAmageduel.58 #Curse1
		if = {
			limit = { has_character_flag = mana5 }
			character_event = { id = mageduel.42 }
		}
		if = {
			limit = { has_character_flag = mana4 }
			character_event = { id = mageduel.43 }
		}
		if = {
			limit = { has_character_flag = mana3 }
			character_event = { id = mageduel.44 }
		}
		if = {
			limit = { has_character_flag = mana2 }
			character_event = { id = mageduel.45 }
		}
		if = {
			limit = { has_character_flag = mana1 }
			character_event = { id = mageduel.46 }
		}
		if = {
			limit = { has_character_flag = mana0 }
			event_target:player = { character_event = { id = mageduel.1 } }
		}
	}
}		
#Curse 2
character_event = { 
	id = mageduel.59
	desc = EVTDESCmageduel.59
	picture = GFX_evt_mage_duel

	is_triggered_only = yes

	option = { 
		name = EVTOPTAmageduel.59 #Curse2
		if = {
			limit = { has_character_flag = mana5 }
			character_event = { id = mageduel.42 }
		}
		if = {
			limit = { has_character_flag = mana4 }
			character_event = { id = mageduel.43 }
		}
		if = {
			limit = { has_character_flag = mana3 }
			character_event = { id = mageduel.44 }
		}
		if = {
			limit = { has_character_flag = mana2 }
			character_event = { id = mageduel.45 }
		}
		if = {
			limit = { has_character_flag = mana1 }
			character_event = { id = mageduel.46 }
		}
		if = {
			limit = { has_character_flag = mana0 }
			event_target:player = { character_event = { id = mageduel.1 } }
		}
	}
}
#Curse 3
character_event = { 
	id = mageduel.60
	desc = EVTDESCmageduel.60
	picture = GFX_evt_mage_duel

	is_triggered_only = yes

	option = { 
		name = EVTOPTAmageduel.60 #Curse3
		if = {
			limit = { has_character_flag = mana5 }
			character_event = { id = mageduel.42 }
		}
		if = {
			limit = { has_character_flag = mana4 }
			character_event = { id = mageduel.43 }
		}
		if = {
			limit = { has_character_flag = mana3 }
			character_event = { id = mageduel.44 }
		}
		if = {
			limit = { has_character_flag = mana2 }
			character_event = { id = mageduel.45 }
		}
		if = {
			limit = { has_character_flag = mana1 }
			character_event = { id = mageduel.46 }
		}
		if = {
			limit = { has_character_flag = mana0 }
			event_target:player = { character_event = { id = mageduel.1 } }
		}
	}
}
#Curse miss
character_event = { 
	id = mageduel.61
	desc = EVTDESCmageduel.61
	picture = GFX_evt_mage_duel

	is_triggered_only = yes

	option = { 
		name = EVTOPTAmageduel.61 #Curse miss
		if = {
			limit = { has_character_flag = mana5 }
			character_event = { id = mageduel.42 }
		}
		if = {
			limit = { has_character_flag = mana4 }
			character_event = { id = mageduel.43 }
		}
		if = {
			limit = { has_character_flag = mana3 }
			character_event = { id = mageduel.44 }
		}
		if = {
			limit = { has_character_flag = mana2 }
			character_event = { id = mageduel.45 }
		}
		if = {
			limit = { has_character_flag = mana1 }
			character_event = { id = mageduel.46 }
		}
		if = {
			limit = { has_character_flag = mana0 }
			event_target:player = { character_event = { id = mageduel.1 } }
		}
	}
}
#Healing Success
character_Event = {
	id = mageduel.62
	desc = EVTDESCmageduel.27
	picture = GFX_evt_healing
	
	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.27 #Healed
		if = {
			limit = { trait = wounded }
			remove_trait = wounded
		}
		if = {
			limit = {
				AND = { 
					NOT = { trait = incapable }
					trait = maimed 
				}
			}
			remove_trait = maimed
			add_trait = wounded
		}
		if = {
			limit = { 
				AND = {
					trait = incapable
					trait = maimed
				 }
			}
			remove_trait = incapable
		}
		if = {
			limit = { trait = curse1 }
			remove_trait = curse1
		}
		if = {
			limit = { trait = curse2 }
			remove_trait = curse2
			add_trait = curse1
		}
		if = {
			limit = { trait = curse3 }
			remove_trait = curse3
			add_trait = curse2
		}
		event_target:player = { character_event = { id = mageduel.1 } }
		clr_character_flag = mana0
		clr_character_flag = mana1
		clr_character_flag = mana2
		clr_character_flag = mana3
		clr_character_flag = mana4
		clr_character_flag = mana5	
	}
}
#Healing Great Success
character_event = {
	id = mageduel.63
	desc = EVTDESCmageduel.28
	picture = GFX_evt_healing
	
	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.28 #Healed
		if = {
			limit = { trait = wounded }
			remove_trait = wounded
		}
		if = {
			limit = {
				AND = {
					NOT = { trait = incapable }
					trait = maimed
				}
			}
			remove_trait = maimed
		}
		if = {
			limit = { 
				AND = {
					trait = incapable
					trait = maimed 
				}
			}
			remove_trait = incapable
			remove_trait = maimed
			add_trait = wounded
		}
		if = { 
			limit = { trait = curse1 }
			remove_trait = curse1
		}
		if = { 
			limit = { trait = curse2 }
			remove_trait = curse2
		}
		if = { 
			limit = { trait = curse3 }
			remove_trait = curse3
		} 
		event_target:player = { character_event = { id = mageduel.1 } }
		clr_character_flag = mana0
		clr_character_flag = mana1
		clr_character_flag = mana2
		clr_character_flag = mana3
		clr_character_flag = mana4
		clr_character_flag = mana5
	}
}
#Magic Shield Success
character_event = {
	id = mageduel.64
	desc = EVTDESCmageduel.29
	picture = GFX_evt_magic_shield
	
	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.29
		event_target:player = { set_character_flag = magicshield }
		event_target:enemy = { add_trait = magicshield }
		event_target:player = { character_event = { id = mageduel.1 } }
		clr_character_flag = mana0
		clr_character_flag = mana1
		clr_character_flag = mana2
		clr_character_flag = mana3
		clr_character_flag = mana4
		clr_character_flag = mana5
	}
}
#Magic Shield Fail
character_event = {
	id = mageduel.65
	desc = EVTDESCmageduel.30
	picture = GFX_evt_magic_shield
	
	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.30
		event_target:player = { character_event = { id = mageduel.1 } }
		clr_character_flag = mana0
		clr_character_flag = mana1
		clr_character_flag = mana2
		clr_character_flag = mana3
		clr_character_flag = mana4
		clr_character_flag = mana5
	}
}
#Countermagic Success
character_event = {
	id = mageduel.66
	desc = EVTDESCmageduel.31
	picture = GFX_evt_counter_magic
	
	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.31
		event_target:player = { set_character_flag = countermagic }
		event_target:enemy = { add_trait = countermagic }
		event_target:player = { character_event = { id = mageduel.1 } }
		clr_character_flag = mana0
		clr_character_flag = mana1
		clr_character_flag = mana2
		clr_character_flag = mana3
		clr_character_flag = mana4
		clr_character_flag = mana5
	}
}
#Countermagic Fail
character_event = {
	id = mageduel.67
	desc = EVTDESCmageduel.32
	picture = GFX_evt_counter_magic
	
	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.32
		event_target:player = { character_event = { id = mageduel.1 } }
		clr_character_flag = mana0
		clr_character_flag = mana1
		clr_character_flag = mana2
		clr_character_flag = mana3
		clr_character_flag = mana4
		clr_character_flag = mana5
	}
}
#Concentration Success
character_event = {
	id = mageduel.68
	desc = EVTDESCmageduel.33
	picture = GFX_evt_mage_duel
	
	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.33
		set_character_flag = concentration
		event_target:player = { character_event = { id = mageduel.1 } }
		clr_character_flag = mana0
		clr_character_flag = mana1
		clr_character_flag = mana2
		clr_character_flag = mana3
		clr_character_flag = mana4
		clr_character_flag = mana5
	}
}
#Concentration Fail
character_event = {
	id = mageduel.69
	desc = EVTDESCmageduel.34
	picture = GFX_evt_mage_duel
	
	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.34
		event_target:player = { character_event = { id = mageduel.1 } }
		clr_character_flag = mana0
		clr_character_flag = mana1
		clr_character_flag = mana2
		clr_character_flag = mana3
		clr_character_flag = mana4
		clr_character_flag = mana5
	}
}
#Countermagic Event
character_event = {
	id = mageduel.70
	desc = EVTDESCmageduel.35
	picture = GFX_evt_counter_missile

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.35
		hidden_tooltip = {
			event_target:player = {
				remove_trait = countermagic
			}
		}
		clr_character_flag = countermagic
		if = {
			limit = { has_character_flag = mana5 }
			Root = { character_event = { id = mageduel.42 } }
		}
		if = {
			limit = { has_character_flag = mana4 }
			Root = { character_event = { id = mageduel.43 } }
		}
		if = {
			limit = { has_character_flag = mana3 }
			Root = { character_event = { id = mageduel.44 } }
		}
		if = {
			limit = { has_character_flag = mana2 }
			Root = { character_event = { id = mageduel.45 } }
		}
		if = {
			limit = { has_character_flag = mana1 }
			Root = { character_event = { id = mageduel.46 } }
		}
		if = {
			limit = { has_character_flag = mana0 }
			event_target:player = { character_event = { id = mageduel.1 } }
		}
	}
}
#Alzur Player Miss Event
character_event = {
	id = mageduel.71
	desc = EVTDESCmageduel.71
	picture = GFX_evt_magic_defense

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.71
		event_target:enemy = { character_event = { id = mageduel.51 } }
	}
}
#Countermagic Player Event
character_event = {
	id = mageduel.72
	desc = EVTDESCmageduel.72
	picture = GFX_evt_counter_missile

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.72
		event_target:enemy = {
			if = {
				limit = {
					NOt = { trait = wounded }
					trait = maimed
					NOT = {trait = incapable }
				}
				remove_trait = maimed
				add_trait = incapable
			}
			if = {
				limit = {
					trait = wounded
					NOT = { trait = maimed }
					NOT = { trait = incapable }
				}
				add_trait = maimed
			}
			if = {
				limit = {
					NOT = { trait = wounded }
					NOT = { trait = maimed }
					NOT = { trait = incapable }
				}
				add_trait = wounded
			}
		}
		event_target:enemy = { character_event = { id = mageduel.70 } }
	}
}
#Magic Missle Player Miss Event
character_event = {
	id = mageduel.73
	desc = EVTDESCmageduel.73
	picture = GFX_evt_magic_defense

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.73
		event_target:enemy = { character_event = { id = mageduel.57 } }
	}
}
#Healing Success Player Event
character_event = {
	id = mageduel.74
	desc = EVTDESCmageduel.74
	picture = GFX_evt_healing

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.74
		event_target:enemy = { character_event = { id = mageduel.62 } }
	}
}
#Greater Healing Success Player Event
character_event = {
	id = mageduel.75
	desc = EVTDESCmageduel.75
	picture = GFX_evt_healing

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.75
		event_target:enemy = { character_event = { id = mageduel.63 } }
	}
}
#Magic Shield Success Player Event
character_event = {
	id = mageduel.76
	desc = EVTDESCmageduel.76
	picture = GFX_evt_magic_shield

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.76
		event_target:enemy = { character_event = { id = mageduel.64 } }
	}
}
#Magic Shield Fail Player Event
character_event = {
	id = mageduel.77
	desc = EVTDESCmageduel.77
	picture = GFX_evt_magic_shield

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.77
		event_target:enemy = { character_event = { id = mageduel.65 } }
	}
}
#Countermagic Success Player Event
character_event = {
	id = mageduel.78
	desc = EVTDESCmageduel.78
	picture = GFX_evt_counter_magic

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.78
		event_target:enemy = { character_event = { id = mageduel.66 } }
	}
}
#Countermagic Fail Player Event
character_event = {
	id = mageduel.79
	desc = EVTDESCmageduel.79
	picture = GFX_evt_counter_magic

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.79
		event_target:enemy = { character_event = { id = mageduel.67 } }
	}
}
#Concentration Success Player Event
character_event = {
	id = mageduel.80
	desc = EVTDESCmageduel.80
	picture = GFX_evt_mage_duel

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.80
		event_target:enemy = { character_event = { id = mageduel.68 } }
	}
}
#Concentration Fail Player Event
character_event = {
	id = mageduel.81
	desc = EVTDESCmageduel.81
	picture = GFX_evt_mage_duel

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.81
		event_target:enemy = { character_event = { id = mageduel.69 } }
	}
}
#I have been cursed #1
character_event = {
	id = mageduel.82
	desc = EVTDESCmageduel.82
	picture = GFX_evt_curse
	
	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.82 #Curse1
		hidden_tooltip = {
			if = { 
				limit = { trait = curse3 }
				remove_trait = curse3
			}
			if = { 
				limit = { trait = curse2 }
				remove_trait = curse2
			}
		}
		add_trait = curse1		
		event_target:enemy = { character_event = { id = mageduel.58 } }
	}
}
#I have been cursed #2
character_event = {
	id = mageduel.83
	desc = EVTDESCmageduel.83
	picture = GFX_evt_curse
	
	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.83 #Curse2
		hidden_tooltip = {
			if = { 
				limit = { trait = curse1 }
				remove_trait = curse1
			}
			if = { 
				limit = { trait = curse3 }
				remove_trait = curse3
			}
		}
		add_trait = curse2
		event_target:enemy = { character_event = { id = mageduel.59 } }
	}
}
#I have been cursed #3
character_event = {
	id = mageduel.84
	desc = EVTDESCmageduel.84
	picture = GFX_evt_curse
	
	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.84 #Curse3
		hidden_tooltip = {
			if = {
				limit = { trait = curse1 }
				remove_trait = curse1
			}
			if = {
				limit = { trait = curse2 }
				remove_trait = curse2
			}
		}
		add_trait = curse3
		event_target:enemy = { character_event = { id = mageduel.60 } }
	}
}
#Curse Miss
character_event = {
	id = mageduel.85
	desc = EVTDESCmageduel.85
	picture = GFX_evt_magic_defense
	
	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.85 #Curse3
		event_target:enemy = { character_event = { id = mageduel.61 } } 
	}
}
character_event = {
	id = mageduel.990
	desc = EVTDESCmageduel.990
	picture = GFX_evt_mage_duel

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.990
	}
}
character_event = {
	id = mageduel.991
	desc = EVTDESCmageduel.991
	picture = GFX_evt_mage_duel

	is_triggered_only = yes

	option = {
		name = EVTOPTAmageduel.991
		character_event = { id = mageduel.1 }
	}
}			